
### BMT-MicroApps（个人项目/一体化微前端平台）

- **项目概述**：围绕羽毛球预定与电商业务，构建 C 端（用户）+ B 端（管理后台）双应用，并通过微前端统一集成。提供预约排期、商城下单、论坛互动、支付、订单与场馆管理等核心模块；同时沉淀自研监控埋点 SDK、实时通信与高并发任务队列，提升可观测性与稳定性。
- **技术栈**：

  - **C 端**：Vue3、Vite、Element Plus、Pinia、Vue Router、Axios
  - **B 端**：React + TypeScript、Vite、Zustand、Tailwind CSS、ECharts
  - **微前端**：Wujie（`setupApp`/`preloadApp`/`startApp`，保活、预加载、路由同步、主子应用通信 `bus`）
  - **实时能力**：socket.io-client（自动重连、事件订阅/发送）
  - **监控埋点**：自研 `Telemetry` SDK（采集 page/event/error/perf/api + Web Vitals）、Performance API、全局 `error/unhandledrejection`
  - **工程能力**：Axios 二次封装（统一拦截、去重 `AbortController`、401 处理）、可复用任务队列 `TaskQueue`（并发/超时/重试/进度回调）
  - **构建与工具**：pnpm、TypeScript、ECharts 图表组件化
- **项目难点与亮点**：

  - **微前端集成稳定性**：基于 Wujie 将 `react-admin` 子应用无缝嵌入 Vue 主应用，启用预加载与保活；自定义 `fetch` 解决跨域与头部透传；生命周期钩子保障挂载/卸载过程一致性；通过 `bus` 与 `props` 传递 token 与登录态。
  - **全链路可观测性**：`src/monitoring/telemetry.ts` 提供事件模型与缓冲队列，支持采样、批量上报、页面隐藏/卸载 `flush`；接入 Web Vitals（LCP/FID/CLS/INP/TTFB）；在 `utils/request.ts`/`request.js` 中记录接口耗时/状态与错误归因。
  - **高并发与可靠性**：`TaskQueue`（JS/TS 双实现）提供并发上限、超时、指数退避重试与进度快照，解决批量任务与弱网场景下的抖动与失败恢复；用于埋点上报与批量 API 调度。
  - **实时通信**：`useWebSocket`（socket.io）封装连接管理、自动重连、事件订阅与消息发送；暴露 `connected/lastMessage/send`，用于通知中心与业务消息推送。
  - **支付链路打通**：支持微信/支付宝二维码支付（`PAY_PLATFORM` 常量、`PaymentView.vue`），创建支付后启动倒计时与状态轮询，支持取消/容错；兼容商城与场地预约两类订单。
  - **数据可视化组件化**：ECharts 通用图表组件 `components/shared/Chart.tsx`，按后端返回的类型渲染饼图/柱状图/折线图；Dashboard 汇总用户注册趋势、预约趋势、收入趋势等。
  - **工程与可维护性**：Axios 去重与 `AbortController` 主动取消同源请求；统一 401 退出与错误提示；类型化 API 定义与模块拆分（`types/apiTypes/*`）；文档沉淀（微前端实施、监控方案、WebSocket、TypeScript 使用指南等）。
- **个人职责**：主导架构选型与落地（微前端集成、通信与部署流程）、自研 Telemetry SDK、Socket.IO 实时能力封装、通用任务队列实现、支付与订单状态流程、Dashboard 图表体系与关键业务模块开发。
- **业务模块**：预约与场馆管理（特殊日期配置、批量上下架/状态）、商城商品/订单、论坛管理、用户与权限、公告、预约审核等。
- **可展示代码位置（关键目录）**：

  - 微前端：`src/plugins/wujie.js`
  - 监控 SDK：`BadmintonFrontend-B/src/monitoring/telemetry.ts`
  - WebSocket：`BadmintonFrontend-B/src/hooks/useWebSocket.ts`
  - 任务队列：`BadmintonFrontend-B/src/utils/TaskQueue.ts`、`src/utils/TaskQueue.js`
  - 支付流程：`src/views/pay/PaymentView.vue`、`src/api/pay.js`
  - 可视化：`BadmintonFrontend-B/src/components/shared/Chart.tsx`、`.../dashBoard/charts.tsx`
- **一句话价值**：以微前端为载体统一双端应用，叠加“可观测 + 实时 + 稳定性”的通用能力中台，显著提升集成效率与线上问题定位速度。
