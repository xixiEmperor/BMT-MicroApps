# 羽毛球管理系统场地预约接口文档

## 目录

- [羽毛球管理系统场地预约接口文档](#羽毛球管理系统场地预约接口文档)
  - [目录](#目录)
  - [场地相关接口](#场地相关接口)
    - [获取场地列表](#获取场地列表)
    - [获取场地详情](#获取场地详情)
    - [获取场地预约状态](#获取场地预约状态)
  - [预约相关接口](#预约相关接口)
    - [创建预约](#创建预约)
    - [支付预约订单](#支付预约订单)
  - [2. 获取场馆通知](#2-获取场馆通知)
  - [6. 获取场地使用统计](#6-获取场地使用统计)

## 场地相关接口

### 获取场地列表

- **接口路径**：`/api/courts`
- **请求方式**：GET
- **接口描述**：获取所有可预约场地列表
- **请求参数**：无
- **成功响应**：

```json
{
  "code": 0,
  "message": "string",
  "data": [
    {
      "id": "number",
      "name": "string",
      "description": "string",
      "maintenance": "boolean",
      "bookedTimes": [
        {
          "date": "string",
          "start": "string",
          "end": "string"
        }
      ]
    }
  ]
}
```

- **错误响应**：

```json
{
  "code": 5001,
  "message": "系统错误，请稍后重试"
}
```

### 获取场地详情

- **接口路径**：`/api/courts/id`
- **请求方式**：GET
- **接口描述**：获取指定场地的详细信息
- **请求参数**：

| 参数名 | 类型   | 是否必须 | 描述   |
| ------ | ------ | -------- | ------ |
| id     | number | 是       | 场地ID |

- **成功响应**：

```json
{
  "code": 0,
  "message": "操作成功",
  "data": {
    "id": 1,
    "name": "羽毛球场1号",
    "description": "专业比赛场地，设备齐全，适合高水平比赛和训练。",
    "price": 20,
    "status": "available",
    "maintenance": false,
    "facilities": ["空调", "照明系统", "更衣室", "饮水机"],
    "images": ["court1_1.jpg", "court1_2.jpg"]
  }
}
```

### 获取场地预约状态

- **接口路径**：`/api/courts/availability`
- **请求方式**：GET
- **接口描述**：获取指定日期的场地预约状态
- **请求参数**：

| 参数名 | 类型   | 是否必须 | 描述                   |
| ------ | ------ | -------- | ---------------------- |
| date   | string | 是       | 日期，格式为YYYY-MM-DD |

- **成功响应**：

```json
{
  "code": 0,
  "message": "操作成功",
  "data": [
    {
      "courtId": 1,
      "bookedTimes": [
        {
          "start": "10:00",
          "end": "12:00"
        },
        {
          "start": "14:00",
          "end": "16:00"
        }
      ]
    },
    {
      "courtId": 2,
      "bookedTimes": [
        {
          "start": "09:00",
          "end": "11:00"
        }
      ]
    }
  ]
}
```

- **错误响应**：

```json
{
  "code": 1,
  "message": "日期参数格式错误"
}
```

```json
{
  "code": 2,
  "message": "日期必须是今天或未来日期"
}
```

## 预约相关接口

### 创建预约

- **接口路径**：`/api/bookings`
- **请求方式**：POST
- **接口描述**：创建新的场地预约
- **请求参数**：

| 参数名    | 类型   | 是否必须 | 描述                       |
| --------- | ------ | -------- | -------------------------- |
| courtId   | number | 是       | 场地ID                     |
| date      | string | 是       | 预约日期，格式为YYYY-MM-DD |
| startTime | string | 是       | 开始时间，格式为HH:MM      |
| endTime   | string | 是       | 结束时间，格式为HH:MM      |
| name      | string | 是       | 预约人姓名                 |
| phone     | string | 是       | 预约人电话                 |

- **成功响应**：

```json
{
  "code": 0,
  "message": "预约成功",
  "data": {
    "bookingId": "number",
    "orderNumber": "string"
  }
}
```

### 支付预约订单

- **接口路径**：`/api/bookings/:id/pay`
- **请求方式**：POST
- **接口描述**：支付预约订单
- **请求参数**：

| 参数名        | 类型   | 是否必须 | 描述                    |
| ------------- | ------ | -------- | ----------------------- |
| id            | number | 是       | 预约ID                  |
| paymentMethod | string | 是       | 支付方式(alipay/wechat) |

- **成功响应**：

```json
{
  "code": 0,
  "message": "支付成功",
  "data": {
    "bookingId": 123,
    "status": "paid",
    "paymentTime": "2023-10-14T15:30:00Z"
  }
}
```

- **错误响应**：

```json
{
  "code": 1,
  "message": "预约不存在"
}
```

```json
{
  "code": 2,
  "message": "订单已支付"
}
```

```json
{
  "code": 3,
  "message": "预约已取消，无法支付"
}
```

```json
{
  "code": 4,
  "message": "支付方式不可用"
}
```

```json
{
  "code": 5,
  "message": "支付处理失败，请稍后重试"
}
```

## 2. 获取场馆通知

**接口路径**: /api/notices  
**请求类型**: GET  
**接口名称**: 获取场馆通知

**请求参数**: 无

**返回响应**:

```
{
  "code": 0, // 0表示成功，1表示失败
  "message": "string", // 响应消息
  "data": [
    {
      "id": "number", // 通知ID
      "title": "string", // 通知标题
      "content": "string", // 通知内容
      "type": "string", // 通知类型：normal(普通)、important(重要)、urgent(紧急)
      "createTime": "string" // 创建时间，格式：YYYY-MM-DD HH:mm:ss
    }
  ]
}
```

## 6. 获取场地使用统计

**接口路径**: /api/courts/stats  
**请求类型**: GET  
**接口名称**: 获取场地使用统计

**请求参数**: 无

**返回响应**:

```
{
  "code": 0, // 0表示成功，1表示失败
  "message": "string", // 响应消息
  "data": [
    {
      "courtId": "number", // 场地ID
      "courtName": "string", // 场地名称
      "bookingCount": "number" // 预约次数
    }
  ]
}
```
