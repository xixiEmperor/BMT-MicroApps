import{e}from"./index-BuScbc3L.js";import{f as s}from"./format-D0hGXpTN.js";import{r as l}from"./element-plus-D8DMz00a.js";const t=e("forum",()=>{const e=l(),t=l(null),u=l(),setCurrentPost=e=>{e&&e.publishTime&&!e.publishTime.includes("-")&&(e.publishTime=s(e.publishTime)),t.value=e},i=l([]);return{posts:e,currentPost:t,hotPosts:u,setPosts:l=>{l&&l.length>0?e.value=l.map(e=>(e.publishTime&&!e.publishTime.includes("-")&&(e.publishTime=s(e.publishTime)),e.lastReply&&!e.lastReply.includes("-")&&(e.lastReply=s(e.lastReply)),e)):e.value=l},setHotPosts:e=>{u.value=e},setCurrentPost:setCurrentPost,addPost:s=>{e.value.unshift(s)},updatePost:s=>{const l=e.value.findIndex(e=>e.id===s.id);-1!==l&&(e.value[l]=s),t.value&&t.value.id===s.id&&setCurrentPost(s)},deletePost:s=>{const l=e.value.findIndex(e=>e.id===s);-1!==l&&e.value.splice(l,1),t.value&&t.value.id===s&&(t.value=null)},comments:i,setComments:e=>{i.value=e}}},{persist:!0});export{t as u};
