const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/LayOut-D8EaYp0P.js","assets/el-tooltip-l0sNRNKZ.js","assets/_plugin-vue_export-helper-CTKw_zaB.js","assets/_plugin-vue_export-helper-BLVIn-nA.css","assets/element-plus-D8DMz00a.js","assets/cart-Dkt6AmB0.js","assets/LayOut-BwLWpsCl.css","assets/el-menu-item-BtWNiVV2.css","assets/el-scrollbar-naz6v7q5.css","assets/el-image-viewer-FHru2bB8.css","assets/el-message-box-Bmp-_VRS.css","assets/el-input-Df8bpzVj.css","assets/el-overlay-CUAhHdWP.css","assets/HomeView-DHrJ6qL2.js","assets/HomeView-Cpc6gZx0.css","assets/el-card-fwQOLwdi.css","assets/BookingView-BrIXWYmc.js","assets/venueOrder-qXvr7p9X.js","assets/venueOrder-D6rUMSxV.css","assets/format-D0hGXpTN.js","assets/BookingView-CJEQh18S.css","assets/el-col-Ds2mGN2S.css","assets/el-skeleton-item-BLY1jEuR.css","assets/el-tag-DljBBxJR.css","assets/el-select-jN5p52No.css","assets/el-date-picker-panel-CeCxygqp.css","assets/el-loading-C5IeuJ3V.css","assets/el-pagination-BDwEpwR6.css","assets/el-empty-DZHWrHdf.css","assets/el-carousel-item-QcwX6lCY.css","assets/el-form-item-C8K1804s.css","assets/el-alert-G57rL0jl.css","assets/ShopView-re36gkOh.js","assets/shop-cKho_Rxx.js","assets/ShopView-BVHVnMQv.css","assets/ProductDetail-DrY9ugp4.js","assets/ProductDetail-j2MehKlc.css","assets/el-tab-pane-BLUvaGkK.css","assets/CartView-Qan4W3HG.js","assets/CartView-CcEHrmXI.css","assets/el-table-column-D8Rt7BPN.css","assets/CheckoutView-Bk6E13rw.js","assets/pay-D_1k_pGE.js","assets/CheckoutView-BX67oPYY.css","assets/PaymentView-B0AAd15s.js","assets/PaymentView-CzcyQyqQ.css","assets/el-progress-Dw9yTa91.css","assets/PaymentResultView-CjiUk03o.js","assets/PaymentResultView-D1_uKeTq.css","assets/OrderListView-D65A_9t9.js","assets/OrderListView-_fiM5cpx.css","assets/OrderDetailView-CdtmNWFn.js","assets/OrderDetailView-Dr2O_LYO.css","assets/ForumView-rlRvRbaj.js","assets/forum-CaX-pHs2.js","assets/forum-BBMbsy3N.js","assets/ForumView-RgOQ5FKt.css","assets/UserCenter-tOthMJjc.js","assets/UserCenter-D-c1yqrn.css","assets/BookingHistory-BEaZCKjn.js","assets/BookingHistory-DlYwk7XH.css","assets/PublishPost-DaYhevPs.js","assets/PublishPost-sUMEK4d6.css","assets/PostDetail-CwTSnNnW.js","assets/PostDetail-CWZMmELZ.css","assets/el-avatar-BmRr_O8d.css","assets/MyHistoryPost-D6iwK5k7.js","assets/MyHistoryPost-DKCuV0k4.css","assets/AdminContainer-B5rSPMGD.js","assets/AdminContainer-Curt9XEZ.css","assets/Login-QHu5lHqZ.js","assets/Login-DQ4N22cn.css"])))=>i.map(i=>d[i]);
var e,t,r,s,c=Object.defineProperty,__publicField=(e,t,r)=>((e,t,r)=>t in e?c(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r)(e,"symbol"!=typeof t?t+"":t,r);import{e as u,r as l,m as p,a as h,i as m,b as y,t as g,g as v,o as b,w,n as E,c as _,d as O,f as S,h as T,s as x,j as A,u as R,k as C,p as P,l as k,E as j,q as L,v as I,x as U,y as N,z as D,A as W,B as M,C as B,D as $,F,G as q,H}from"./element-plus-D8DMz00a.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))processPreload(e);new MutationObserver(e=>{for(const t of e)if("childList"===t.type)for(const e of t.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&processPreload(e)}).observe(document,{childList:!0,subtree:!0})}function processPreload(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var J={name:"zh-cn",el:{breadcrumb:{label:"面包屑"},colorpicker:{confirm:"确定",clear:"清空",defaultLabel:"颜色选择器",description:"当前颜色 {color}，按 Enter 键选择新颜色",alphaLabel:"选择透明度的值"},datepicker:{now:"此刻",today:"今天",cancel:"取消",clear:"清空",confirm:"确定",dateTablePrompt:"使用方向键与 Enter 键可选择日期",monthTablePrompt:"使用方向键与 Enter 键可选择月份",yearTablePrompt:"使用方向键与 Enter 键可选择年份",selectedDate:"已选日期",selectDate:"选择日期",selectTime:"选择时间",startDate:"开始日期",startTime:"开始时间",endDate:"结束日期",endTime:"结束时间",prevYear:"前一年",nextYear:"后一年",prevMonth:"上个月",nextMonth:"下个月",year:"年",month1:"1 月",month2:"2 月",month3:"3 月",month4:"4 月",month5:"5 月",month6:"6 月",month7:"7 月",month8:"8 月",month9:"9 月",month10:"10 月",month11:"11 月",month12:"12 月",weeks:{sun:"日",mon:"一",tue:"二",wed:"三",thu:"四",fri:"五",sat:"六"},weeksFull:{sun:"星期日",mon:"星期一",tue:"星期二",wed:"星期三",thu:"星期四",fri:"星期五",sat:"星期六"},months:{jan:"一月",feb:"二月",mar:"三月",apr:"四月",may:"五月",jun:"六月",jul:"七月",aug:"八月",sep:"九月",oct:"十月",nov:"十一月",dec:"十二月"}},inputNumber:{decrease:"减少数值",increase:"增加数值"},select:{loading:"加载中",noMatch:"无匹配数据",noData:"无数据",placeholder:"请选择"},dropdown:{toggleDropdown:"切换下拉选项"},mention:{loading:"加载中"},cascader:{noMatch:"无匹配数据",loading:"加载中",placeholder:"请选择",noData:"暂无数据"},pagination:{goto:"前往",pagesize:"条/页",total:"共 {total} 条",pageClassifier:"页",page:"页",prev:"上一页",next:"下一页",currentPage:"第 {pager} 页",prevPages:"向前 {pager} 页",nextPages:"向后 {pager} 页",deprecationWarning:"你使用了一些已被废弃的用法，请参考 el-pagination 的官方文档"},dialog:{close:"关闭此对话框"},drawer:{close:"关闭此对话框"},messagebox:{title:"提示",confirm:"确定",cancel:"取消",error:"输入的数据不合法!",close:"关闭此对话框"},upload:{deleteTip:"按 Delete 键可删除",delete:"删除",preview:"查看图片",continue:"继续上传"},slider:{defaultLabel:"滑块介于 {min} 至 {max}",defaultRangeStartLabel:"选择起始值",defaultRangeEndLabel:"选择结束值"},table:{emptyText:"暂无数据",confirmFilter:"筛选",resetFilter:"重置",clearFilter:"全部",sumText:"合计"},tour:{next:"下一步",previous:"上一步",finish:"结束导览",close:"关闭此对话框"},tree:{emptyText:"暂无数据"},transfer:{noMatch:"无匹配数据",noData:"无数据",titles:["列表 1","列表 2"],filterPlaceholder:"请输入搜索内容",noCheckedFormat:"共 {total} 项",hasCheckedFormat:"已选 {checked}/{total} 项"},image:{error:"加载失败"},pageHeader:{title:"返回"},popconfirm:{confirmButtonText:"确定",cancelButtonText:"取消"},carousel:{leftArrow:"上一张幻灯片",rightArrow:"下一张幻灯片",indicator:"幻灯片切换至索引 {index}"}}};let V;const setActivePinia=e=>V=e,G=Symbol();function isPlainObject$1(e){return e&&"object"==typeof e&&"[object Object]"===Object.prototype.toString.call(e)&&"function"!=typeof e.toJSON}var z,Q;(Q=z||(z={})).direct="direct",Q.patchObject="patch object",Q.patchFunction="patch function";const noop$2=()=>{};function addSubscription(e,t,r,s=noop$2){e.push(t);const removeSubscription=()=>{const r=e.indexOf(t);r>-1&&(e.splice(r,1),s())};return!r&&v()&&b(removeSubscription),removeSubscription}function triggerSubscriptions(e,...t){e.slice().forEach(e=>{e(...t)})}const fallbackRunWithContext=e=>e(),K=Symbol(),Y=Symbol();function mergeReactiveObjects(e,t){e instanceof Map&&t instanceof Map?t.forEach((t,r)=>e.set(r,t)):e instanceof Set&&t instanceof Set&&t.forEach(e.add,e);for(const r in t){if(!t.hasOwnProperty(r))continue;const s=t[r],c=e[r];isPlainObject$1(c)&&isPlainObject$1(s)&&e.hasOwnProperty(r)&&!m(s)&&!y(s)?e[r]=mergeReactiveObjects(c,s):e[r]=s}return e}const X=Symbol();function shouldHydrate(e){return!isPlainObject$1(e)||!Object.prototype.hasOwnProperty.call(e,X)}const{assign:Z}=Object;function isComputed(e){return!(!m(e)||!e.effect)}function createSetupStore(e,t,r={},s,c,p){let v;const b=Z({actions:{}},r),_={deep:!0};let O,S,T,x=[],A=[];const R=s.state.value[e];let C;function $patch(t){let r;O=S=!1,"function"==typeof t?(t(s.state.value[e]),r={type:z.patchFunction,storeId:e,events:T}):(mergeReactiveObjects(s.state.value[e],t),r={type:z.patchObject,payload:t,storeId:e,events:T});const c=C=Symbol();E().then(()=>{C===c&&(O=!0)}),S=!0,triggerSubscriptions(x,r,s.state.value[e])}p||R||(s.state.value[e]={}),l({});const P=p?function(){const{state:e}=r,t=e?e():{};this.$patch(e=>{Z(e,t)})}:noop$2;const action=(t,r="")=>{if(K in t)return t[Y]=r,t;const wrappedAction=function(){setActivePinia(s);const r=Array.from(arguments),c=[],u=[];let l;triggerSubscriptions(A,{args:r,name:wrappedAction[Y],store:j,after:function(e){c.push(e)},onError:function(e){u.push(e)}});try{l=t.apply(this&&this.$id===e?this:j,r)}catch(p){throw triggerSubscriptions(u,p),p}return l instanceof Promise?l.then(e=>(triggerSubscriptions(c,e),e)).catch(e=>(triggerSubscriptions(u,e),Promise.reject(e))):(triggerSubscriptions(c,l),l)};return wrappedAction[K]=!0,wrappedAction[Y]=r,wrappedAction},k={_p:s,$id:e,$onAction:addSubscription.bind(null,A),$patch:$patch,$reset:P,$subscribe(t,r={}){const c=addSubscription(x,t,r.detached,()=>u()),u=v.run(()=>w(()=>s.state.value[e],s=>{("sync"===r.flush?S:O)&&t({storeId:e,type:z.direct,events:T},s)},Z({},_,r)));return c},$dispose:function(){v.stop(),x=[],A=[],s._s.delete(e)}},j=h(k);s._s.set(e,j);const L=(s._a&&s._a.runWithContext||fallbackRunWithContext)(()=>s._e.run(()=>(v=u()).run(()=>t({action:action}))));for(const u in L){const t=L[u];if(m(t)&&!isComputed(t)||y(t))p||(R&&shouldHydrate(t)&&(m(t)?t.value=R[u]:mergeReactiveObjects(t,R[u])),s.state.value[e][u]=t);else if("function"==typeof t){const e=action(t,u);L[u]=e,b.actions[u]=t}}return Z(j,L),Z(g(j),L),Object.defineProperty(j,"$state",{get:()=>s.state.value[e],set:e=>{$patch(t=>{Z(t,e)})}}),s._p.forEach(e=>{Z(j,v.run(()=>e({store:j,app:s._a,pinia:s,options:b})))}),R&&p&&r.hydrate&&r.hydrate(j.$state,R),O=!0,S=!0,j}function defineStore(e,t,r){let s;const c="function"==typeof t;function useStore(r,u){const l=T();(r=r||(l?S(G,null):null))&&setActivePinia(r),(r=V)._s.has(e)||(c?createSetupStore(e,t,s,r):function(e,t,r){const{state:s,actions:c,getters:u}=t,l=r.state.value[e];let h;h=createSetupStore(e,function(){l||(r.state.value[e]=s?s():{});const t=_(r.state.value[e]);return Z(t,c,Object.keys(u||{}).reduce((t,s)=>(t[s]=p(O(()=>{setActivePinia(r);const t=r._s.get(e);return u[s].call(t,t)})),t),{}))},t,r,0,!0)}(e,s,r));return r._s.get(e)}return s=c?r:t,useStore.$id=e,useStore}function bind(e,t){return function(){return e.apply(t,arguments)}}const{toString:ee}=Object.prototype,{getPrototypeOf:te}=Object,{iterator:re,toStringTag:ne}=Symbol,oe=(e=>t=>{const r=ee.call(t);return e[r]||(e[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),kindOfTest=e=>(e=e.toLowerCase(),t=>oe(t)===e),typeOfTest=e=>t=>typeof t===e,{isArray:ie}=Array,se=typeOfTest("undefined");function isBuffer(e){return null!==e&&!se(e)&&null!==e.constructor&&!se(e.constructor)&&ue(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const ae=kindOfTest("ArrayBuffer");const ce=typeOfTest("string"),ue=typeOfTest("function"),le=typeOfTest("number"),isObject$1=e=>null!==e&&"object"==typeof e,isPlainObject=e=>{if("object"!==oe(e))return!1;const t=te(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||ne in e||re in e)},pe=kindOfTest("Date"),fe=kindOfTest("File"),de=kindOfTest("Blob"),he=kindOfTest("FileList"),me=kindOfTest("URLSearchParams"),[ye,ge,ve,be]=["ReadableStream","Request","Response","Headers"].map(kindOfTest);function forEach(e,t,{allOwnKeys:r=!1}={}){if(null==e)return;let s,c;if("object"!=typeof e&&(e=[e]),ie(e))for(s=0,c=e.length;s<c;s++)t.call(null,e[s],s,e);else{if(isBuffer(e))return;const c=r?Object.getOwnPropertyNames(e):Object.keys(e),u=c.length;let l;for(s=0;s<u;s++)l=c[s],t.call(null,e[l],l,e)}}function findKey(e,t){if(isBuffer(e))return null;t=t.toLowerCase();const r=Object.keys(e);let s,c=r.length;for(;c-- >0;)if(s=r[c],t===s.toLowerCase())return s;return null}const we="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:globalThis,isContextDefined=e=>!se(e)&&e!==we;const Ee=(e=>t=>e&&t instanceof e)("undefined"!=typeof Uint8Array&&te(Uint8Array)),_e=kindOfTest("HTMLFormElement"),Oe=(({hasOwnProperty:e})=>(t,r)=>e.call(t,r))(Object.prototype),Se=kindOfTest("RegExp"),reduceDescriptors=(e,t)=>{const r=Object.getOwnPropertyDescriptors(e),s={};forEach(r,(r,c)=>{let u;!1!==(u=t(r,c,e))&&(s[c]=u||r)}),Object.defineProperties(e,s)};const Te=kindOfTest("AsyncFunction"),xe=(Ae="function"==typeof setImmediate,Re=ue(we.postMessage),Ae?setImmediate:Re?(Ce=`axios@${Math.random()}`,Pe=[],we.addEventListener("message",({source:e,data:t})=>{e===we&&t===Ce&&Pe.length&&Pe.shift()()},!1),e=>{Pe.push(e),we.postMessage(Ce,"*")}):e=>setTimeout(e));var Ae,Re,Ce,Pe;const ke="undefined"!=typeof queueMicrotask?queueMicrotask.bind(we):"undefined"!=typeof process&&process.nextTick||xe,je={isArray:ie,isArrayBuffer:ae,isBuffer:isBuffer,isFormData:e=>{let t;return e&&("function"==typeof FormData&&e instanceof FormData||ue(e.append)&&("formdata"===(t=oe(e))||"object"===t&&ue(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&ae(e.buffer),t},isString:ce,isNumber:le,isBoolean:e=>!0===e||!1===e,isObject:isObject$1,isPlainObject:isPlainObject,isEmptyObject:e=>{if(!isObject$1(e)||isBuffer(e))return!1;try{return 0===Object.keys(e).length&&Object.getPrototypeOf(e)===Object.prototype}catch(t){return!1}},isReadableStream:ye,isRequest:ge,isResponse:ve,isHeaders:be,isUndefined:se,isDate:pe,isFile:fe,isBlob:de,isRegExp:Se,isFunction:ue,isStream:e=>isObject$1(e)&&ue(e.pipe),isURLSearchParams:me,isTypedArray:Ee,isFileList:he,forEach:forEach,merge:function merge(){const{caseless:e,skipUndefined:t}=isContextDefined(this)&&this||{},r={},assignValue=(s,c)=>{const u=e&&findKey(r,c)||c;isPlainObject(r[u])&&isPlainObject(s)?r[u]=merge(r[u],s):isPlainObject(s)?r[u]=merge({},s):ie(s)?r[u]=s.slice():t&&se(s)||(r[u]=s)};for(let s=0,c=arguments.length;s<c;s++)arguments[s]&&forEach(arguments[s],assignValue);return r},extend:(e,t,r,{allOwnKeys:s}={})=>(forEach(t,(t,s)=>{r&&ue(t)?e[s]=bind(t,r):e[s]=t},{allOwnKeys:s}),e),trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,r,s)=>{e.prototype=Object.create(t.prototype,s),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},toFlatObject:(e,t,r,s)=>{let c,u,l;const p={};if(t=t||{},null==e)return t;do{for(c=Object.getOwnPropertyNames(e),u=c.length;u-- >0;)l=c[u],s&&!s(l,e,t)||p[l]||(t[l]=e[l],p[l]=!0);e=!1!==r&&te(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},kindOf:oe,kindOfTest:kindOfTest,endsWith:(e,t,r)=>{e=String(e),(void 0===r||r>e.length)&&(r=e.length),r-=t.length;const s=e.indexOf(t,r);return-1!==s&&s===r},toArray:e=>{if(!e)return null;if(ie(e))return e;let t=e.length;if(!le(t))return null;const r=new Array(t);for(;t-- >0;)r[t]=e[t];return r},forEachEntry:(e,t)=>{const r=(e&&e[re]).call(e);let s;for(;(s=r.next())&&!s.done;){const r=s.value;t.call(e,r[0],r[1])}},matchAll:(e,t)=>{let r;const s=[];for(;null!==(r=e.exec(t));)s.push(r);return s},isHTMLForm:_e,hasOwnProperty:Oe,hasOwnProp:Oe,reduceDescriptors:reduceDescriptors,freezeMethods:e=>{reduceDescriptors(e,(t,r)=>{if(ue(e)&&-1!==["arguments","caller","callee"].indexOf(r))return!1;const s=e[r];ue(s)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")}))})},toObjectSet:(e,t)=>{const r={},define=e=>{e.forEach(e=>{r[e]=!0})};return ie(e)?define(e):define(String(e).split(t)),r},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,t,r){return t.toUpperCase()+r}),noop:()=>{},toFiniteNumber:(e,t)=>null!=e&&Number.isFinite(e=+e)?e:t,findKey:findKey,global:we,isContextDefined:isContextDefined,isSpecCompliantForm:function(e){return!!(e&&ue(e.append)&&"FormData"===e[ne]&&e[re])},toJSONObject:e=>{const t=new Array(10),visit=(e,r)=>{if(isObject$1(e)){if(t.indexOf(e)>=0)return;if(isBuffer(e))return e;if(!("toJSON"in e)){t[r]=e;const s=ie(e)?[]:{};return forEach(e,(e,t)=>{const c=visit(e,r+1);!se(c)&&(s[t]=c)}),t[r]=void 0,s}}return e};return visit(e,0)},isAsyncFn:Te,isThenable:e=>e&&(isObject$1(e)||ue(e))&&ue(e.then)&&ue(e.catch),setImmediate:xe,asap:ke,isIterable:e=>null!=e&&ue(e[re])};function AxiosError$1(e,t,r,s,c){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),s&&(this.request=s),c&&(this.response=c,this.status=c.status?c.status:null)}je.inherits(AxiosError$1,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:je.toJSONObject(this.config),code:this.code,status:this.status}}});const Le=AxiosError$1.prototype,Ie={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{Ie[e]={value:e}}),Object.defineProperties(AxiosError$1,Ie),Object.defineProperty(Le,"isAxiosError",{value:!0}),AxiosError$1.from=(e,t,r,s,c,u)=>{const l=Object.create(Le);je.toFlatObject(e,l,function(e){return e!==Error.prototype},e=>"isAxiosError"!==e);const p=e&&e.message?e.message:"Error",h=null==t&&e?e.code:t;return AxiosError$1.call(l,p,h,r,s,c),e&&null==l.cause&&Object.defineProperty(l,"cause",{value:e,configurable:!0}),l.name=e&&e.name||"Error",u&&Object.assign(l,u),l};function isVisitable(e){return je.isPlainObject(e)||je.isArray(e)}function removeBrackets(e){return je.endsWith(e,"[]")?e.slice(0,-2):e}function renderKey(e,t,r){return e?e.concat(t).map(function(e,t){return e=removeBrackets(e),!r&&t?"["+e+"]":e}).join(r?".":""):t}const Ue=je.toFlatObject(je,{},null,function(e){return/^is[A-Z]/.test(e)});function toFormData$1(e,t,r){if(!je.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const s=(r=je.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(e,t){return!je.isUndefined(t[e])})).metaTokens,c=r.visitor||defaultVisitor,u=r.dots,l=r.indexes,p=(r.Blob||"undefined"!=typeof Blob&&Blob)&&je.isSpecCompliantForm(t);if(!je.isFunction(c))throw new TypeError("visitor must be a function");function convertValue(e){if(null===e)return"";if(je.isDate(e))return e.toISOString();if(je.isBoolean(e))return e.toString();if(!p&&je.isBlob(e))throw new AxiosError$1("Blob is not supported. Use a Buffer instead.");return je.isArrayBuffer(e)||je.isTypedArray(e)?p&&"function"==typeof Blob?new Blob([e]):Buffer.from(e):e}function defaultVisitor(e,r,c){let p=e;if(e&&!c&&"object"==typeof e)if(je.endsWith(r,"{}"))r=s?r:r.slice(0,-2),e=JSON.stringify(e);else if(je.isArray(e)&&function(e){return je.isArray(e)&&!e.some(isVisitable)}(e)||(je.isFileList(e)||je.endsWith(r,"[]"))&&(p=je.toArray(e)))return r=removeBrackets(r),p.forEach(function(e,s){!je.isUndefined(e)&&null!==e&&t.append(!0===l?renderKey([r],s,u):null===l?r:r+"[]",convertValue(e))}),!1;return!!isVisitable(e)||(t.append(renderKey(c,r,u),convertValue(e)),!1)}const h=[],m=Object.assign(Ue,{defaultVisitor:defaultVisitor,convertValue:convertValue,isVisitable:isVisitable});if(!je.isObject(e))throw new TypeError("data must be an object");return function build(e,r){if(!je.isUndefined(e)){if(-1!==h.indexOf(e))throw Error("Circular reference detected in "+r.join("."));h.push(e),je.forEach(e,function(e,s){!0===(!(je.isUndefined(e)||null===e)&&c.call(t,e,je.isString(s)?s.trim():s,r,m))&&build(e,r?r.concat(s):[s])}),h.pop()}}(e),t}function encode$2(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(e){return t[e]})}function AxiosURLSearchParams(e,t){this._pairs=[],e&&toFormData$1(e,this,t)}const Ne=AxiosURLSearchParams.prototype;function encode$1(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function buildURL(e,t,r){if(!t)return e;const s=r&&r.encode||encode$1;je.isFunction(r)&&(r={serialize:r});const c=r&&r.serialize;let u;if(u=c?c(t,r):je.isURLSearchParams(t)?t.toString():new AxiosURLSearchParams(t,r).toString(s),u){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+u}return e}Ne.append=function(e,t){this._pairs.push([e,t])},Ne.toString=function(e){const t=e?function(t){return e.call(this,t,encode$2)}:encode$2;return this._pairs.map(function(e){return t(e[0])+"="+t(e[1])},"").join("&")};class InterceptorManager{constructor(){this.handlers=[]}use(e,t,r){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!r&&r.synchronous,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){je.forEach(this.handlers,function(t){null!==t&&e(t)})}}const De={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},We={isBrowser:!0,classes:{URLSearchParams:"undefined"!=typeof URLSearchParams?URLSearchParams:AxiosURLSearchParams,FormData:"undefined"!=typeof FormData?FormData:null,Blob:"undefined"!=typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},Me="undefined"!=typeof window&&"undefined"!=typeof document,Be="object"==typeof navigator&&navigator||void 0,$e=Me&&(!Be||["ReactNative","NativeScript","NS"].indexOf(Be.product)<0),Fe="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"==typeof self.importScripts,qe=Me&&window.location.href||"http://localhost",He={...Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Me,hasStandardBrowserEnv:$e,hasStandardBrowserWebWorkerEnv:Fe,navigator:Be,origin:qe},Symbol.toStringTag,{value:"Module"})),...We};function formDataToJSON(e){function buildPath(e,t,r,s){let c=e[s++];if("__proto__"===c)return!0;const u=Number.isFinite(+c),l=s>=e.length;if(c=!c&&je.isArray(r)?r.length:c,l)return je.hasOwnProp(r,c)?r[c]=[r[c],t]:r[c]=t,!u;r[c]&&je.isObject(r[c])||(r[c]=[]);return buildPath(e,t,r[c],s)&&je.isArray(r[c])&&(r[c]=function(e){const t={},r=Object.keys(e);let s;const c=r.length;let u;for(s=0;s<c;s++)u=r[s],t[u]=e[u];return t}(r[c])),!u}if(je.isFormData(e)&&je.isFunction(e.entries)){const t={};return je.forEachEntry(e,(e,r)=>{buildPath(function(e){return je.matchAll(/\w+|\[(\w*)]/g,e).map(e=>"[]"===e[0]?"":e[1]||e[0])}(e),r,t,0)}),t}return null}const Je={transitional:De,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const r=t.getContentType()||"",s=r.indexOf("application/json")>-1,c=je.isObject(e);c&&je.isHTMLForm(e)&&(e=new FormData(e));if(je.isFormData(e))return s?JSON.stringify(formDataToJSON(e)):e;if(je.isArrayBuffer(e)||je.isBuffer(e)||je.isStream(e)||je.isFile(e)||je.isBlob(e)||je.isReadableStream(e))return e;if(je.isArrayBufferView(e))return e.buffer;if(je.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let u;if(c){if(r.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return toFormData$1(e,new He.classes.URLSearchParams,{visitor:function(e,t,r,s){return He.isNode&&je.isBuffer(e)?(this.append(t,e.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)},...t})}(e,this.formSerializer).toString();if((u=je.isFileList(e))||r.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return toFormData$1(u?{"files[]":e}:e,t&&new t,this.formSerializer)}}return c||s?(t.setContentType("application/json",!1),function(e,t,r){if(je.isString(e))try{return(t||JSON.parse)(e),je.trim(e)}catch(s){if("SyntaxError"!==s.name)throw s}return(r||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||Je.transitional,r=t&&t.forcedJSONParsing,s="json"===this.responseType;if(je.isResponse(e)||je.isReadableStream(e))return e;if(e&&je.isString(e)&&(r&&!this.responseType||s)){const r=!(t&&t.silentJSONParsing)&&s;try{return JSON.parse(e,this.parseReviver)}catch(c){if(r){if("SyntaxError"===c.name)throw AxiosError$1.from(c,AxiosError$1.ERR_BAD_RESPONSE,this,null,this.response);throw c}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:He.classes.FormData,Blob:He.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};je.forEach(["delete","get","head","post","put","patch"],e=>{Je.headers[e]={}});const Ve=je.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Ge=Symbol("internals");function normalizeHeader(e){return e&&String(e).trim().toLowerCase()}function normalizeValue(e){return!1===e||null==e?e:je.isArray(e)?e.map(normalizeValue):String(e)}function matchHeaderValue(e,t,r,s,c){return je.isFunction(s)?s.call(this,t,r):(c&&(t=r),je.isString(t)?je.isString(s)?-1!==t.indexOf(s):je.isRegExp(s)?s.test(t):void 0:void 0)}let ze=class{constructor(e){e&&this.set(e)}set(e,t,r){const s=this;function setHeader(e,t,r){const c=normalizeHeader(t);if(!c)throw new Error("header name must be a non-empty string");const u=je.findKey(s,c);(!u||void 0===s[u]||!0===r||void 0===r&&!1!==s[u])&&(s[u||t]=normalizeValue(e))}const setHeaders=(e,t)=>je.forEach(e,(e,r)=>setHeader(e,r,t));if(je.isPlainObject(e)||e instanceof this.constructor)setHeaders(e,t);else if(je.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim()))setHeaders((e=>{const t={};let r,s,c;return e&&e.split("\n").forEach(function(e){c=e.indexOf(":"),r=e.substring(0,c).trim().toLowerCase(),s=e.substring(c+1).trim(),!r||t[r]&&Ve[r]||("set-cookie"===r?t[r]?t[r].push(s):t[r]=[s]:t[r]=t[r]?t[r]+", "+s:s)}),t})(e),t);else if(je.isObject(e)&&je.isIterable(e)){let r,s,c={};for(const t of e){if(!je.isArray(t))throw TypeError("Object iterator must return a key-value pair");c[s=t[0]]=(r=c[s])?je.isArray(r)?[...r,t[1]]:[r,t[1]]:t[1]}setHeaders(c,t)}else null!=e&&setHeader(t,e,r);return this}get(e,t){if(e=normalizeHeader(e)){const r=je.findKey(this,e);if(r){const e=this[r];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;for(;s=r.exec(e);)t[s[1]]=s[2];return t}(e);if(je.isFunction(t))return t.call(this,e,r);if(je.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=normalizeHeader(e)){const r=je.findKey(this,e);return!(!r||void 0===this[r]||t&&!matchHeaderValue(0,this[r],r,t))}return!1}delete(e,t){const r=this;let s=!1;function deleteHeader(e){if(e=normalizeHeader(e)){const c=je.findKey(r,e);!c||t&&!matchHeaderValue(0,r[c],c,t)||(delete r[c],s=!0)}}return je.isArray(e)?e.forEach(deleteHeader):deleteHeader(e),s}clear(e){const t=Object.keys(this);let r=t.length,s=!1;for(;r--;){const c=t[r];e&&!matchHeaderValue(0,this[c],c,e,!0)||(delete this[c],s=!0)}return s}normalize(e){const t=this,r={};return je.forEach(this,(s,c)=>{const u=je.findKey(r,c);if(u)return t[u]=normalizeValue(s),void delete t[c];const l=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,r)=>t.toUpperCase()+r)}(c):String(c).trim();l!==c&&delete t[c],t[l]=normalizeValue(s),r[l]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return je.forEach(this,(r,s)=>{null!=r&&!1!==r&&(t[s]=e&&je.isArray(r)?r.join(", "):r)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join("\n")}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const r=new this(e);return t.forEach(e=>r.set(e)),r}static accessor(e){const t=(this[Ge]=this[Ge]={accessors:{}}).accessors,r=this.prototype;function defineAccessor(e){const s=normalizeHeader(e);t[s]||(!function(e,t){const r=je.toCamelCase(" "+t);["get","set","has"].forEach(s=>{Object.defineProperty(e,s+r,{value:function(e,r,c){return this[s].call(this,t,e,r,c)},configurable:!0})})}(r,e),t[s]=!0)}return je.isArray(e)?e.forEach(defineAccessor):defineAccessor(e),this}};function transformData(e,t){const r=this||Je,s=t||r,c=ze.from(s.headers);let u=s.data;return je.forEach(e,function(e){u=e.call(r,u,c.normalize(),t?t.status:void 0)}),c.normalize(),u}function isCancel$1(e){return!(!e||!e.__CANCEL__)}function CanceledError$1(e,t,r){AxiosError$1.call(this,null==e?"canceled":e,AxiosError$1.ERR_CANCELED,t,r),this.name="CanceledError"}function settle(e,t,r){const s=r.config.validateStatus;r.status&&s&&!s(r.status)?t(new AxiosError$1("Request failed with status code "+r.status,[AxiosError$1.ERR_BAD_REQUEST,AxiosError$1.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r)):e(r)}ze.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),je.reduceDescriptors(ze.prototype,({value:e},t)=>{let r=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(e){this[r]=e}}}),je.freezeMethods(ze),je.inherits(CanceledError$1,AxiosError$1,{__CANCEL__:!0});const progressEventReducer=(e,t,r=3)=>{let s=0;const c=function(e,t){e=e||10;const r=new Array(e),s=new Array(e);let c,u=0,l=0;return t=void 0!==t?t:1e3,function(p){const h=Date.now(),m=s[l];c||(c=h),r[u]=p,s[u]=h;let y=l,g=0;for(;y!==u;)g+=r[y++],y%=e;if(u=(u+1)%e,u===l&&(l=(l+1)%e),h-c<t)return;const v=m&&h-m;return v?Math.round(1e3*g/v):void 0}}(50,250);return function(e,t){let r,s,c=0,u=1e3/t;const invoke=(t,u=Date.now())=>{c=u,r=null,s&&(clearTimeout(s),s=null),e(...t)};return[(...e)=>{const t=Date.now(),l=t-c;l>=u?invoke(e,t):(r=e,s||(s=setTimeout(()=>{s=null,invoke(r)},u-l)))},()=>r&&invoke(r)]}(r=>{const u=r.loaded,l=r.lengthComputable?r.total:void 0,p=u-s,h=c(p);s=u;e({loaded:u,total:l,progress:l?u/l:void 0,bytes:p,rate:h||void 0,estimated:h&&l&&u<=l?(l-u)/h:void 0,event:r,lengthComputable:null!=l,[t?"download":"upload"]:!0})},r)},progressEventDecorator=(e,t)=>{const r=null!=e;return[s=>t[0]({lengthComputable:r,total:e,loaded:s}),t[1]]},asyncDecorator=e=>(...t)=>je.asap(()=>e(...t)),Qe=He.hasStandardBrowserEnv?((e,t)=>r=>(r=new URL(r,He.origin),e.protocol===r.protocol&&e.host===r.host&&(t||e.port===r.port)))(new URL(He.origin),He.navigator&&/(msie|trident)/i.test(He.navigator.userAgent)):()=>!0,Ke=He.hasStandardBrowserEnv?{write(e,t,r,s,c,u){const l=[e+"="+encodeURIComponent(t)];je.isNumber(r)&&l.push("expires="+new Date(r).toGMTString()),je.isString(s)&&l.push("path="+s),je.isString(c)&&l.push("domain="+c),!0===u&&l.push("secure"),document.cookie=l.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function buildFullPath(e,t,r){let s=!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t);return e&&(s||0==r)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const headersToObject=e=>e instanceof ze?{...e}:e;function mergeConfig$1(e,t){t=t||{};const r={};function getMergedValue(e,t,r,s){return je.isPlainObject(e)&&je.isPlainObject(t)?je.merge.call({caseless:s},e,t):je.isPlainObject(t)?je.merge({},t):je.isArray(t)?t.slice():t}function mergeDeepProperties(e,t,r,s){return je.isUndefined(t)?je.isUndefined(e)?void 0:getMergedValue(void 0,e,0,s):getMergedValue(e,t,0,s)}function valueFromConfig2(e,t){if(!je.isUndefined(t))return getMergedValue(void 0,t)}function defaultToConfig2(e,t){return je.isUndefined(t)?je.isUndefined(e)?void 0:getMergedValue(void 0,e):getMergedValue(void 0,t)}function mergeDirectKeys(r,s,c){return c in t?getMergedValue(r,s):c in e?getMergedValue(void 0,r):void 0}const s={url:valueFromConfig2,method:valueFromConfig2,data:valueFromConfig2,baseURL:defaultToConfig2,transformRequest:defaultToConfig2,transformResponse:defaultToConfig2,paramsSerializer:defaultToConfig2,timeout:defaultToConfig2,timeoutMessage:defaultToConfig2,withCredentials:defaultToConfig2,withXSRFToken:defaultToConfig2,adapter:defaultToConfig2,responseType:defaultToConfig2,xsrfCookieName:defaultToConfig2,xsrfHeaderName:defaultToConfig2,onUploadProgress:defaultToConfig2,onDownloadProgress:defaultToConfig2,decompress:defaultToConfig2,maxContentLength:defaultToConfig2,maxBodyLength:defaultToConfig2,beforeRedirect:defaultToConfig2,transport:defaultToConfig2,httpAgent:defaultToConfig2,httpsAgent:defaultToConfig2,cancelToken:defaultToConfig2,socketPath:defaultToConfig2,responseEncoding:defaultToConfig2,validateStatus:mergeDirectKeys,headers:(e,t,r)=>mergeDeepProperties(headersToObject(e),headersToObject(t),0,!0)};return je.forEach(Object.keys({...e,...t}),function(c){const u=s[c]||mergeDeepProperties,l=u(e[c],t[c],c);je.isUndefined(l)&&u!==mergeDirectKeys||(r[c]=l)}),r}const resolveConfig=e=>{const t=mergeConfig$1({},e);let{data:r,withXSRFToken:s,xsrfHeaderName:c,xsrfCookieName:u,headers:l,auth:p}=t;if(t.headers=l=ze.from(l),t.url=buildURL(buildFullPath(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),p&&l.set("Authorization","Basic "+btoa((p.username||"")+":"+(p.password?unescape(encodeURIComponent(p.password)):""))),je.isFormData(r))if(He.hasStandardBrowserEnv||He.hasStandardBrowserWebWorkerEnv)l.setContentType(void 0);else if(je.isFunction(r.getHeaders)){const e=r.getHeaders(),t=["content-type","content-length"];Object.entries(e).forEach(([e,r])=>{t.includes(e.toLowerCase())&&l.set(e,r)})}if(He.hasStandardBrowserEnv&&(s&&je.isFunction(s)&&(s=s(t)),s||!1!==s&&Qe(t.url))){const e=c&&u&&Ke.read(u);e&&l.set(c,e)}return t},Ye="undefined"!=typeof XMLHttpRequest&&function(e){return new Promise(function(t,r){const s=resolveConfig(e);let c=s.data;const u=ze.from(s.headers).normalize();let l,p,h,m,y,{responseType:g,onUploadProgress:v,onDownloadProgress:b}=s;function done(){m&&m(),y&&y(),s.cancelToken&&s.cancelToken.unsubscribe(l),s.signal&&s.signal.removeEventListener("abort",l)}let w=new XMLHttpRequest;function onloadend(){if(!w)return;const s=ze.from("getAllResponseHeaders"in w&&w.getAllResponseHeaders());settle(function(e){t(e),done()},function(e){r(e),done()},{data:g&&"text"!==g&&"json"!==g?w.response:w.responseText,status:w.status,statusText:w.statusText,headers:s,config:e,request:w}),w=null}w.open(s.method.toUpperCase(),s.url,!0),w.timeout=s.timeout,"onloadend"in w?w.onloadend=onloadend:w.onreadystatechange=function(){w&&4===w.readyState&&(0!==w.status||w.responseURL&&0===w.responseURL.indexOf("file:"))&&setTimeout(onloadend)},w.onabort=function(){w&&(r(new AxiosError$1("Request aborted",AxiosError$1.ECONNABORTED,e,w)),w=null)},w.onerror=function(t){const s=new AxiosError$1(t&&t.message?t.message:"Network Error",AxiosError$1.ERR_NETWORK,e,w);s.event=t||null,r(s),w=null},w.ontimeout=function(){let t=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const c=s.transitional||De;s.timeoutErrorMessage&&(t=s.timeoutErrorMessage),r(new AxiosError$1(t,c.clarifyTimeoutError?AxiosError$1.ETIMEDOUT:AxiosError$1.ECONNABORTED,e,w)),w=null},void 0===c&&u.setContentType(null),"setRequestHeader"in w&&je.forEach(u.toJSON(),function(e,t){w.setRequestHeader(t,e)}),je.isUndefined(s.withCredentials)||(w.withCredentials=!!s.withCredentials),g&&"json"!==g&&(w.responseType=s.responseType),b&&([h,y]=progressEventReducer(b,!0),w.addEventListener("progress",h)),v&&w.upload&&([p,m]=progressEventReducer(v),w.upload.addEventListener("progress",p),w.upload.addEventListener("loadend",m)),(s.cancelToken||s.signal)&&(l=t=>{w&&(r(!t||t.type?new CanceledError$1(null,e,w):t),w.abort(),w=null)},s.cancelToken&&s.cancelToken.subscribe(l),s.signal&&(s.signal.aborted?l():s.signal.addEventListener("abort",l)));const E=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(s.url);E&&-1===He.protocols.indexOf(E)?r(new AxiosError$1("Unsupported protocol "+E+":",AxiosError$1.ERR_BAD_REQUEST,e)):w.send(c||null)})},composeSignals=(e,t)=>{const{length:r}=e=e?e.filter(Boolean):[];if(t||r){let r,s=new AbortController;const onabort=function(e){if(!r){r=!0,unsubscribe();const t=e instanceof Error?e:this.reason;s.abort(t instanceof AxiosError$1?t:new CanceledError$1(t instanceof Error?t.message:t))}};let c=t&&setTimeout(()=>{c=null,onabort(new AxiosError$1(`timeout ${t} of ms exceeded`,AxiosError$1.ETIMEDOUT))},t);const unsubscribe=()=>{e&&(c&&clearTimeout(c),c=null,e.forEach(e=>{e.unsubscribe?e.unsubscribe(onabort):e.removeEventListener("abort",onabort)}),e=null)};e.forEach(e=>e.addEventListener("abort",onabort));const{signal:u}=s;return u.unsubscribe=()=>je.asap(unsubscribe),u}},streamChunk=function*(e,t){let r=e.byteLength;if(r<t)return void(yield e);let s,c=0;for(;c<r;)s=c+t,yield e.slice(c,s),c=s},readStream=async function*(e){if(e[Symbol.asyncIterator])return void(yield*e);const t=e.getReader();try{for(;;){const{done:e,value:r}=await t.read();if(e)break;yield r}}finally{await t.cancel()}},trackStream=(e,t,r,s)=>{const c=async function*(e,t){for await(const r of readStream(e))yield*streamChunk(r,t)}(e,t);let u,l=0,_onFinish=e=>{u||(u=!0,s&&s(e))};return new ReadableStream({async pull(e){try{const{done:t,value:s}=await c.next();if(t)return _onFinish(),void e.close();let u=s.byteLength;if(r){let e=l+=u;r(e)}e.enqueue(new Uint8Array(s))}catch(t){throw _onFinish(t),t}},cancel:e=>(_onFinish(e),c.return())},{highWaterMark:2})},{isFunction:Xe}=je,Ze=(({Request:e,Response:t})=>({Request:e,Response:t}))(je.global),{ReadableStream:et,TextEncoder:tt}=je.global,test=(e,...t)=>{try{return!!e(...t)}catch(r){return!1}},factory=e=>{e=je.merge.call({skipUndefined:!0},Ze,e);const{fetch:t,Request:r,Response:s}=e,c=t?Xe(t):"function"==typeof fetch,u=Xe(r),l=Xe(s);if(!c)return!1;const p=c&&Xe(et),h=c&&("function"==typeof tt?(e=>t=>e.encode(t))(new tt):async e=>new Uint8Array(await new r(e).arrayBuffer())),m=u&&p&&test(()=>{let e=!1;const t=new r(He.origin,{body:new et,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),y=l&&p&&test(()=>je.isReadableStream(new s("").body)),g={stream:y&&(e=>e.body)};c&&["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!g[e]&&(g[e]=(t,r)=>{let s=t&&t[e];if(s)return s.call(t);throw new AxiosError$1(`Response type '${e}' is not supported`,AxiosError$1.ERR_NOT_SUPPORT,r)})});const resolveBodyLength=async(e,t)=>{const s=je.toFiniteNumber(e.getContentLength());return null==s?(async e=>{if(null==e)return 0;if(je.isBlob(e))return e.size;if(je.isSpecCompliantForm(e)){const t=new r(He.origin,{method:"POST",body:e});return(await t.arrayBuffer()).byteLength}return je.isArrayBufferView(e)||je.isArrayBuffer(e)?e.byteLength:(je.isURLSearchParams(e)&&(e+=""),je.isString(e)?(await h(e)).byteLength:void 0)})(t):s};return async e=>{let{url:c,method:l,data:p,signal:h,cancelToken:v,timeout:b,onDownloadProgress:w,onUploadProgress:E,responseType:_,headers:O,withCredentials:S="same-origin",fetchOptions:T}=resolveConfig(e),x=t||fetch;_=_?(_+"").toLowerCase():"text";let A=composeSignals([h,v&&v.toAbortSignal()],b),R=null;const C=A&&A.unsubscribe&&(()=>{A.unsubscribe()});let P;try{if(E&&m&&"get"!==l&&"head"!==l&&0!==(P=await resolveBodyLength(O,p))){let e,t=new r(c,{method:"POST",body:p,duplex:"half"});if(je.isFormData(p)&&(e=t.headers.get("content-type"))&&O.setContentType(e),t.body){const[e,r]=progressEventDecorator(P,progressEventReducer(asyncDecorator(E)));p=trackStream(t.body,65536,e,r)}}je.isString(S)||(S=S?"include":"omit");const t=u&&"credentials"in r.prototype,h={...T,signal:A,method:l.toUpperCase(),headers:O.normalize().toJSON(),body:p,duplex:"half",credentials:t?S:void 0};R=u&&new r(c,h);let v=await(u?x(R,T):x(c,h));const b=y&&("stream"===_||"response"===_);if(y&&(w||b&&C)){const e={};["status","statusText","headers"].forEach(t=>{e[t]=v[t]});const t=je.toFiniteNumber(v.headers.get("content-length")),[r,c]=w&&progressEventDecorator(t,progressEventReducer(asyncDecorator(w),!0))||[];v=new s(trackStream(v.body,65536,r,()=>{c&&c(),C&&C()}),e)}_=_||"text";let k=await g[je.findKey(g,_)||"text"](v,e);return!b&&C&&C(),await new Promise((t,r)=>{settle(t,r,{data:k,headers:ze.from(v.headers),status:v.status,statusText:v.statusText,config:e,request:R})})}catch(k){if(C&&C(),k&&"TypeError"===k.name&&/Load failed|fetch/i.test(k.message))throw Object.assign(new AxiosError$1("Network Error",AxiosError$1.ERR_NETWORK,e,R),{cause:k.cause||k});throw AxiosError$1.from(k,k&&k.code,e,R)}}},rt=new Map,getFetch=e=>{let t=e?e.env:{};const{fetch:r,Request:s,Response:c}=t,u=[s,c,r];let l,p,h=u.length,m=rt;for(;h--;)l=u[h],p=m.get(l),void 0===p&&m.set(l,p=h?new Map:factory(t)),m=p;return p};getFetch();const nt={http:null,xhr:Ye,fetch:{get:getFetch}};je.forEach(nt,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(r){}Object.defineProperty(e,"adapterName",{value:t})}});const renderReason=e=>`- ${e}`,isResolvedHandle=e=>je.isFunction(e)||null===e||!1===e,adapters_getAdapter=(e,t)=>{e=je.isArray(e)?e:[e];const{length:r}=e;let s,c;const u={};for(let l=0;l<r;l++){let r;if(s=e[l],c=s,!isResolvedHandle(s)&&(c=nt[(r=String(s)).toLowerCase()],void 0===c))throw new AxiosError$1(`Unknown adapter '${r}'`);if(c&&(je.isFunction(c)||(c=c.get(t))))break;u[r||"#"+l]=c}if(!c){const e=Object.entries(u).map(([e,t])=>`adapter ${e} `+(!1===t?"is not supported by the environment":"is not available in the build"));throw new AxiosError$1("There is no suitable adapter to dispatch the request "+(r?e.length>1?"since :\n"+e.map(renderReason).join("\n"):" "+renderReason(e[0]):"as no adapter specified"),"ERR_NOT_SUPPORT")}return c};function throwIfCancellationRequested(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new CanceledError$1(null,e)}function dispatchRequest(e){throwIfCancellationRequested(e),e.headers=ze.from(e.headers),e.data=transformData.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);return adapters_getAdapter(e.adapter||Je.adapter,e)(e).then(function(t){return throwIfCancellationRequested(e),t.data=transformData.call(e,e.transformResponse,t),t.headers=ze.from(t.headers),t},function(t){return isCancel$1(t)||(throwIfCancellationRequested(e),t&&t.response&&(t.response.data=transformData.call(e,e.transformResponse,t.response),t.response.headers=ze.from(t.response.headers))),Promise.reject(t)})}const ot="1.12.2",it={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{it[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}});const st={};it.transitional=function(e,t,r){return(s,c,u)=>{if(!1===e)throw new AxiosError$1(function(e,t){return"[Axios v"+ot+"] Transitional option '"+e+"'"+t+(r?". "+r:"")}(c," has been removed"+(t?" in "+t:"")),AxiosError$1.ERR_DEPRECATED);return t&&!st[c]&&(st[c]=!0),!e||e(s,c,u)}},it.spelling=function(e){return(e,t)=>!0};const at={assertOptions:function(e,t,r){if("object"!=typeof e)throw new AxiosError$1("options must be an object",AxiosError$1.ERR_BAD_OPTION_VALUE);const s=Object.keys(e);let c=s.length;for(;c-- >0;){const u=s[c],l=t[u];if(l){const t=e[u],r=void 0===t||l(t,u,e);if(!0!==r)throw new AxiosError$1("option "+u+" must be "+r,AxiosError$1.ERR_BAD_OPTION_VALUE);continue}if(!0!==r)throw new AxiosError$1("Unknown option "+u,AxiosError$1.ERR_BAD_OPTION)}},validators:it},ct=at.validators;let ut=class{constructor(e){this.defaults=e||{},this.interceptors={request:new InterceptorManager,response:new InterceptorManager}}async request(e,t){try{return await this._request(e,t)}catch(r){if(r instanceof Error){let e={};Error.captureStackTrace?Error.captureStackTrace(e):e=new Error;const t=e.stack?e.stack.replace(/^.+\n/,""):"";try{r.stack?t&&!String(r.stack).endsWith(t.replace(/^.+\n.+\n/,""))&&(r.stack+="\n"+t):r.stack=t}catch(s){}}throw r}}_request(e,t){"string"==typeof e?(t=t||{}).url=e:t=e||{},t=mergeConfig$1(this.defaults,t);const{transitional:r,paramsSerializer:s,headers:c}=t;void 0!==r&&at.assertOptions(r,{silentJSONParsing:ct.transitional(ct.boolean),forcedJSONParsing:ct.transitional(ct.boolean),clarifyTimeoutError:ct.transitional(ct.boolean)},!1),null!=s&&(je.isFunction(s)?t.paramsSerializer={serialize:s}:at.assertOptions(s,{encode:ct.function,serialize:ct.function},!0)),void 0!==t.allowAbsoluteUrls||(void 0!==this.defaults.allowAbsoluteUrls?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),at.assertOptions(t,{baseUrl:ct.spelling("baseURL"),withXsrfToken:ct.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let u=c&&je.merge(c.common,c[t.method]);c&&je.forEach(["delete","get","head","post","put","patch","common"],e=>{delete c[e]}),t.headers=ze.concat(u,c);const l=[];let p=!0;this.interceptors.request.forEach(function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(p=p&&e.synchronous,l.unshift(e.fulfilled,e.rejected))});const h=[];let m;this.interceptors.response.forEach(function(e){h.push(e.fulfilled,e.rejected)});let y,g=0;if(!p){const e=[dispatchRequest.bind(this),void 0];for(e.unshift(...l),e.push(...h),y=e.length,m=Promise.resolve(t);g<y;)m=m.then(e[g++],e[g++]);return m}y=l.length;let v=t;for(;g<y;){const e=l[g++],t=l[g++];try{v=e(v)}catch(b){t.call(this,b);break}}try{m=dispatchRequest.call(this,v)}catch(b){return Promise.reject(b)}for(g=0,y=h.length;g<y;)m=m.then(h[g++],h[g++]);return m}getUri(e){return buildURL(buildFullPath((e=mergeConfig$1(this.defaults,e)).baseURL,e.url,e.allowAbsoluteUrls),e.params,e.paramsSerializer)}};je.forEach(["delete","get","head","options"],function(e){ut.prototype[e]=function(t,r){return this.request(mergeConfig$1(r||{},{method:e,url:t,data:(r||{}).data}))}}),je.forEach(["post","put","patch"],function(e){function generateHTTPMethod(t){return function(r,s,c){return this.request(mergeConfig$1(c||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:r,data:s}))}}ut.prototype[e]=generateHTTPMethod(),ut.prototype[e+"Form"]=generateHTTPMethod(!0)});const lt={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(lt).forEach(([e,t])=>{lt[t]=e});const pt=function createInstance(e){const t=new ut(e),r=bind(ut.prototype.request,t);return je.extend(r,ut.prototype,t,{allOwnKeys:!0}),je.extend(r,t,null,{allOwnKeys:!0}),r.create=function(t){return createInstance(mergeConfig$1(e,t))},r}(Je);pt.Axios=ut,pt.CanceledError=CanceledError$1,pt.CancelToken=class CancelToken{constructor(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(e){t=e});const r=this;this.promise.then(e=>{if(!r._listeners)return;let t=r._listeners.length;for(;t-- >0;)r._listeners[t](e);r._listeners=null}),this.promise.then=e=>{let t;const s=new Promise(e=>{r.subscribe(e),t=e}).then(e);return s.cancel=function(){r.unsubscribe(t)},s},e(function(e,s,c){r.reason||(r.reason=new CanceledError$1(e,s,c),t(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,abort=t=>{e.abort(t)};return this.subscribe(abort),e.signal.unsubscribe=()=>this.unsubscribe(abort),e.signal}static source(){let e;return{token:new CancelToken(function(t){e=t}),cancel:e}}},pt.isCancel=isCancel$1,pt.VERSION=ot,pt.toFormData=toFormData$1,pt.AxiosError=AxiosError$1,pt.Cancel=pt.CanceledError,pt.all=function(e){return Promise.all(e)},pt.spread=function(e){return function(t){return e.apply(null,t)}},pt.isAxiosError=function(e){return je.isObject(e)&&!0===e.isAxiosError},pt.mergeConfig=mergeConfig$1,pt.AxiosHeaders=ze,pt.formToJSON=e=>formDataToJSON(je.isHTMLForm(e)?new FormData(e):e),pt.getAdapter=adapters_getAdapter,pt.HttpStatusCode=lt,pt.default=pt;const{Axios:ft,AxiosError:dt,CanceledError:ht,isCancel:mt,CancelToken:yt,VERSION:gt,all:vt,Cancel:bt,isAxiosError:wt,spread:Et,toFormData:_t,AxiosHeaders:Ot,HttpStatusCode:St,formToJSON:Tt,getAdapter:xt,mergeConfig:At}=pt,Rt={},__vitePreload=function(e,t,r){let s=Promise.resolve();if(t&&t.length>0){let allSettled2=function(e){return Promise.all(e.map(e=>Promise.resolve(e).then(e=>({status:"fulfilled",value:e}),e=>({status:"rejected",reason:e}))))};document.getElementsByTagName("link");const e=document.querySelector("meta[property=csp-nonce]"),r=(null==e?void 0:e.nonce)||(null==e?void 0:e.getAttribute("nonce"));s=allSettled2(t.map(e=>{if((e=function(e){return"/BMT-MicroApps/"+e}(e))in Rt)return;Rt[e]=!0;const t=e.endsWith(".css"),s=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${s}`))return;const c=document.createElement("link");return c.rel=t?"stylesheet":"modulepreload",t||(c.as="script"),c.crossOrigin="",c.href=e,r&&c.setAttribute("nonce",r),document.head.appendChild(c),t?new Promise((t,r)=>{c.addEventListener("load",t),c.addEventListener("error",()=>r(new Error(`Unable to preload CSS for ${e}`)))}):void 0}))}function handlePreloadError(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return s.then(t=>{for(const e of t||[])"rejected"===e.status&&handlePreloadError(e.reason);return e().catch(handlePreloadError)})},Ct="undefined"!=typeof document;function isRouteComponent(e){return"object"==typeof e||"displayName"in e||"props"in e||"__vccOpts"in e}const Pt=Object.assign;function applyToParams(e,t){const r={};for(const s in t){const c=t[s];r[s]=kt(c)?c.map(e):e(c)}return r}const noop=()=>{},kt=Array.isArray,jt=/#/g,Lt=/&/g,It=/\//g,Ut=/=/g,Nt=/\?/g,Dt=/\+/g,Wt=/%5B/g,Mt=/%5D/g,Bt=/%5E/g,$t=/%60/g,Ft=/%7B/g,qt=/%7C/g,Ht=/%7D/g,Jt=/%20/g;function commonEncode(e){return encodeURI(""+e).replace(qt,"|").replace(Wt,"[").replace(Mt,"]")}function encodeQueryValue(e){return commonEncode(e).replace(Dt,"%2B").replace(Jt,"+").replace(jt,"%23").replace(Lt,"%26").replace($t,"`").replace(Ft,"{").replace(Ht,"}").replace(Bt,"^")}function encodeQueryKey(e){return encodeQueryValue(e).replace(Ut,"%3D")}function encodeParam(e){return null==e?"":function(e){return commonEncode(e).replace(jt,"%23").replace(Nt,"%3F")}(e).replace(It,"%2F")}function decode$2(e){try{return decodeURIComponent(""+e)}catch(t){}return""+e}const Vt=/\/$/;function parseURL(e,t,r="/"){let s,c={},u="",l="";const p=t.indexOf("#");let h=t.indexOf("?");return p<h&&p>=0&&(h=-1),h>-1&&(s=t.slice(0,h),u=t.slice(h+1,p>-1?p:t.length),c=e(u)),p>-1&&(s=s||t.slice(0,p),l=t.slice(p,t.length)),s=function(e,t){if(e.startsWith("/"))return e;if(!e)return t;const r=t.split("/"),s=e.split("/"),c=s[s.length-1];".."!==c&&"."!==c||s.push("");let u,l,p=r.length-1;for(u=0;u<s.length;u++)if(l=s[u],"."!==l){if(".."!==l)break;p>1&&p--}return r.slice(0,p).join("/")+"/"+s.slice(u).join("/")}(null!=s?s:t,r),{fullPath:s+(u&&"?")+u+l,path:s,query:c,hash:decode$2(l)}}function stripBase(e,t){return t&&e.toLowerCase().startsWith(t.toLowerCase())?e.slice(t.length)||"/":e}function isSameRouteRecord(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function isSameRouteLocationParams(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(!isSameRouteLocationParamsValue(e[r],t[r]))return!1;return!0}function isSameRouteLocationParamsValue(e,t){return kt(e)?isEquivalentArray(e,t):kt(t)?isEquivalentArray(t,e):e===t}function isEquivalentArray(e,t){return kt(t)?e.length===t.length&&e.every((e,r)=>e===t[r]):1===e.length&&e[0]===t}const Gt={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var zt,Qt,Kt,Yt;function normalizeBase(e){if(!e)if(Ct){const t=document.querySelector("base");e=(e=t&&t.getAttribute("href")||"/").replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return"/"!==e[0]&&"#"!==e[0]&&(e="/"+e),e.replace(Vt,"")}(Qt=zt||(zt={})).pop="pop",Qt.push="push",(Yt=Kt||(Kt={})).back="back",Yt.forward="forward",Yt.unknown="";const Xt=/^[^#]+#/;function createHref(e,t){return e.replace(Xt,"#")+t}const computeScrollPosition=()=>({left:window.scrollX,top:window.scrollY});function scrollToPosition(e){let t;if("el"in e){const r=e.el,s="string"==typeof r&&r.startsWith("#"),c="string"==typeof r?s?document.getElementById(r.slice(1)):document.querySelector(r):r;if(!c)return;t=function(e,t){const r=document.documentElement.getBoundingClientRect(),s=e.getBoundingClientRect();return{behavior:t.behavior,left:s.left-r.left-(t.left||0),top:s.top-r.top-(t.top||0)}}(c,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(null!=t.left?t.left:window.scrollX,null!=t.top?t.top:window.scrollY)}function getScrollKey(e,t){return(history.state?history.state.position-t:-1)+e}const Zt=new Map;function createCurrentLocation(e,t){const{pathname:r,search:s,hash:c}=t,u=e.indexOf("#");if(u>-1){let t=c.includes(e.slice(u))?e.slice(u).length:1,r=c.slice(t);return"/"!==r[0]&&(r="/"+r),stripBase(r,"")}return stripBase(r,e)+s+c}function buildState(e,t,r,s=!1,c=!1){return{back:e,current:t,forward:r,replaced:s,position:window.history.length,scroll:c?computeScrollPosition():null}}function useHistoryStateNavigation(e){const{history:t,location:r}=window,s={value:createCurrentLocation(e,r)},c={value:t.state};function changeLocation(s,u,l){const p=e.indexOf("#"),h=p>-1?(r.host&&document.querySelector("base")?e:e.slice(p))+s:location.protocol+"//"+location.host+e+s;try{t[l?"replaceState":"pushState"](u,"",h),c.value=u}catch(m){r[l?"replace":"assign"](h)}}return c.value||changeLocation(s.value,{back:null,current:s.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0),{location:s,state:c,push:function(e,r){const u=Pt({},c.value,t.state,{forward:e,scroll:computeScrollPosition()});changeLocation(u.current,u,!0),changeLocation(e,Pt({},buildState(s.value,e,null),{position:u.position+1},r),!1),s.value=e},replace:function(e,r){changeLocation(e,Pt({},t.state,buildState(c.value.back,e,c.value.forward,!0),r,{position:c.value.position}),!0),s.value=e}}}function createWebHistory(e){const t=useHistoryStateNavigation(e=normalizeBase(e)),r=function(e,t,r,s){let c=[],u=[],l=null;const popStateHandler=({state:u})=>{const p=createCurrentLocation(e,location),h=r.value,m=t.value;let y=0;if(u){if(r.value=p,t.value=u,l&&l===h)return void(l=null);y=m?u.position-m.position:0}else s(p);c.forEach(e=>{e(r.value,h,{delta:y,type:zt.pop,direction:y?y>0?Kt.forward:Kt.back:Kt.unknown})})};function beforeUnloadListener(){const{history:e}=window;e.state&&e.replaceState(Pt({},e.state,{scroll:computeScrollPosition()}),"")}return window.addEventListener("popstate",popStateHandler),window.addEventListener("beforeunload",beforeUnloadListener,{passive:!0}),{pauseListeners:function(){l=r.value},listen:function(e){c.push(e);const teardown=()=>{const t=c.indexOf(e);t>-1&&c.splice(t,1)};return u.push(teardown),teardown},destroy:function(){for(const e of u)e();u=[],window.removeEventListener("popstate",popStateHandler),window.removeEventListener("beforeunload",beforeUnloadListener)}}}(e,t.state,t.location,t.replace);const s=Pt({location:"",base:e,go:function(e,t=!0){t||r.pauseListeners(),history.go(e)},createHref:createHref.bind(null,e)},t,r);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>t.state.value}),s}function isRouteName(e){return"string"==typeof e||"symbol"==typeof e}const er=Symbol("");var tr,rr;function createRouterError(e,t){return Pt(new Error,{type:e,[er]:!0},t)}function isNavigationFailure(e,t){return e instanceof Error&&er in e&&(null==t||!!(e.type&t))}(rr=tr||(tr={}))[rr.aborted=4]="aborted",rr[rr.cancelled=8]="cancelled",rr[rr.duplicated=16]="duplicated";const nr="[^/]+?",or={sensitive:!1,strict:!1,start:!0,end:!0},ir=/[.+*?^${}()[\]/\\]/g;function compareScoreArray(e,t){let r=0;for(;r<e.length&&r<t.length;){const s=t[r]-e[r];if(s)return s;r++}return e.length<t.length?1===e.length&&80===e[0]?-1:1:e.length>t.length?1===t.length&&80===t[0]?1:-1:0}function comparePathParserScore(e,t){let r=0;const s=e.score,c=t.score;for(;r<s.length&&r<c.length;){const e=compareScoreArray(s[r],c[r]);if(e)return e;r++}if(1===Math.abs(c.length-s.length)){if(isLastScoreNegative(s))return 1;if(isLastScoreNegative(c))return-1}return c.length-s.length}function isLastScoreNegative(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const sr={type:0,value:""},ar=/[a-zA-Z0-9_]/;function createRouteRecordMatcher(e,t,r){const s=function(e,t){const r=Pt({},or,t),s=[];let c=r.start?"^":"";const u=[];for(const h of e){const e=h.length?[]:[90];r.strict&&!h.length&&(c+="/");for(let t=0;t<h.length;t++){const s=h[t];let l=40+(r.sensitive?.25:0);if(0===s.type)t||(c+="/"),c+=s.value.replace(ir,"\\$&"),l+=40;else if(1===s.type){const{value:e,repeatable:r,optional:m,regexp:y}=s;u.push({name:e,repeatable:r,optional:m});const g=y||nr;if(g!==nr){l+=10;try{new RegExp(`(${g})`)}catch(p){throw new Error(`Invalid custom RegExp for param "${e}" (${g}): `+p.message)}}let v=r?`((?:${g})(?:/(?:${g}))*)`:`(${g})`;t||(v=m&&h.length<2?`(?:/${v})`:"/"+v),m&&(v+="?"),c+=v,l+=20,m&&(l+=-8),r&&(l+=-20),".*"===g&&(l+=-50)}e.push(l)}s.push(e)}if(r.strict&&r.end){const e=s.length-1;s[e][s[e].length-1]+=.7000000000000001}r.strict||(c+="/?"),r.end?c+="$":r.strict&&!c.endsWith("/")&&(c+="(?:/|$)");const l=new RegExp(c,r.sensitive?"":"i");return{re:l,score:s,keys:u,parse:function(e){const t=e.match(l),r={};if(!t)return null;for(let s=1;s<t.length;s++){const e=t[s]||"",c=u[s-1];r[c.name]=e&&c.repeatable?e.split("/"):e}return r},stringify:function(t){let r="",s=!1;for(const c of e){s&&r.endsWith("/")||(r+="/"),s=!1;for(const e of c)if(0===e.type)r+=e.value;else if(1===e.type){const{value:u,repeatable:l,optional:p}=e,h=u in t?t[u]:"";if(kt(h)&&!l)throw new Error(`Provided param "${u}" is an array but it is not repeatable (* or + modifiers)`);const m=kt(h)?h.join("/"):h;if(!m){if(!p)throw new Error(`Missing required param "${u}"`);c.length<2&&(r.endsWith("/")?r=r.slice(0,-1):s=!0)}r+=m}}return r||"/"}}}(function(e){if(!e)return[[]];if("/"===e)return[[sr]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function crash(e){throw new Error(`ERR (${t})/"${p}": ${e}`)}let t=0,r=t;const s=[];let c;function finalizeSegment(){c&&s.push(c),c=[]}let u,l=0,p="",h="";function consumeBuffer(){p&&(0===t?c.push({type:0,value:p}):1===t||2===t||3===t?(c.length>1&&("*"===u||"+"===u)&&crash(`A repeatable param (${p}) must be alone in its segment. eg: '/:ids+.`),c.push({type:1,value:p,regexp:h,repeatable:"*"===u||"+"===u,optional:"*"===u||"?"===u})):crash("Invalid state to consume buffer"),p="")}function addCharToBuffer(){p+=u}for(;l<e.length;)if(u=e[l++],"\\"!==u||2===t)switch(t){case 0:"/"===u?(p&&consumeBuffer(),finalizeSegment()):":"===u?(consumeBuffer(),t=1):addCharToBuffer();break;case 4:addCharToBuffer(),t=r;break;case 1:"("===u?t=2:ar.test(u)?addCharToBuffer():(consumeBuffer(),t=0,"*"!==u&&"?"!==u&&"+"!==u&&l--);break;case 2:")"===u?"\\"==h[h.length-1]?h=h.slice(0,-1)+u:t=3:h+=u;break;case 3:consumeBuffer(),t=0,"*"!==u&&"?"!==u&&"+"!==u&&l--,h="";break;default:crash("Unknown state")}else r=t,t=4;return 2===t&&crash(`Unfinished custom RegExp for param "${p}"`),consumeBuffer(),finalizeSegment(),s}(e.path),r),c=Pt(s,{record:e,parent:t,children:[],alias:[]});return t&&!c.record.aliasOf==!t.record.aliasOf&&t.children.push(c),c}function createRouterMatcher(e,t){const r=[],s=new Map;function addRoute(e,r,s){const c=!s,u=normalizeRouteRecord(e);u.aliasOf=s&&s.record;const l=mergeOptions$1(t,e),p=[u];if("alias"in e){const t="string"==typeof e.alias?[e.alias]:e.alias;for(const e of t)p.push(normalizeRouteRecord(Pt({},u,{components:s?s.record.components:u.components,path:e,aliasOf:s?s.record:u})))}let h,m;for(const t of p){const{path:p}=t;if(r&&"/"!==p[0]){const e=r.record.path,s="/"===e[e.length-1]?"":"/";t.path=r.record.path+(p&&s+p)}if(h=createRouteRecordMatcher(t,r,l),s?s.alias.push(h):(m=m||h,m!==h&&m.alias.push(h),c&&e.name&&!isAliasRecord(h)&&removeRoute(e.name)),isMatchable(h)&&insertMatcher(h),u.children){const e=u.children;for(let t=0;t<e.length;t++)addRoute(e[t],h,s&&s.children[t])}s=s||h}return m?()=>{removeRoute(m)}:noop}function removeRoute(e){if(isRouteName(e)){const t=s.get(e);t&&(s.delete(e),r.splice(r.indexOf(t),1),t.children.forEach(removeRoute),t.alias.forEach(removeRoute))}else{const t=r.indexOf(e);t>-1&&(r.splice(t,1),e.record.name&&s.delete(e.record.name),e.children.forEach(removeRoute),e.alias.forEach(removeRoute))}}function insertMatcher(e){const t=function(e,t){let r=0,s=t.length;for(;r!==s;){const c=r+s>>1;comparePathParserScore(e,t[c])<0?s=c:r=c+1}const c=function(e){let t=e;for(;t=t.parent;)if(isMatchable(t)&&0===comparePathParserScore(e,t))return t;return}(e);c&&(s=t.lastIndexOf(c,s-1));return s}(e,r);r.splice(t,0,e),e.record.name&&!isAliasRecord(e)&&s.set(e.record.name,e)}return t=mergeOptions$1({strict:!1,end:!0,sensitive:!1},t),e.forEach(e=>addRoute(e)),{addRoute:addRoute,resolve:function(e,t){let c,u,l,p={};if("name"in e&&e.name){if(c=s.get(e.name),!c)throw createRouterError(1,{location:e});l=c.record.name,p=Pt(paramsFromLocation(t.params,c.keys.filter(e=>!e.optional).concat(c.parent?c.parent.keys.filter(e=>e.optional):[]).map(e=>e.name)),e.params&&paramsFromLocation(e.params,c.keys.map(e=>e.name))),u=c.stringify(p)}else if(null!=e.path)u=e.path,c=r.find(e=>e.re.test(u)),c&&(p=c.parse(u),l=c.record.name);else{if(c=t.name?s.get(t.name):r.find(e=>e.re.test(t.path)),!c)throw createRouterError(1,{location:e,currentLocation:t});l=c.record.name,p=Pt({},t.params,e.params),u=c.stringify(p)}const h=[];let m=c;for(;m;)h.unshift(m.record),m=m.parent;return{name:l,path:u,params:p,matched:h,meta:mergeMetaFields(h)}},removeRoute:removeRoute,clearRoutes:function(){r.length=0,s.clear()},getRoutes:function(){return r},getRecordMatcher:function(e){return s.get(e)}}}function paramsFromLocation(e,t){const r={};for(const s of t)s in e&&(r[s]=e[s]);return r}function normalizeRouteRecord(e){const t={path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:e.aliasOf,beforeEnter:e.beforeEnter,props:normalizeRecordProps(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}};return Object.defineProperty(t,"mods",{value:{}}),t}function normalizeRecordProps(e){const t={},r=e.props||!1;if("component"in e)t.default=r;else for(const s in e.components)t[s]="object"==typeof r?r[s]:r;return t}function isAliasRecord(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function mergeMetaFields(e){return e.reduce((e,t)=>Pt(e,t.meta),{})}function mergeOptions$1(e,t){const r={};for(const s in e)r[s]=s in t?t[s]:e[s];return r}function isMatchable({record:e}){return!!(e.name||e.components&&Object.keys(e.components).length||e.redirect)}function parseQuery(e){const t={};if(""===e||"?"===e)return t;const r=("?"===e[0]?e.slice(1):e).split("&");for(let s=0;s<r.length;++s){const e=r[s].replace(Dt," "),c=e.indexOf("="),u=decode$2(c<0?e:e.slice(0,c)),l=c<0?null:decode$2(e.slice(c+1));if(u in t){let e=t[u];kt(e)||(e=t[u]=[e]),e.push(l)}else t[u]=l}return t}function stringifyQuery(e){let t="";for(let r in e){const s=e[r];if(r=encodeQueryKey(r),null==s){void 0!==s&&(t+=(t.length?"&":"")+r);continue}(kt(s)?s.map(e=>e&&encodeQueryValue(e)):[s&&encodeQueryValue(s)]).forEach(e=>{void 0!==e&&(t+=(t.length?"&":"")+r,null!=e&&(t+="="+e))})}return t}function normalizeQuery(e){const t={};for(const r in e){const s=e[r];void 0!==s&&(t[r]=kt(s)?s.map(e=>null==e?null:""+e):null==s?s:""+s)}return t}const cr=Symbol(""),ur=Symbol(""),lr=Symbol(""),pr=Symbol(""),fr=Symbol("");function useCallbacks(){let e=[];return{add:function(t){return e.push(t),()=>{const r=e.indexOf(t);r>-1&&e.splice(r,1)}},list:()=>e.slice(),reset:function(){e=[]}}}function guardToPromiseFn(e,t,r,s,c,u=e=>e()){const l=s&&(s.enterCallbacks[c]=s.enterCallbacks[c]||[]);return()=>new Promise((p,h)=>{const next=e=>{var u;!1===e?h(createRouterError(4,{from:r,to:t})):e instanceof Error?h(e):"string"==typeof(u=e)||u&&"object"==typeof u?h(createRouterError(2,{from:t,to:e})):(l&&s.enterCallbacks[c]===l&&"function"==typeof e&&l.push(e),p())},m=u(()=>e.call(s&&s.instances[c],t,r,next));let y=Promise.resolve(m);e.length<3&&(y=y.then(next)),y.catch(e=>h(e))})}function extractComponentsGuards(e,t,r,s,c=e=>e()){const u=[];for(const l of e)for(const e in l.components){let p=l.components[e];if("beforeRouteEnter"===t||l.instances[e])if(isRouteComponent(p)){const h=(p.__vccOpts||p)[t];h&&u.push(guardToPromiseFn(h,r,s,l,e,c))}else{let h=p();u.push(()=>h.then(u=>{if(!u)throw new Error(`Couldn't resolve component "${e}" at "${l.path}"`);const p=(h=u).__esModule||"Module"===h[Symbol.toStringTag]||h.default&&isRouteComponent(h.default)?u.default:u;var h;l.mods[e]=u,l.components[e]=p;const m=(p.__vccOpts||p)[t];return m&&guardToPromiseFn(m,r,s,l,e,c)()}))}}return u}function useLink(e){const t=S(lr),r=S(pr),s=O(()=>{const r=R(e.to);return t.resolve(r)}),c=O(()=>{const{matched:e}=s.value,{length:t}=e,c=e[t-1],u=r.matched;if(!c||!u.length)return-1;const l=u.findIndex(isSameRouteRecord.bind(null,c));if(l>-1)return l;const p=getOriginalPath(e[t-2]);return t>1&&getOriginalPath(c)===p&&u[u.length-1].path!==p?u.findIndex(isSameRouteRecord.bind(null,e[t-2])):l}),u=O(()=>c.value>-1&&function(e,t){for(const r in t){const s=t[r],c=e[r];if("string"==typeof s){if(s!==c)return!1}else if(!kt(c)||c.length!==s.length||s.some((e,t)=>e!==c[t]))return!1}return!0}(r.params,s.value.params)),l=O(()=>c.value>-1&&c.value===r.matched.length-1&&isSameRouteLocationParams(r.params,s.value.params));return{route:s,href:O(()=>s.value.href),isActive:u,isExactActive:l,navigate:function(r={}){if(function(e){if(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)return;if(e.defaultPrevented)return;if(void 0!==e.button&&0!==e.button)return;if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}e.preventDefault&&e.preventDefault();return!0}(r)){const r=t[R(e.replace)?"replace":"push"](R(e.to)).catch(noop);return e.viewTransition&&"undefined"!=typeof document&&"startViewTransition"in document&&document.startViewTransition(()=>r),r}return Promise.resolve()}}}const dr=A({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:useLink,setup(e,{slots:t}){const r=h(useLink(e)),{options:s}=S(lr),c=O(()=>({[getLinkClass(e.activeClass,s.linkActiveClass,"router-link-active")]:r.isActive,[getLinkClass(e.exactActiveClass,s.linkExactActiveClass,"router-link-exact-active")]:r.isExactActive}));return()=>{const s=t.default&&(1===(u=t.default(r)).length?u[0]:u);var u;return e.custom?s:k("a",{"aria-current":r.isExactActive?e.ariaCurrentValue:null,href:r.href,onClick:r.navigate,class:c.value},s)}}});function getOriginalPath(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const getLinkClass=(e,t,r)=>null!=e?e:null!=t?t:r;function normalizeSlot(e,t){if(!e)return null;const r=e(t);return 1===r.length?r[0]:r}const hr=A({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:r}){const s=S(fr),c=O(()=>e.route||s.value),u=S(ur,0),p=O(()=>{let e=R(u);const{matched:t}=c.value;let r;for(;(r=t[e])&&!r.components;)e++;return e}),h=O(()=>c.value.matched[p.value]);P(ur,O(()=>p.value+1)),P(cr,h),P(fr,c);const m=l();return w(()=>[m.value,h.value,e.name],([e,t,r],[s,c,u])=>{t&&(t.instances[r]=e,c&&c!==t&&e&&e===s&&(t.leaveGuards.size||(t.leaveGuards=c.leaveGuards),t.updateGuards.size||(t.updateGuards=c.updateGuards))),!e||!t||c&&isSameRouteRecord(t,c)&&s||(t.enterCallbacks[r]||[]).forEach(t=>t(e))},{flush:"post"}),()=>{const s=c.value,u=e.name,l=h.value,p=l&&l.components[u];if(!p)return normalizeSlot(r.default,{Component:p,route:s});const y=l.props[u],g=y?!0===y?s.params:"function"==typeof y?y(s):y:null,v=k(p,Pt({},g,t,{onVnodeUnmounted:e=>{e.component.isUnmounted&&(l.instances[u]=null)},ref:m}));return normalizeSlot(r.default,{Component:v,route:s})||v}}});function useRouter(){return S(lr)}function useRoute(e){return S(pr)}const mr=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,yr=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,gr=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function jsonParseTransform(e,t){if(!("__proto__"===e||"constructor"===e&&t&&"object"==typeof t&&"prototype"in t))return t}function get(e,t){if(null==e)return;let r=e;for(let s=0;s<t.length;s++){if(null==r||null==r[t[s]])return;r=r[t[s]]}return r}function set(e,t,r){if(0===r.length)return t;const s=r[0];return r.length>1&&(t=set("object"==typeof e&&null!==e&&Object.prototype.hasOwnProperty.call(e,s)?e[s]:Number.isInteger(Number(r[1]))?[]:{},t,Array.prototype.slice.call(r,1))),Number.isInteger(Number(s))&&Array.isArray(e)?e.slice()[s]:Object.assign({},e,{[s]:t})}function unset(e,t){if(null==e||0===t.length)return e;if(1===t.length){if(null==e)return e;if(Number.isInteger(t[0])&&Array.isArray(e))return Array.prototype.slice.call(e,0).splice(t[0],1);const r={};for(const t in e)r[t]=e[t];return delete r[t[0]],r}if(null==e[t[0]]){if(Number.isInteger(t[0])&&Array.isArray(e))return Array.prototype.concat.call([],e);const r={};for(const t in e)r[t]=e[t];return r}return set(e,unset(e[t[0]],Array.prototype.slice.call(t,1)),[t[0]])}function deepPickUnsafe(e,t){return t.map(e=>e.split(".")).map(t=>[t,get(e,t)]).filter(e=>void 0!==e[1]).reduce((e,t)=>set(e,t[1],t[0]),{})}function deepOmitUnsafe(e,t){return t.map(e=>e.split(".")).reduce((e,t)=>unset(e,t),e)}function hydrateStore(e,{storage:t,serializer:r,key:s,debug:c,pick:u,omit:l,beforeHydrate:p,afterHydrate:h},m,y=!0){try{y&&(null==p||p(m));const c=t.getItem(s);if(c){const t=r.deserialize(c),s=u?deepPickUnsafe(t,u):t,p=l?deepOmitUnsafe(s,l):s;e.$patch(p)}y&&(null==h||h(m))}catch(g){}}function persistState(e,{storage:t,serializer:r,key:s,debug:c,pick:u,omit:l}){try{const c=u?deepPickUnsafe(e,u):e,p=l?deepOmitUnsafe(c,l):c,h=r.serialize(p);t.setItem(s,h)}catch(p){}}var vr=function(e={}){return function(t){!function(e,t,r){const{pinia:s,store:c,options:{persist:u=r}}=e;if(!u)return;if(!(c.$id in s.state.value)){const e=s._s.get(c.$id.replace("__hot:",""));return void(e&&Promise.resolve().then(()=>e.$persist()))}const l=(Array.isArray(u)?u:!0===u?[{}]:[u]).map(t);c.$hydrate=({runHooks:t=!0}={})=>{l.forEach(r=>{hydrateStore(c,r,e,t)})},c.$persist=()=>{l.forEach(e=>{persistState(c.$state,e)})},l.forEach(t=>{hydrateStore(c,t,e),c.$subscribe((e,r)=>persistState(r,t),{detached:!0})})}(t,r=>({key:(e.key?e.key:e=>e)(r.key??t.store.$id),debug:r.debug??e.debug??!1,serializer:r.serializer??e.serializer??{serialize:e=>JSON.stringify(e),deserialize:e=>function(e,t={}){if("string"!=typeof e)return e;if('"'===e[0]&&'"'===e[e.length-1]&&-1===e.indexOf("\\"))return e.slice(1,-1);const r=e.trim();if(r.length<=9)switch(r.toLowerCase()){case"true":return!0;case"false":return!1;case"undefined":return;case"null":return null;case"nan":return Number.NaN;case"infinity":return Number.POSITIVE_INFINITY;case"-infinity":return Number.NEGATIVE_INFINITY}if(!gr.test(e)){if(t.strict)throw new SyntaxError("[destr] Invalid JSON");return e}try{if(mr.test(e)||yr.test(e)){if(t.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(e,jsonParseTransform)}return JSON.parse(e)}catch(s){if(t.strict)throw s;return e}}(e)},storage:r.storage??e.storage??window.localStorage,beforeHydrate:r.beforeHydrate,afterHydrate:r.afterHydrate,pick:r.pick,omit:r.omit}),e.auto??!1)}}();const br=function(){const e=u(!0),t=e.run(()=>l({}));let r=[],s=[];const c=p({install(e){setActivePinia(c),c._a=e,e.provide(G,c),e.config.globalProperties.$pinia=c,s.forEach(e=>r.push(e)),s=[]},use(e){return this._a?r.push(e):s.push(e),this},_p:r,_a:null,_e:e,_s:new Map,state:t});return c}();br.use(vr);const wr=function(e){const t=createRouterMatcher(e.routes,e),r=e.parseQuery||parseQuery,s=e.stringifyQuery||stringifyQuery,c=e.history,u=useCallbacks(),l=useCallbacks(),p=useCallbacks(),h=x(Gt);let m=Gt;Ct&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const y=applyToParams.bind(null,e=>""+e),g=applyToParams.bind(null,encodeParam),v=applyToParams.bind(null,decode$2);function resolve(e,u){if(u=Pt({},u||h.value),"string"==typeof e){const s=parseURL(r,e,u.path),l=t.resolve({path:s.path},u),p=c.createHref(s.fullPath);return Pt(s,l,{params:v(l.params),hash:decode$2(s.hash),redirectedFrom:void 0,href:p})}let l;if(null!=e.path)l=Pt({},e,{path:parseURL(r,e.path,u.path).path});else{const t=Pt({},e.params);for(const e in t)null==t[e]&&delete t[e];l=Pt({},e,{params:g(t)}),u.params=g(u.params)}const p=t.resolve(l,u),m=e.hash||"";p.params=y(v(p.params));const b=function(e,t){const r=t.query?e(t.query):"";return t.path+(r&&"?")+r+(t.hash||"")}(s,Pt({},e,{hash:(w=m,commonEncode(w).replace(Ft,"{").replace(Ht,"}").replace(Bt,"^")),path:p.path}));var w;const E=c.createHref(b);return Pt({fullPath:b,hash:m,query:s===stringifyQuery?normalizeQuery(e.query):e.query||{}},p,{redirectedFrom:void 0,href:E})}function locationAsObject(e){return"string"==typeof e?parseURL(r,e,h.value.path):Pt({},e)}function checkCanceledNavigation(e,t){if(m!==e)return createRouterError(8,{from:t,to:e})}function push(e){return pushWithRedirect(e)}function handleRedirectRecord(e){const t=e.matched[e.matched.length-1];if(t&&t.redirect){const{redirect:r}=t;let s="function"==typeof r?r(e):r;return"string"==typeof s&&(s=s.includes("?")||s.includes("#")?s=locationAsObject(s):{path:s},s.params={}),Pt({query:e.query,hash:e.hash,params:null!=s.path?{}:e.params},s)}}function pushWithRedirect(e,t){const r=m=resolve(e),c=h.value,u=e.state,l=e.force,p=!0===e.replace,y=handleRedirectRecord(r);if(y)return pushWithRedirect(Pt(locationAsObject(y),{state:"object"==typeof y?Pt({},u,y.state):u,force:l,replace:p}),t||r);const g=r;let v;return g.redirectedFrom=t,!l&&function(e,t,r){const s=t.matched.length-1,c=r.matched.length-1;return s>-1&&s===c&&isSameRouteRecord(t.matched[s],r.matched[c])&&isSameRouteLocationParams(t.params,r.params)&&e(t.query)===e(r.query)&&t.hash===r.hash}(s,c,r)&&(v=createRouterError(16,{to:g,from:c}),handleScroll(c,c,!0,!1)),(v?Promise.resolve(v):navigate(g,c)).catch(e=>isNavigationFailure(e)?isNavigationFailure(e,2)?e:markAsReady(e):triggerError(e,g,c)).then(e=>{if(e){if(isNavigationFailure(e,2))return pushWithRedirect(Pt({replace:p},locationAsObject(e.to),{state:"object"==typeof e.to?Pt({},u,e.to.state):u,force:l}),t||g)}else e=finalizeNavigation(g,c,!0,p,u);return triggerAfterEach(g,c,e),e})}function checkCanceledNavigationAndReject(e,t){const r=checkCanceledNavigation(e,t);return r?Promise.reject(r):Promise.resolve()}function runWithContext(e){const t=T.values().next().value;return t&&"function"==typeof t.runWithContext?t.runWithContext(e):e()}function navigate(e,t){let r;const[s,c,p]=function(e,t){const r=[],s=[],c=[],u=Math.max(t.matched.length,e.matched.length);for(let l=0;l<u;l++){const u=t.matched[l];u&&(e.matched.find(e=>isSameRouteRecord(e,u))?s.push(u):r.push(u));const p=e.matched[l];p&&(t.matched.find(e=>isSameRouteRecord(e,p))||c.push(p))}return[r,s,c]}(e,t);r=extractComponentsGuards(s.reverse(),"beforeRouteLeave",e,t);for(const u of s)u.leaveGuards.forEach(s=>{r.push(guardToPromiseFn(s,e,t))});const h=checkCanceledNavigationAndReject.bind(null,e,t);return r.push(h),runGuardQueue(r).then(()=>{r=[];for(const s of u.list())r.push(guardToPromiseFn(s,e,t));return r.push(h),runGuardQueue(r)}).then(()=>{r=extractComponentsGuards(c,"beforeRouteUpdate",e,t);for(const s of c)s.updateGuards.forEach(s=>{r.push(guardToPromiseFn(s,e,t))});return r.push(h),runGuardQueue(r)}).then(()=>{r=[];for(const s of p)if(s.beforeEnter)if(kt(s.beforeEnter))for(const c of s.beforeEnter)r.push(guardToPromiseFn(c,e,t));else r.push(guardToPromiseFn(s.beforeEnter,e,t));return r.push(h),runGuardQueue(r)}).then(()=>(e.matched.forEach(e=>e.enterCallbacks={}),r=extractComponentsGuards(p,"beforeRouteEnter",e,t,runWithContext),r.push(h),runGuardQueue(r))).then(()=>{r=[];for(const s of l.list())r.push(guardToPromiseFn(s,e,t));return r.push(h),runGuardQueue(r)}).catch(e=>isNavigationFailure(e,8)?e:Promise.reject(e))}function triggerAfterEach(e,t,r){p.list().forEach(s=>runWithContext(()=>s(e,t,r)))}function finalizeNavigation(e,t,r,s,u){const l=checkCanceledNavigation(e,t);if(l)return l;const p=t===Gt,m=Ct?history.state:{};r&&(s||p?c.replace(e.fullPath,Pt({scroll:p&&m&&m.scroll},u)):c.push(e.fullPath,u)),h.value=e,handleScroll(e,t,r,p),markAsReady()}let b;function setupListeners(){b||(b=c.listen((e,t,r)=>{if(!A.listening)return;const s=resolve(e),u=handleRedirectRecord(s);if(u)return void pushWithRedirect(Pt(u,{replace:!0,force:!0}),s).catch(noop);m=s;const l=h.value;var p,y;Ct&&(p=getScrollKey(l.fullPath,r.delta),y=computeScrollPosition(),Zt.set(p,y)),navigate(s,l).catch(e=>isNavigationFailure(e,12)?e:isNavigationFailure(e,2)?(pushWithRedirect(Pt(locationAsObject(e.to),{force:!0}),s).then(e=>{isNavigationFailure(e,20)&&!r.delta&&r.type===zt.pop&&c.go(-1,!1)}).catch(noop),Promise.reject()):(r.delta&&c.go(-r.delta,!1),triggerError(e,s,l))).then(e=>{(e=e||finalizeNavigation(s,l,!1))&&(r.delta&&!isNavigationFailure(e,8)?c.go(-r.delta,!1):r.type===zt.pop&&isNavigationFailure(e,20)&&c.go(-1,!1)),triggerAfterEach(s,l,e)}).catch(noop)}))}let w,_=useCallbacks(),O=useCallbacks();function triggerError(e,t,r){markAsReady(e);const s=O.list();return s.length&&s.forEach(s=>s(e,t,r)),Promise.reject(e)}function markAsReady(e){return w||(w=!e,setupListeners(),_.list().forEach(([t,r])=>e?r(e):t()),_.reset()),e}function handleScroll(t,r,s,c){const{scrollBehavior:u}=e;if(!Ct||!u)return Promise.resolve();const l=!s&&function(e){const t=Zt.get(e);return Zt.delete(e),t}(getScrollKey(t.fullPath,0))||(c||!s)&&history.state&&history.state.scroll||null;return E().then(()=>u(t,r,l)).then(e=>e&&scrollToPosition(e)).catch(e=>triggerError(e,t,r))}const go=e=>c.go(e);let S;const T=new Set,A={currentRoute:h,listening:!0,addRoute:function(e,r){let s,c;return isRouteName(e)?(s=t.getRecordMatcher(e),c=r):c=e,t.addRoute(c,s)},removeRoute:function(e){const r=t.getRecordMatcher(e);r&&t.removeRoute(r)},clearRoutes:t.clearRoutes,hasRoute:function(e){return!!t.getRecordMatcher(e)},getRoutes:function(){return t.getRoutes().map(e=>e.record)},resolve:resolve,options:e,push:push,replace:function(e){return push(Pt(locationAsObject(e),{replace:!0}))},go:go,back:()=>go(-1),forward:()=>go(1),beforeEach:u.add,beforeResolve:l.add,afterEach:p.add,onError:O.add,isReady:function(){return w&&h.value!==Gt?Promise.resolve():new Promise((e,t)=>{_.add([e,t])})},install(e){e.component("RouterLink",dr),e.component("RouterView",hr),e.config.globalProperties.$router=this,Object.defineProperty(e.config.globalProperties,"$route",{enumerable:!0,get:()=>R(h)}),Ct&&!S&&h.value===Gt&&(S=!0,push(c.location).catch(e=>{}));const t={};for(const s in Gt)Object.defineProperty(t,s,{get:()=>h.value[s],enumerable:!0});e.provide(lr,this),e.provide(pr,C(t)),e.provide(fr,h);const r=e.unmount;T.add(e),e.unmount=function(){T.delete(e),T.size<1&&(m=Gt,b&&b(),b=null,h.value=Gt,S=!1,w=!1),r()}}};function runGuardQueue(e){return e.reduce((e,t)=>e.then(()=>runWithContext(t)),Promise.resolve())}return A}({history:(Er="/BMT-MicroApps/",(Er=location.host?Er||location.pathname+location.search:"").includes("#")||(Er+="#"),createWebHistory(Er)),routes:[{path:"/",component:()=>__vitePreload(()=>import("./LayOut-D8EaYp0P.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12])),redirect:"/home",meta:{title:"武汉理工大学南湖校区羽毛球场预定前台"},children:[{path:"/home",component:()=>__vitePreload(()=>import("./HomeView-DHrJ6qL2.js"),__vite__mapDeps([13,2,3,4,14,15,9])),meta:{title:"武汉理工大学南湖校区羽毛球场预定前台"}},{path:"/booking",component:()=>__vitePreload(()=>import("./BookingView-BrIXWYmc.js"),__vite__mapDeps([16,17,18,2,3,4,19,20,12,21,15,22,23,24,8,25,11,26,27,28,29,30,31])),meta:{title:"武汉理工大学南湖校区羽毛球场预定前台"}},{path:"/shop",component:()=>__vitePreload(()=>import("./ShopView-re36gkOh.js"),__vite__mapDeps([32,1,33,2,3,4,34,7,23,8,26,27,24,11,28,21,15,30,29])),meta:{title:"武汉理工大学南湖校区羽毛球场预定前台"}},{path:"/product/:id",component:()=>__vitePreload(()=>import("./ProductDetail-DrY9ugp4.js"),__vite__mapDeps([35,2,3,33,5,4,36,26,37,21,11,29,9,31])),meta:{title:"商品详情 - 武汉理工大学南湖校区羽毛球场预定前台"}},{path:"/cart",component:()=>__vitePreload(()=>import("./CartView-Qan4W3HG.js"),__vite__mapDeps([38,1,2,3,4,5,39,40,8,9,23,28,22,10,11,12])),meta:{requiresAuth:!0,title:"购物车 - 武汉理工大学南湖校区羽毛球场预定前台"}},{path:"/checkout",component:()=>__vitePreload(()=>import("./CheckoutView-Bk6E13rw.js"),__vite__mapDeps([41,2,3,42,5,4,43,11,9])),meta:{requiresAuth:!0,title:"结算 - 武汉理工大学南湖校区羽毛球场预定前台"}},{path:"/payment",component:()=>__vitePreload(()=>import("./PaymentView-B0AAd15s.js"),__vite__mapDeps([44,2,3,42,4,45,46,9,10,11,12])),meta:{requiresAuth:!0,title:"支付 - 武汉理工大学南湖校区羽毛球场预定前台"}},{path:"/payment-result",component:()=>__vitePreload(()=>import("./PaymentResultView-CjiUk03o.js"),__vite__mapDeps([47,2,3,4,42,48,22])),meta:{requiresAuth:!0,title:"支付结果 - 武汉理工大学南湖校区羽毛球场预定前台"}},{path:"/orders",component:()=>__vitePreload(()=>import("./OrderListView-D65A_9t9.js"),__vite__mapDeps([49,2,3,42,4,50,27,23,24,8,11,9,28,22,37,10,12])),meta:{requiresAuth:!0,title:"我的订单 - 武汉理工大学南湖校区羽毛球场预定前台"}},{path:"/order-detail/:orderNo",component:()=>__vitePreload(()=>import("./OrderDetailView-CdtmNWFn.js"),__vite__mapDeps([51,2,3,4,42,52,28,9,23,22,10,11,12])),meta:{requiresAuth:!0,title:"订单详情 - 武汉理工大学南湖校区羽毛球场预定前台"}},{path:"/forum",component:()=>__vitePreload(()=>import("./ForumView-rlRvRbaj.js"),__vite__mapDeps([53,1,2,3,54,55,19,4,56,27,23,24,8,11,40,37])),meta:{title:"武汉理工大学南湖校区羽毛球场预定前台"}},{path:"/user-center",component:()=>__vitePreload(()=>import("./UserCenter-tOthMJjc.js"),__vite__mapDeps([57,2,3,4,58,15,30,25,11,8,23,24,46])),meta:{requiresAuth:!0,title:"武汉理工大学南湖校区羽毛球场预定前台"}},{path:"/booking-history",component:()=>__vitePreload(()=>import("./BookingHistory-BEaZCKjn.js"),__vite__mapDeps([59,17,18,1,2,3,4,60,26,12,27,23,24,8,11,40,28,30,10])),meta:{requiresAuth:!0,title:"预订记录 - 武汉理工大学南湖校区羽毛球场预定前台"}},{path:"/publish-post",component:()=>__vitePreload(()=>import("./PublishPost-DaYhevPs.js"),__vite__mapDeps([61,2,3,4,54,62,15,23,24,8,11])),meta:{title:"武汉理工大学南湖校区羽毛球场预定前台"}},{path:"/post/:id",component:()=>__vitePreload(()=>import("./PostDetail-CwTSnNnW.js"),__vite__mapDeps([63,2,3,4,54,55,19,64,37,11,65,10,12])),meta:{title:"武汉理工大学南湖校区羽毛球场预定前台"}},{path:"/my-history-post",component:()=>__vitePreload(()=>import("./MyHistoryPost-D6iwK5k7.js"),__vite__mapDeps([66,1,2,3,4,19,54,67,26,27,23,24,8,11,40,65,10,12])),meta:{requiresAuth:!0,title:"我的发帖 - 武汉理工大学南湖校区羽毛球场预定前台"}}]},{path:"/admin/:pathMatch(.*)*",component:()=>__vitePreload(()=>import("./AdminContainer-B5rSPMGD.js"),__vite__mapDeps([68,2,3,4,69,10,11,12])),meta:{requiresAdmin:!0,title:"管理后台",keepAlive:!1,isMicroFrontend:!0}},{path:"/login",component:()=>__vitePreload(()=>import("./Login-QHu5lHqZ.js"),__vite__mapDeps([70,2,3,4,71,21,30,11])),meta:{title:"登录/注册"}}]});var Er;wr.beforeEach((e,t,r)=>{var s;e.meta.title&&(document.title=e.meta.title);const c=Sr();e.meta.requiresAuth?c.token&&!c.isTokenExpired()?r():(c.token&&c.isTokenExpired()&&(c.logout(),j.warning("登录已过期，请重新登录")),r({path:"/login",query:{redirect:e.fullPath}})):e.meta.requiresAdmin?c.token&&!c.isTokenExpired()?"ROLE_ADMIN"===(null==(s=c.userinfo)?void 0:s.role)?r():(j.error("您没有访问管理后台的权限"),r("/")):(c.token&&c.isTokenExpired()&&(c.logout(),j.warning("登录已过期，请重新登录")),r({path:"/login",query:{redirect:e.fullPath}})):(c.token&&c.isTokenExpired()&&e.meta.requiresAuth&&c.logout(),r())}),wr.afterEach((e,t)=>{});const _r=pt.create({baseURL:"http://8.162.3.209:8080",timeout:1e4});let Or=!1;_r.interceptors.request.use(e=>{const t=localStorage.getItem("token");return t&&(e.headers.Authorization=`Bearer ${t}`),e},e=>Promise.reject(e)),_r.interceptors.response.use(function(e){return 0===e.data.code?e:(j.error(e.data.message||e.data.msg||"请求失败"),Promise.reject(e.data))},function(e){var t;const{response:r}=e;if(r)switch(r.status){case 401:handleTokenExpired();break;case 403:j.error("没有权限访问该资源");break;case 404:j.error("请求的资源不存在");break;case 500:j.error("服务器内部错误");break;default:j.error((null==(t=r.data)?void 0:t.message)||"请求失败")}else"ECONNABORTED"===e.code?j.error("请求超时，请检查网络连接"):j.error("网络错误，请检查网络连接");return Promise.reject(e)});const handleTokenExpired=()=>{if(Or)return;Or=!0;if(Sr().userinfo.token){j.warning("登录已过期，请重新登录");Sr().logout()}else j.warning("请先登录");const e=wr.currentRoute.value.fullPath;"/login"!==e&&wr.push({path:"/login",query:{redirect:e}}),setTimeout(()=>{Or=!1},1e3)};function updateUserProfile(e){if(e.birthday){const t=new Date(e.birthday);e.birthday=t.toISOString().split("T")[0]}return _r.put("/api/user/profile",e)}function uploadAvatar(e){return _r.post("/api/user/avatar",e,{headers:{"Content-Type":"multipart/form-data"}})}const Sr=defineStore("user",()=>{const e=l(""),t=l(null),isTokenExpired=()=>!e.value||!t.value||Date.now()>t.value,r=l(),logout=()=>{e.value="",t.value=null,r.value={},localStorage.removeItem("token"),localStorage.removeItem("tokenExpireTime")},initializeFromStorage=()=>{const r=localStorage.getItem("token"),s=localStorage.getItem("tokenExpireTime");r&&s&&(e.value=r,t.value=parseInt(s),isTokenExpired()&&logout())};return initializeFromStorage(),{token:e,tokenExpireTime:t,userinfo:r,getUserinfo:async()=>{var t;if(isTokenExpired())throw logout(),new Error("Token已过期，请重新登录");try{const t=await(e=>_r({url:"/api/user/profile",method:"get",headers:{Authorization:`Bearer ${e}`}}))(e.value);t.data&&(r.value=t.data.data)}catch(s){throw 401===(null==(t=s.response)?void 0:t.status)&&logout(),s}},clearUserinfo:()=>{r.value={}},setToken:(r,s=null)=>{e.value=r,t.value=s||Date.now()+864e5,localStorage.setItem("token",r),localStorage.setItem("tokenExpireTime",t.value.toString())},removeToken:()=>{e.value="",t.value=null,localStorage.removeItem("token"),localStorage.removeItem("tokenExpireTime")},logout:logout,setUserinfo:e=>{r.value=e},isTokenExpired:isTokenExpired,getTokenRemainingTime:()=>{if(!t.value)return 0;const e=t.value-Date.now();return e>0?e:0},initializeFromStorage:initializeFromStorage}},{persist:!0}),Tr=Object.create(null);Tr.open="0",Tr.close="1",Tr.ping="2",Tr.pong="3",Tr.message="4",Tr.upgrade="5",Tr.noop="6";const xr=Object.create(null);Object.keys(Tr).forEach(e=>{xr[Tr[e]]=e});const Ar={type:"error",data:"parser error"},Rr="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),Cr="function"==typeof ArrayBuffer,isView$1=e=>"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,encodePacket=({type:e,data:t},r,s)=>Rr&&t instanceof Blob?r?s(t):encodeBlobAsBase64(t,s):Cr&&(t instanceof ArrayBuffer||isView$1(t))?r?s(t):encodeBlobAsBase64(new Blob([t]),s):s(Tr[e]+(t||"")),encodeBlobAsBase64=(e,t)=>{const r=new FileReader;return r.onload=function(){const e=r.result.split(",")[1];t("b"+(e||""))},r.readAsDataURL(e)};function toArray(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}let Pr;const kr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",jr="undefined"==typeof Uint8Array?[]:new Uint8Array(256);for(let Pi=0;Pi<64;Pi++)jr[kr.charCodeAt(Pi)]=Pi;const Lr="function"==typeof ArrayBuffer,decodePacket=(e,t)=>{if("string"!=typeof e)return{type:"message",data:mapBinary(e,t)};const r=e.charAt(0);if("b"===r)return{type:"message",data:decodeBase64Packet(e.substring(1),t)};return xr[r]?e.length>1?{type:xr[r],data:e.substring(1)}:{type:xr[r]}:Ar},decodeBase64Packet=(e,t)=>{if(Lr){const r=(e=>{let t,r,s,c,u,l=.75*e.length,p=e.length,h=0;"="===e[e.length-1]&&(l--,"="===e[e.length-2]&&l--);const m=new ArrayBuffer(l),y=new Uint8Array(m);for(t=0;t<p;t+=4)r=jr[e.charCodeAt(t)],s=jr[e.charCodeAt(t+1)],c=jr[e.charCodeAt(t+2)],u=jr[e.charCodeAt(t+3)],y[h++]=r<<2|s>>4,y[h++]=(15&s)<<4|c>>2,y[h++]=(3&c)<<6|63&u;return m})(e);return mapBinary(r,t)}return{base64:!0,data:e}},mapBinary=(e,t)=>"blob"===t?e instanceof Blob?e:new Blob([e]):e instanceof ArrayBuffer?e:e.buffer,Ir=String.fromCharCode(30);function createPacketEncoderStream(){return new TransformStream({transform(e,t){!function(e,t){Rr&&e.data instanceof Blob?e.data.arrayBuffer().then(toArray).then(t):Cr&&(e.data instanceof ArrayBuffer||isView$1(e.data))?t(toArray(e.data)):encodePacket(e,!1,e=>{Pr||(Pr=new TextEncoder),t(Pr.encode(e))})}(e,r=>{const s=r.length;let c;if(s<126)c=new Uint8Array(1),new DataView(c.buffer).setUint8(0,s);else if(s<65536){c=new Uint8Array(3);const e=new DataView(c.buffer);e.setUint8(0,126),e.setUint16(1,s)}else{c=new Uint8Array(9);const e=new DataView(c.buffer);e.setUint8(0,127),e.setBigUint64(1,BigInt(s))}e.data&&"string"!=typeof e.data&&(c[0]|=128),t.enqueue(c),t.enqueue(r)})}})}let Ur;function totalLength(e){return e.reduce((e,t)=>e+t.length,0)}function concatChunks(e,t){if(e[0].length===t)return e.shift();const r=new Uint8Array(t);let s=0;for(let c=0;c<t;c++)r[c]=e[0][s++],s===e[0].length&&(e.shift(),s=0);return e.length&&s<e[0].length&&(e[0]=e[0].slice(s)),r}function Emitter(e){if(e)return function(e){for(var t in Emitter.prototype)e[t]=Emitter.prototype[t];return e}(e)}Emitter.prototype.on=Emitter.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},Emitter.prototype.once=function(e,t){function on2(){this.off(e,on2),t.apply(this,arguments)}return on2.fn=t,this.on(e,on2),this},Emitter.prototype.off=Emitter.prototype.removeListener=Emitter.prototype.removeAllListeners=Emitter.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var r,s=this._callbacks["$"+e];if(!s)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var c=0;c<s.length;c++)if((r=s[c])===t||r.fn===t){s.splice(c,1);break}return 0===s.length&&delete this._callbacks["$"+e],this},Emitter.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),r=this._callbacks["$"+e],s=1;s<arguments.length;s++)t[s-1]=arguments[s];if(r){s=0;for(var c=(r=r.slice(0)).length;s<c;++s)r[s].apply(this,t)}return this},Emitter.prototype.emitReserved=Emitter.prototype.emit,Emitter.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},Emitter.prototype.hasListeners=function(e){return!!this.listeners(e).length};const Nr="function"==typeof Promise&&"function"==typeof Promise.resolve?e=>Promise.resolve().then(e):(e,t)=>t(e,0),Dr="undefined"!=typeof self?self:"undefined"!=typeof window?window:Function("return this")();function pick(e,...t){return t.reduce((t,r)=>(e.hasOwnProperty(r)&&(t[r]=e[r]),t),{})}const Wr=Dr.setTimeout,Mr=Dr.clearTimeout;function installTimerFunctions(e,t){t.useNativeTimers?(e.setTimeoutFn=Wr.bind(Dr),e.clearTimeoutFn=Mr.bind(Dr)):(e.setTimeoutFn=Dr.setTimeout.bind(Dr),e.clearTimeoutFn=Dr.clearTimeout.bind(Dr))}function byteLength(e){return"string"==typeof e?function(e){let t=0,r=0;for(let s=0,c=e.length;s<c;s++)t=e.charCodeAt(s),t<128?r+=1:t<2048?r+=2:t<55296||t>=57344?r+=3:(s++,r+=4);return r}(e):Math.ceil(1.33*(e.byteLength||e.size))}function randomString(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}class TransportError extends Error{constructor(e,t,r){super(e),this.description=t,this.context=r,this.type="TransportError"}}class Transport extends Emitter{constructor(e){super(),this.writable=!1,installTimerFunctions(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,t,r){return super.emitReserved("error",new TransportError(e,t,r)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this}send(e){"open"===this.readyState&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const t=decodePacket(e,this.socket.binaryType);this.onPacket(t)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,t={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(t)}_hostname(){const e=this.opts.hostname;return-1===e.indexOf(":")?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&Number(443!==this.opts.port)||!this.opts.secure&&80!==Number(this.opts.port))?":"+this.opts.port:""}_query(e){const t=function(e){let t="";for(let r in e)e.hasOwnProperty(r)&&(t.length&&(t+="&"),t+=encodeURIComponent(r)+"="+encodeURIComponent(e[r]));return t}(e);return t.length?"?"+t:""}}class Polling extends Transport{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";const pause=()=>{this.readyState="paused",e()};if(this._polling||!this.writable){let e=0;this._polling&&(e++,this.once("pollComplete",function(){--e||pause()})),this.writable||(e++,this.once("drain",function(){--e||pause()}))}else pause()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){((e,t)=>{const r=e.split(Ir),s=[];for(let c=0;c<r.length;c++){const e=decodePacket(r[c],t);if(s.push(e),"error"===e.type)break}return s})(e,this.socket.binaryType).forEach(e=>{if("opening"===this.readyState&&"open"===e.type&&this.onOpen(),"close"===e.type)return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(e)}),"closed"!==this.readyState&&(this._polling=!1,this.emitReserved("pollComplete"),"open"===this.readyState&&this._poll())}doClose(){const close=()=>{this.write([{type:"close"}])};"open"===this.readyState?close():this.once("open",close)}write(e){this.writable=!1,((e,t)=>{const r=e.length,s=new Array(r);let c=0;e.forEach((e,u)=>{encodePacket(e,!1,e=>{s[u]=e,++c===r&&t(s.join(Ir))})})})(e,e=>{this.doWrite(e,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const e=this.opts.secure?"https":"http",t=this.query||{};return!1!==this.opts.timestampRequests&&(t[this.opts.timestampParam]=randomString()),this.supportsBinary||t.sid||(t.b64=1),this.createUri(e,t)}}let Br=!1;try{Br="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(Ci){}const $r=Br;function empty(){}class BaseXHR extends Polling{constructor(e){if(super(e),"undefined"!=typeof location){const t="https:"===location.protocol;let r=location.port;r||(r=t?"443":"80"),this.xd="undefined"!=typeof location&&e.hostname!==location.hostname||r!==e.port}}doWrite(e,t){const r=this.request({method:"POST",data:e});r.on("success",t),r.on("error",(e,t)=>{this.onError("xhr post error",e,t)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(e,t)=>{this.onError("xhr poll error",e,t)}),this.pollXhr=e}}class Request extends Emitter{constructor(e,t,r){super(),this.createRequest=e,installTimerFunctions(this,r),this._opts=r,this._method=r.method||"GET",this._uri=t,this._data=void 0!==r.data?r.data:null,this._create()}_create(){var e;const t=pick(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");t.xdomain=!!this._opts.xd;const r=this._xhr=this.createRequest(t);try{r.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0);for(let e in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(e)&&r.setRequestHeader(e,this._opts.extraHeaders[e])}}catch(s){}if("POST"===this._method)try{r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(s){}try{r.setRequestHeader("Accept","*/*")}catch(s){}null===(e=this._opts.cookieJar)||void 0===e||e.addCookies(r),"withCredentials"in r&&(r.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(r.timeout=this._opts.requestTimeout),r.onreadystatechange=()=>{var e;3===r.readyState&&(null===(e=this._opts.cookieJar)||void 0===e||e.parseCookies(r.getResponseHeader("set-cookie"))),4===r.readyState&&(200===r.status||1223===r.status?this._onLoad():this.setTimeoutFn(()=>{this._onError("number"==typeof r.status?r.status:0)},0))},r.send(this._data)}catch(s){return void this.setTimeoutFn(()=>{this._onError(s)},0)}"undefined"!=typeof document&&(this._index=Request.requestsCount++,Request.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if(void 0!==this._xhr&&null!==this._xhr){if(this._xhr.onreadystatechange=empty,e)try{this._xhr.abort()}catch(t){}"undefined"!=typeof document&&delete Request.requests[this._index],this._xhr=null}}_onLoad(){const e=this._xhr.responseText;null!==e&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}if(Request.requestsCount=0,Request.requests={},"undefined"!=typeof document)if("function"==typeof attachEvent)attachEvent("onunload",unloadHandler);else if("function"==typeof addEventListener){addEventListener("onpagehide"in Dr?"pagehide":"unload",unloadHandler,!1)}function unloadHandler(){for(let e in Request.requests)Request.requests.hasOwnProperty(e)&&Request.requests[e].abort()}const Fr=function(){const e=newRequest({xdomain:!1});return e&&null!==e.responseType}();function newRequest(e){const t=e.xdomain;try{if("undefined"!=typeof XMLHttpRequest&&(!t||$r))return new XMLHttpRequest}catch(r){}if(!t)try{return new(Dr[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(r){}}const qr="undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase();class BaseWS extends Transport{get name(){return"websocket"}doOpen(){const e=this.uri(),t=this.opts.protocols,r=qr?{}:pick(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(r.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,t,r)}catch(Ci){return this.emitReserved("error",Ci)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const r=e[t],s=t===e.length-1;encodePacket(r,this.supportsBinary,e=>{try{this.doWrite(r,e)}catch(t){}s&&Nr(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){void 0!==this.ws&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",t=this.query||{};return this.opts.timestampRequests&&(t[this.opts.timestampParam]=randomString()),this.supportsBinary||(t.b64=1),this.createUri(e,t)}}const Hr=Dr.WebSocket||Dr.MozWebSocket;const Jr={websocket:class extends BaseWS{createSocket(e,t,r){return qr?new Hr(e,t,r):t?new Hr(e,t):new Hr(e)}doWrite(e,t){this.ws.send(t)}},webtransport:class extends Transport{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(Ci){return this.emitReserved("error",Ci)}this._transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(e=>{const t=function(e,t){Ur||(Ur=new TextDecoder);const r=[];let s=0,c=-1,u=!1;return new TransformStream({transform(l,p){for(r.push(l);;){if(0===s){if(totalLength(r)<1)break;const e=concatChunks(r,1);u=!(128&~e[0]),c=127&e[0],s=c<126?3:126===c?1:2}else if(1===s){if(totalLength(r)<2)break;const e=concatChunks(r,2);c=new DataView(e.buffer,e.byteOffset,e.length).getUint16(0),s=3}else if(2===s){if(totalLength(r)<8)break;const e=concatChunks(r,8),t=new DataView(e.buffer,e.byteOffset,e.length),u=t.getUint32(0);if(u>Math.pow(2,21)-1){p.enqueue(Ar);break}c=u*Math.pow(2,32)+t.getUint32(4),s=3}else{if(totalLength(r)<c)break;const e=concatChunks(r,c);p.enqueue(decodePacket(u?e:Ur.decode(e),t)),s=0}if(0===c||c>e){p.enqueue(Ar);break}}}})}(Number.MAX_SAFE_INTEGER,this.socket.binaryType),r=e.readable.pipeThrough(t).getReader(),s=createPacketEncoderStream();s.readable.pipeTo(e.writable),this._writer=s.writable.getWriter();const read=()=>{r.read().then(({done:e,value:t})=>{e||(this.onPacket(t),read())}).catch(e=>{})};read();const c={type:"open"};this.query.sid&&(c.data=`{"sid":"${this.query.sid}"}`),this._writer.write(c).then(()=>this.onOpen())})})}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const r=e[t],s=t===e.length-1;this._writer.write(r).then(()=>{s&&Nr(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;null===(e=this._transport)||void 0===e||e.close()}},polling:class extends BaseXHR{constructor(e){super(e);const t=e&&e.forceBase64;this.supportsBinary=Fr&&!t}request(e={}){return Object.assign(e,{xd:this.xd},this.opts),new Request(newRequest,this.uri(),e)}}},Vr=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,Gr=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function parse(e){if(e.length>8e3)throw"URI too long";const t=e,r=e.indexOf("["),s=e.indexOf("]");-1!=r&&-1!=s&&(e=e.substring(0,r)+e.substring(r,s).replace(/:/g,";")+e.substring(s,e.length));let c=Vr.exec(e||""),u={},l=14;for(;l--;)u[Gr[l]]=c[l]||"";return-1!=r&&-1!=s&&(u.source=t,u.host=u.host.substring(1,u.host.length-1).replace(/;/g,":"),u.authority=u.authority.replace("[","").replace("]","").replace(/;/g,":"),u.ipv6uri=!0),u.pathNames=function(e,t){const r=/\/{2,9}/g,s=t.replace(r,"/").split("/");"/"!=t.slice(0,1)&&0!==t.length||s.splice(0,1);"/"==t.slice(-1)&&s.splice(s.length-1,1);return s}(0,u.path),u.queryKey=function(e,t){const r={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(e,t,s){t&&(r[t]=s)}),r}(0,u.query),u}const zr="function"==typeof addEventListener&&"function"==typeof removeEventListener,Qr=[];zr&&addEventListener("offline",()=>{Qr.forEach(e=>e())},!1);class SocketWithoutUpgrade extends Emitter{constructor(e,t){if(super(),this.binaryType="arraybuffer",this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&"object"==typeof e&&(t=e,e=null),e){const r=parse(e);t.hostname=r.host,t.secure="https"===r.protocol||"wss"===r.protocol,t.port=r.port,r.query&&(t.query=r.query)}else t.host&&(t.hostname=parse(t.host).host);installTimerFunctions(this,t),this.secure=null!=t.secure?t.secure:"undefined"!=typeof location&&"https:"===location.protocol,t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.hostname=t.hostname||("undefined"!=typeof location?location.hostname:"localhost"),this.port=t.port||("undefined"!=typeof location&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},t.transports.forEach(e=>{const t=e.prototype.name;this.transports.push(t),this._transportsByName[t]=e}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},t),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),"string"==typeof this.opts.query&&(this.opts.query=function(e){let t={},r=e.split("&");for(let s=0,c=r.length;s<c;s++){let e=r[s].split("=");t[decodeURIComponent(e[0])]=decodeURIComponent(e[1])}return t}(this.opts.query)),zr&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),"localhost"!==this.hostname&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},Qr.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){const t=Object.assign({},this.opts.query);t.EIO=4,t.transport=e,this.id&&(t.sid=this.id);const r=Object.assign({},this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](r)}_open(){if(0===this.transports.length)return void this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);const e=this.opts.rememberUpgrade&&SocketWithoutUpgrade.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket")?"websocket":this.transports[0];this.readyState="opening";const t=this.createTransport(e);t.open(),this.setTransport(t)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",e=>this._onClose("transport close",e))}onOpen(){this.readyState="open",SocketWithoutUpgrade.priorWebsocketSuccess="websocket"===this.transport.name,this.emitReserved("open"),this.flush()}_onPacket(e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const t=new Error("server error");t.code=e.data,this._onError(t);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data)}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),"closed"!==this.readyState&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,0===this.writeBuffer.length?this.emitReserved("drain"):this.flush()}flush(){if("closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&"polling"===this.transport.name&&this.writeBuffer.length>1))return this.writeBuffer;let e=1;for(let t=0;t<this.writeBuffer.length;t++){const r=this.writeBuffer[t].data;if(r&&(e+=byteLength(r)),t>0&&e>this._maxPayload)return this.writeBuffer.slice(0,t);e+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,Nr(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),e}write(e,t,r){return this._sendPacket("message",e,t,r),this}send(e,t,r){return this._sendPacket("message",e,t,r),this}_sendPacket(e,t,r,s){if("function"==typeof t&&(s=t,t=void 0),"function"==typeof r&&(s=r,r=null),"closing"===this.readyState||"closed"===this.readyState)return;(r=r||{}).compress=!1!==r.compress;const c={type:e,data:t,options:r};this.emitReserved("packetCreate",c),this.writeBuffer.push(c),s&&this.once("flush",s),this.flush()}close(){const close=()=>{this._onClose("forced close"),this.transport.close()},cleanupAndClose=()=>{this.off("upgrade",cleanupAndClose),this.off("upgradeError",cleanupAndClose),close()},waitForUpgrade=()=>{this.once("upgrade",cleanupAndClose),this.once("upgradeError",cleanupAndClose)};return"opening"!==this.readyState&&"open"!==this.readyState||(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?waitForUpgrade():close()}):this.upgrading?waitForUpgrade():close()),this}_onError(e){if(SocketWithoutUpgrade.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&"opening"===this.readyState)return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),zr&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const e=Qr.indexOf(this._offlineEventListener);-1!==e&&Qr.splice(e,1)}this.readyState="closed",this.id=null,this.emitReserved("close",e,t),this.writeBuffer=[],this._prevBufferLen=0}}}SocketWithoutUpgrade.protocol=4;class SocketWithUpgrade extends SocketWithoutUpgrade{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),"open"===this.readyState&&this.opts.upgrade)for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){let t=this.createTransport(e),r=!1;SocketWithoutUpgrade.priorWebsocketSuccess=!1;const onTransportOpen=()=>{r||(t.send([{type:"ping",data:"probe"}]),t.once("packet",e=>{if(!r)if("pong"===e.type&&"probe"===e.data){if(this.upgrading=!0,this.emitReserved("upgrading",t),!t)return;SocketWithoutUpgrade.priorWebsocketSuccess="websocket"===t.name,this.transport.pause(()=>{r||"closed"!==this.readyState&&(cleanup(),this.setTransport(t),t.send([{type:"upgrade"}]),this.emitReserved("upgrade",t),t=null,this.upgrading=!1,this.flush())})}else{const e=new Error("probe error");e.transport=t.name,this.emitReserved("upgradeError",e)}}))};function freezeTransport(){r||(r=!0,cleanup(),t.close(),t=null)}const onerror=e=>{const r=new Error("probe error: "+e);r.transport=t.name,freezeTransport(),this.emitReserved("upgradeError",r)};function onTransportClose(){onerror("transport closed")}function onclose(){onerror("socket closed")}function onupgrade(e){t&&e.name!==t.name&&freezeTransport()}const cleanup=()=>{t.removeListener("open",onTransportOpen),t.removeListener("error",onerror),t.removeListener("close",onTransportClose),this.off("close",onclose),this.off("upgrading",onupgrade)};t.once("open",onTransportOpen),t.once("error",onerror),t.once("close",onTransportClose),this.once("close",onclose),this.once("upgrading",onupgrade),-1!==this._upgrades.indexOf("webtransport")&&"webtransport"!==e?this.setTimeoutFn(()=>{r||t.open()},200):t.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){const t=[];for(let r=0;r<e.length;r++)~this.transports.indexOf(e[r])&&t.push(e[r]);return t}}let Kr=class extends SocketWithUpgrade{constructor(e,t={}){const r="object"==typeof e?e:t;(!r.transports||r.transports&&"string"==typeof r.transports[0])&&(r.transports=(r.transports||["polling","websocket","webtransport"]).map(e=>Jr[e]).filter(e=>!!e)),super(e,r)}};const Yr="function"==typeof ArrayBuffer,Xr=Object.prototype.toString,Zr="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===Xr.call(Blob),en="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===Xr.call(File);function isBinary(e){return Yr&&(e instanceof ArrayBuffer||(e=>"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer)(e))||Zr&&e instanceof Blob||en&&e instanceof File}function hasBinary(e,t){if(!e||"object"!=typeof e)return!1;if(Array.isArray(e)){for(let t=0,r=e.length;t<r;t++)if(hasBinary(e[t]))return!0;return!1}if(isBinary(e))return!0;if(e.toJSON&&"function"==typeof e.toJSON&&1===arguments.length)return hasBinary(e.toJSON(),!0);for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&hasBinary(e[r]))return!0;return!1}function deconstructPacket(e){const t=[],r=e.data,s=e;return s.data=_deconstructPacket(r,t),s.attachments=t.length,{packet:s,buffers:t}}function _deconstructPacket(e,t){if(!e)return e;if(isBinary(e)){const r={_placeholder:!0,num:t.length};return t.push(e),r}if(Array.isArray(e)){const r=new Array(e.length);for(let s=0;s<e.length;s++)r[s]=_deconstructPacket(e[s],t);return r}if("object"==typeof e&&!(e instanceof Date)){const r={};for(const s in e)Object.prototype.hasOwnProperty.call(e,s)&&(r[s]=_deconstructPacket(e[s],t));return r}return e}function reconstructPacket(e,t){return e.data=_reconstructPacket(e.data,t),delete e.attachments,e}function _reconstructPacket(e,t){if(!e)return e;if(e&&!0===e._placeholder){if("number"==typeof e.num&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}if(Array.isArray(e))for(let r=0;r<e.length;r++)e[r]=_reconstructPacket(e[r],t);else if("object"==typeof e)for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(e[r]=_reconstructPacket(e[r],t));return e}const tn=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"];var rn,nn;(nn=rn||(rn={}))[nn.CONNECT=0]="CONNECT",nn[nn.DISCONNECT=1]="DISCONNECT",nn[nn.EVENT=2]="EVENT",nn[nn.ACK=3]="ACK",nn[nn.CONNECT_ERROR=4]="CONNECT_ERROR",nn[nn.BINARY_EVENT=5]="BINARY_EVENT",nn[nn.BINARY_ACK=6]="BINARY_ACK";function isObject(e){return"[object Object]"===Object.prototype.toString.call(e)}class Decoder extends Emitter{constructor(e){super(),this.reviver=e}add(e){let t;if("string"==typeof e){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");t=this.decodeString(e);const r=t.type===rn.BINARY_EVENT;r||t.type===rn.BINARY_ACK?(t.type=r?rn.EVENT:rn.ACK,this.reconstructor=new BinaryReconstructor(t),0===t.attachments&&super.emitReserved("decoded",t)):super.emitReserved("decoded",t)}else{if(!isBinary(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");t=this.reconstructor.takeBinaryData(e),t&&(this.reconstructor=null,super.emitReserved("decoded",t))}}decodeString(e){let t=0;const r={type:Number(e.charAt(0))};if(void 0===rn[r.type])throw new Error("unknown packet type "+r.type);if(r.type===rn.BINARY_EVENT||r.type===rn.BINARY_ACK){const s=t+1;for(;"-"!==e.charAt(++t)&&t!=e.length;);const c=e.substring(s,t);if(c!=Number(c)||"-"!==e.charAt(t))throw new Error("Illegal attachments");r.attachments=Number(c)}if("/"===e.charAt(t+1)){const s=t+1;for(;++t;){if(","===e.charAt(t))break;if(t===e.length)break}r.nsp=e.substring(s,t)}else r.nsp="/";const s=e.charAt(t+1);if(""!==s&&Number(s)==s){const s=t+1;for(;++t;){const r=e.charAt(t);if(null==r||Number(r)!=r){--t;break}if(t===e.length)break}r.id=Number(e.substring(s,t+1))}if(e.charAt(++t)){const s=this.tryParse(e.substr(t));if(!Decoder.isPayloadValid(r.type,s))throw new Error("invalid payload");r.data=s}return r}tryParse(e){try{return JSON.parse(e,this.reviver)}catch(t){return!1}}static isPayloadValid(e,t){switch(e){case rn.CONNECT:return isObject(t);case rn.DISCONNECT:return void 0===t;case rn.CONNECT_ERROR:return"string"==typeof t||isObject(t);case rn.EVENT:case rn.BINARY_EVENT:return Array.isArray(t)&&("number"==typeof t[0]||"string"==typeof t[0]&&-1===tn.indexOf(t[0]));case rn.ACK:case rn.BINARY_ACK:return Array.isArray(t)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class BinaryReconstructor{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const e=reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),e}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const sn=Object.freeze(Object.defineProperty({__proto__:null,Decoder:Decoder,Encoder:class{constructor(e){this.replacer=e}encode(e){return e.type!==rn.EVENT&&e.type!==rn.ACK||!hasBinary(e)?[this.encodeAsString(e)]:this.encodeAsBinary({type:e.type===rn.EVENT?rn.BINARY_EVENT:rn.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id})}encodeAsString(e){let t=""+e.type;return e.type!==rn.BINARY_EVENT&&e.type!==rn.BINARY_ACK||(t+=e.attachments+"-"),e.nsp&&"/"!==e.nsp&&(t+=e.nsp+","),null!=e.id&&(t+=e.id),null!=e.data&&(t+=JSON.stringify(e.data,this.replacer)),t}encodeAsBinary(e){const t=deconstructPacket(e),r=this.encodeAsString(t.packet),s=t.buffers;return s.unshift(r),s}},get PacketType(){return rn},protocol:5},Symbol.toStringTag,{value:"Module"}));function on(e,t,r){return e.on(t,r),function(){e.off(t,r)}}const an=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class Socket2 extends Emitter{constructor(e,t,r){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=t,r&&r.auth&&(this.auth=r.auth),this._opts=Object.assign({},r),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[on(e,"open",this.onopen.bind(this)),on(e,"packet",this.onpacket.bind(this)),on(e,"error",this.onerror.bind(this)),on(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),"open"===this.io._readyState&&this.onopen()),this}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...t){var r,s,c;if(an.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(t.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(t),this;const u={type:rn.EVENT,data:t,options:{}};if(u.options.compress=!1!==this.flags.compress,"function"==typeof t[t.length-1]){const e=this.ids++,r=t.pop();this._registerAckCallback(e,r),u.id=e}const l=null===(s=null===(r=this.io.engine)||void 0===r?void 0:r.transport)||void 0===s?void 0:s.writable,p=this.connected&&!(null===(c=this.io.engine)||void 0===c?void 0:c._hasPingExpired());return this.flags.volatile&&!l||(p?(this.notifyOutgoingListeners(u),this.packet(u)):this.sendBuffer.push(u)),this.flags={},this}_registerAckCallback(e,t){var r;const s=null!==(r=this.flags.timeout)&&void 0!==r?r:this._opts.ackTimeout;if(void 0===s)return void(this.acks[e]=t);const c=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let t=0;t<this.sendBuffer.length;t++)this.sendBuffer[t].id===e&&this.sendBuffer.splice(t,1);t.call(this,new Error("operation has timed out"))},s),fn=(...e)=>{this.io.clearTimeoutFn(c),t.apply(this,e)};fn.withError=!0,this.acks[e]=fn}emitWithAck(e,...t){return new Promise((r,s)=>{const fn=(e,t)=>e?s(e):r(t);fn.withError=!0,t.push(fn),this.emit(e,...t)})}_addToQueue(e){let t;"function"==typeof e[e.length-1]&&(t=e.pop());const r={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((e,...s)=>{if(r!==this._queue[0])return;return null!==e?r.tryCount>this._opts.retries&&(this._queue.shift(),t&&t(e)):(this._queue.shift(),t&&t(null,...s)),r.pending=!1,this._drainQueue()}),this._queue.push(r),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||0===this._queue.length)return;const t=this._queue[0];t.pending&&!e||(t.pending=!0,t.tryCount++,this.flags=t.flags,this.emit.apply(this,t.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){"function"==typeof this.auth?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:rn.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,t){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,t),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(e=>{if(!this.sendBuffer.some(t=>String(t.id)===e)){const t=this.acks[e];delete this.acks[e],t.withError&&t.call(this,new Error("socket has been disconnected"))}})}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case rn.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case rn.EVENT:case rn.BINARY_EVENT:this.onevent(e);break;case rn.ACK:case rn.BINARY_ACK:this.onack(e);break;case rn.DISCONNECT:this.ondisconnect();break;case rn.CONNECT_ERROR:this.destroy();const t=new Error(e.data.message);t.data=e.data.data,this.emitReserved("connect_error",t)}}onevent(e){const t=e.data||[];null!=e.id&&t.push(this.ack(e.id)),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const t=this._anyListeners.slice();for(const r of t)r.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&"string"==typeof e[e.length-1]&&(this._lastOffset=e[e.length-1])}ack(e){const t=this;let r=!1;return function(...s){r||(r=!0,t.packet({type:rn.ACK,id:e,data:s}))}}onack(e){const t=this.acks[e.id];"function"==typeof t&&(delete this.acks[e.id],t.withError&&e.data.unshift(null),t.apply(this,e.data))}onconnect(e,t){this.id=e,this.recovered=t&&this._pid===t,this._pid=t,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:rn.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const t=this._anyListeners;for(let r=0;r<t.length;r++)if(e===t[r])return t.splice(r,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const t=this._anyOutgoingListeners;for(let r=0;r<t.length;r++)if(e===t[r])return t.splice(r,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const t=this._anyOutgoingListeners.slice();for(const r of t)r.apply(this,e.data)}}}function Backoff(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}Backoff.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),r=Math.floor(t*this.jitter*e);e=1&Math.floor(10*t)?e+r:e-r}return 0|Math.min(e,this.max)},Backoff.prototype.reset=function(){this.attempts=0},Backoff.prototype.setMin=function(e){this.ms=e},Backoff.prototype.setMax=function(e){this.max=e},Backoff.prototype.setJitter=function(e){this.jitter=e};class Manager extends Emitter{constructor(e,t){var r;super(),this.nsps={},this.subs=[],e&&"object"==typeof e&&(t=e,e=void 0),(t=t||{}).path=t.path||"/socket.io",this.opts=t,installTimerFunctions(this,t),this.reconnection(!1!==t.reconnection),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor(null!==(r=t.randomizationFactor)&&void 0!==r?r:.5),this.backoff=new Backoff({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==t.timeout?2e4:t.timeout),this._readyState="closed",this.uri=e;const s=t.parser||sn;this.encoder=new s.Encoder,this.decoder=new s.Decoder,this._autoConnect=!1!==t.autoConnect,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return void 0===e?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var t;return void 0===e?this._reconnectionDelay:(this._reconnectionDelay=e,null===(t=this.backoff)||void 0===t||t.setMin(e),this)}randomizationFactor(e){var t;return void 0===e?this._randomizationFactor:(this._randomizationFactor=e,null===(t=this.backoff)||void 0===t||t.setJitter(e),this)}reconnectionDelayMax(e){var t;return void 0===e?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,null===(t=this.backoff)||void 0===t||t.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new Kr(this.uri,this.opts);const t=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;const s=on(t,"open",function(){r.onopen(),e&&e()}),onError=t=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",t),e?e(t):this.maybeReconnectOnOpen()},c=on(t,"error",onError);if(!1!==this._timeout){const e=this._timeout,r=this.setTimeoutFn(()=>{s(),onError(new Error("timeout")),t.close()},e);this.opts.autoUnref&&r.unref(),this.subs.push(()=>{this.clearTimeoutFn(r)})}return this.subs.push(s),this.subs.push(c),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(on(e,"ping",this.onping.bind(this)),on(e,"data",this.ondata.bind(this)),on(e,"error",this.onerror.bind(this)),on(e,"close",this.onclose.bind(this)),on(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(t){this.onclose("parse error",t)}}ondecoded(e){Nr(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,t){let r=this.nsps[e];return r?this._autoConnect&&!r.active&&r.connect():(r=new Socket2(this,e,t),this.nsps[e]=r),r}_destroy(e){const t=Object.keys(this.nsps);for(const r of t){if(this.nsps[r].active)return}this._close()}_packet(e){const t=this.encoder.encode(e);for(let r=0;r<t.length;r++)this.engine.write(t[r],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,t){var r;this.cleanup(),null===(r=this.engine)||void 0===r||r.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,t),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const t=this.backoff.duration();this._reconnecting=!0;const r=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),e.skipReconnect||e.open(t=>{t?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",t)):e.onreconnect()}))},t);this.opts.autoUnref&&r.unref(),this.subs.push(()=>{this.clearTimeoutFn(r)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const cn={};function lookup(e,t){"object"==typeof e&&(t=e,e=void 0);const r=function(e,t="",r){let s=e;r=r||"undefined"!=typeof location&&location,null==e&&(e=r.protocol+"//"+r.host),"string"==typeof e&&("/"===e.charAt(0)&&(e="/"===e.charAt(1)?r.protocol+e:r.host+e),/^(https?|wss?):\/\//.test(e)||(e=void 0!==r?r.protocol+"//"+e:"https://"+e),s=parse(e)),s.port||(/^(http|ws)$/.test(s.protocol)?s.port="80":/^(http|ws)s$/.test(s.protocol)&&(s.port="443")),s.path=s.path||"/";const c=-1!==s.host.indexOf(":")?"["+s.host+"]":s.host;return s.id=s.protocol+"://"+c+":"+s.port+t,s.href=s.protocol+"://"+c+(r&&r.port===s.port?"":":"+s.port),s}(e,(t=t||{}).path||"/socket.io"),s=r.source,c=r.id,u=r.path,l=cn[c]&&u in cn[c].nsps;let p;return t.forceNew||t["force new connection"]||!1===t.multiplex||l?p=new Manager(s,t):(cn[c]||(cn[c]=new Manager(s,t)),p=cn[c]),r.query&&!t.query&&(t.query=r.queryKey),p.socket(r.path,t)}function sleep(e){return new Promise(t=>setTimeout(t,e))}function generateId(){return Math.random().toString(36).substr(2,9)+Date.now().toString(36)}Object.assign(lookup,{Manager:Manager,Socket:Socket2,io:lookup,connect:lookup});var http_get=()=>{throw new Error("HTTP client not initialized. Call initHttp() first.")},http_post=()=>{throw new Error("HTTP client not initialized. Call initHttp() first.")},un=(__publicField(e=class{static async ingest(e){if(!Array.isArray(e)||0===e.length)throw new Error("Events array cannot be empty");if(e.length>200)throw new Error("Batch size cannot exceed 200 events");return http_post(`${this.BASE_PATH}/ingest`,e)}static async reportPerformance(e){if(e.filter(e=>"perf"!==e.type).length>0)throw new Error('Performance endpoint only accepts events with type "perf"');return http_post(`${this.BASE_PATH}/perf`,e)}static async getStats(){return http_get(`${this.BASE_PATH}/stats`)}static createPageEvent(e){return{id:`page_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,type:"page",ts:Date.now(),...e}}static createCustomEvent(e){return{id:`custom_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,type:"custom",ts:Date.now(),...e}}static createErrorEvent(e){return{id:`error_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,type:"error",ts:Date.now(),...e}}static createApiEvent(e){return{id:`api_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,type:"api",ts:Date.now(),...e}}static createPerfEvent(e){return{id:`perf_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,type:"perf",ts:Date.now(),...e}}},"BASE_PATH","/v1/telemetry"),e),ln=(__publicField(t=class{static async getStats(e){const t={};return e&&(t.Authorization=`Bearer ${e}`),http_get(`${this.BASE_PATH}/stats`,{headers:t})}static async broadcast(e,t){return http_post(`${this.BASE_PATH}/broadcast`,t,{headers:{Authorization:`Bearer ${e}`}})}static async broadcastInfo(e,t,r){return this.broadcast(e,{level:"info",message:t,targetUsers:r})}static async broadcastWarning(e,t,r){return this.broadcast(e,{level:"warning",message:t,targetUsers:r})}static async broadcastError(e,t,r){return this.broadcast(e,{level:"error",message:t,targetUsers:r})}},"BASE_PATH","/api/realtime"),t),pn=class{static canAccess(e,t,r){if(e.startsWith("public:"))return!0;if(e.startsWith("system:"))return!0;if(e.startsWith("user:")){return e.substring(5)===r}return!!e.startsWith("private:")&&"admin"===t}static canPublish(e,t,r){return!!this.canAccess(e,t,r)&&(!e.startsWith("system:")||"admin"===t)}static getAccessibleChannels(e,t){const r=["public:*",`user:${t}`,"system:*"];return"admin"===e&&r.push("private:*"),r}},dn=(r=class{static init(e){const t={heartbeatInterval:3e4,maxQueueSize:1e3,reconnect:{enabled:!0,maxAttempts:-1,baseMs:1e3,capMs:3e4}};this.options={...t,...e,reconnect:{...t.reconnect,...e.reconnect??{}}},this.outboundQueue.length=0,this.topicListeners.clear(),this.reconnectCount=0}static async connect(e){if(e&&this.init(e),!this.options)throw new Error("Realtime not initialized");const{url:t,reconnect:r}=this.options;if(this.socket&&"connected"===this.status)return Promise.resolve();const s=!1!==(null==r?void 0:r.enabled),c=(null==r?void 0:r.maxAttempts)&&r.maxAttempts>0?r.maxAttempts:1/0,u=(null==r?void 0:r.baseMs)??1e3,l=(null==r?void 0:r.capMs)??3e4;return this.status="connecting",this.emitConnection(),new Promise(async e=>{var r,p;const h=await(null==(p=(r=this.options).auth)?void 0:p.call(r))??null;this.socket=lookup(t,{transports:["websocket"],reconnection:s,reconnectionAttempts:c,reconnectionDelay:u,reconnectionDelayMax:l,timeout:2e4,auth:h?{token:h.startsWith("Bearer ")?h:`Bearer ${h}`}:void 0});const m=this.socket;m.on("connect",()=>{this.status="connected",this.emitConnection(),this.resubscribeAll(),this.flushQueue(),this.startHeartbeat(),e()}),m.on("connected",e=>{this.emitConnection()}),m.on("disconnect",e=>{this.stopHeartbeat(),this.status=s?"reconnecting":"disconnected",this.emitConnection()}),m.on("reconnect_attempt",()=>{this.reconnectCount++,this.status="reconnecting",this.emitConnection()}),m.on("connect_error",async e=>{this.emitConnection(e)}),m.on("event",e=>{this.dispatchMessage(e)}),m.on("heartbeat_ack",e=>{}),m.on("error",e=>{this.emitConnection(e instanceof Error?e:new Error(String(e)))})})}static disconnect(){this.stopHeartbeat(),this.socket&&(this.socket.disconnect(),this.socket=null),this.status="disconnected",this.emitConnection()}static subscribe(e,t){let r=this.topicListeners.get(e);return r||(r=new Set,this.topicListeners.set(e,r),this.sendSubscribe(e)),r.add(t),{unsubscribe:()=>{const r=this.topicListeners.get(e);r&&(r.delete(t),0===r.size&&this.topicListeners.delete(e))},getTopic:()=>e,isActive:()=>this.topicListeners.has(e)}}static publish(e,t,r={}){const s={topic:e,payload:t,messageId:generateId(),timestamp:Date.now(),ackRequired:!1!==r.ackRequired};return this.sendPublishMessage(s)}static onConnectionChange(e){return this.connectionListeners.add(e),e(this.status),()=>this.connectionListeners.delete(e)}static getStatus(){return this.status}static getStats(){let e=0;for(const t of this.topicListeners.values())e+=t.size;return{status:this.status,subscriptions:e,queueSize:this.outboundQueue.length,reconnectCount:this.reconnectCount}}static async getServerStats(e){try{return await ln.getStats(e)}catch(t){return null}}static async broadcast(e,t,r,s){try{return(await ln.broadcast(e,{level:t,message:r,targetUsers:s})).success}catch(c){return!1}}static canAccessChannel(e,t,r){return pn.canAccess(e,t,r)}static canPublishToChannel(e,t,r){return pn.canPublish(e,t,r)}static getAccessibleChannels(e,t){return pn.getAccessibleChannels(e,t)}static dispatchMessage(e){const t=this.topicListeners.get(e.topic);if(t&&0!==t.size)for(const r of t)try{r(e)}catch{}}static sendSubscribe(e){const t={topic:e,messageId:generateId(),timestamp:Date.now()};this.socket&&"connected"===this.status&&this.socket.emit("subscribe",t,e=>{null==e||e.status})}static async sendPublishMessage(e){if(!this.socket||"connected"!==this.status)throw new Error("连接未建立，无法发布消息");return new Promise((t,r)=>{this.socket.emit("publish",e,e=>{"success"===(null==e?void 0:e.status)?t():r(new Error((null==e?void 0:e.error)||"发布失败"))})})}static resubscribeAll(){for(const e of this.topicListeners.keys())this.sendSubscribe(e)}static flushQueue(){if(!this.socket||"connected"!==this.status)return;const e=[...this.outboundQueue];this.outboundQueue.length=0;for(const t of e)this.socket.emit("event",t)}static emitConnection(e){for(const t of this.connectionListeners)try{t(this.status,e)}catch{}}static startHeartbeat(){var e;this.heartbeatTimer&&clearInterval(this.heartbeatTimer);const t=(null==(e=this.options)?void 0:e.heartbeatInterval)??3e4;this.heartbeatTimer=setInterval(()=>{var e;(null==(e=this.socket)?void 0:e.connected)&&this.socket.emit("heartbeat",{timestamp:Date.now()})},t)}static stopHeartbeat(){this.heartbeatTimer&&(clearInterval(this.heartbeatTimer),this.heartbeatTimer=null)}},__publicField(r,"options",null),__publicField(r,"status","disconnected"),__publicField(r,"socket",null),__publicField(r,"connectionListeners",new Set),__publicField(r,"topicListeners",new Map),__publicField(r,"outboundQueue",[]),__publicField(r,"reconnectCount",0),__publicField(r,"heartbeatTimer",null),r);const useRealtime=()=>{const e=JSON.parse(localStorage.getItem("user")),t={url:"ws://localhost:5000",auth:()=>localStorage.getItem("token"),user:{userId:e.userinfo.id,user_role:e.userinfo.role},heartbeatInterval:6e4,reconnect:{enabled:!0,maxAttempts:5,baseMs:1e3,capMs:3e4}};return{connect:async()=>{dn.init(t),await dn.connect()},disconnect:()=>{dn.disconnect()},subscribe:(e,t)=>{dn.subscribe(e,t)},publish:(e,t)=>{dn.publish(e,t)},onConnectionChange:e=>{dn.onConnectionChange(e)},getStatus:()=>dn.getStatus(),getStats:()=>dn.getStats()}},hn=A({__name:"App",setup(e){const t=Sr(),messageListener=e=>{$({title:"消息",message:e.payload,type:"info",duration:0})};return L(async()=>{await useRealtime().connect(),useRealtime().subscribe(`post_like_to_${t.userinfo.username}`,messageListener),useRealtime().subscribe(`post_comment_to_${t.userinfo.username}`,messageListener)}),I(()=>{useRealtime().disconnect()}),(e,t)=>{const r=U("router-view"),s=B;return D(),N(s,{locale:R(J)},{default:W(()=>[M(r)]),_:1},8,["locale"])}}}),mn={auth:{mounted(e,t){const r=Sr().userinfo;if(!r)return void(e.style.display="none");r.nickname!==t.value&&(e.style.display="none")},updated(e,t){const r=Sr().userinfo;if(!r)return void(e.style.display="none");const s=r.nickname,c=t.value;e.style.display=s!==c?"none":""}}};var yn=(__publicField(s=class{static init(e){this.options={endpoint:"http://localhost:5000",sampleRate:1,batchSize:50,flushInterval:5e3,maxCacheSize:1e3,enableDedup:!0,autoFlush:!1,retryCount:3,debug:!1,...e},this.sessionId=this.sessionId??generateId(),this.options.autoFlush&&this.startAutoFlush(),this.options.debug}static setUser(e){this.user=e}static trackPageView(e,t){this.enqueue({type:"page",name:e,props:t})}static trackEvent(e,t){this.enqueue({type:"event",name:e,props:t})}static trackError(e,t,r){this.enqueue({type:"error",name:e,props:{message:t,stack:r}})}static trackApi(e,t,r){this.enqueue({type:"api",name:e,props:{status:t,duration:r}})}static trackPerf(e){this.enqueue({type:"perf",name:e.name,props:{value:e.value,rating:e.rating}})}static async flush(){if(!this.options)return;const e=this.options.batchSize??50,t=this.options.retryCount??3;try{const s=await this.storage.getBatch(e);if(0===s.length)return;this.options.debug;const c=s.map(e=>this.convertToAPIEvent(e)),u=this.applySampling(c);if(0===u.length)return void(await this.storage.remove(s.map(e=>e.id).filter(Boolean)));let l=!1,p=null;for(let e=1;e<=t;e++)try{await un.ingest(u);this.options.debug,l=!0;break}catch(r){if(p=r,this.options.debug,e<t){const t=Math.min(1e3*Math.pow(2,e-1),1e4);await sleep(t)}}if(l)await this.storage.remove(s.map(e=>e.id).filter(Boolean));else{await this.fallbackFlush(u)?await this.storage.remove(s.map(e=>e.id).filter(Boolean)):this.options.debug}}catch(r){this.options.debug}}static async getQueueStatus(){if(!this.options)return{pending:0,failed:0};try{return{pending:await this.storage.getCount(),failed:0}}catch{return{pending:0,failed:0}}}static isInitialized(){return null!==this.options}static startAutoFlush(){var e;this.flushTimer&&clearInterval(this.flushTimer),this.flushTimer=setInterval(()=>{this.flush().catch(e=>{var t;null==(t=this.options)||t.debug})},(null==(e=this.options)?void 0:e.flushInterval)??5e3)}static stopAutoFlush(){this.flushTimer&&(clearInterval(this.flushTimer),this.flushTimer=null)}static convertToAPIEvent(e){return{id:e.id,type:e.type,name:e.name,ts:e.ts,app:e.app,release:e.release,sessionId:e.sessionId||"default-session",user:e.user?{id:String(e.user.id||"anonymous"),email:e.user.email,name:e.user.name,role:e.user.role||"user",attrs:e.user.attrs}:void 0,props:e.props}}static applySampling(e){var t;const r=(null==(t=this.options)?void 0:t.sampleRate)??1;return r>=1?e:e.filter(()=>Math.random()<r)}static async fallbackFlush(e){var t,r,s;if("undefined"==typeof navigator||!("sendBeacon"in navigator))return!1;try{const s=`${null==(t=this.options)?void 0:t.endpoint}/v1/telemetry/ingest`,c=JSON.stringify(e),u=new Blob([c],{type:"application/json"}),l=navigator.sendBeacon(s,u);return null==(r=this.options)||r.debug,l}catch(c){return null==(s=this.options)||s.debug,!1}}static async enqueue(e){if(!this.options)return;const t={...e,app:this.options.app,release:this.options.release,ts:Date.now(),id:generateId(),sessionId:this.sessionId??generateId(),user:this.user??void 0};await this.storage.add(t);await this.storage.getCount()>=(this.options.batchSize??50)&&this.flush().catch(e=>{var t;null==(t=this.options)||t.debug})}},"options",null),__publicField(s,"user",null),__publicField(s,"sessionId",null),__publicField(s,"storage",function(){const e=[];return{async add(t){e.push(t)},getBatch:async t=>e.slice(0,t),async remove(t){if(0===t.length)return;const r=new Set(t);for(let s=e.length-1;s>=0;s--){const t=e[s];t.id&&r.has(t.id)&&e.splice(s,1)}},async clear(){e.length=0},getStats:async()=>({count:e.length,size:JSON.stringify(e).length}),getCount:async()=>e.length}}()),__publicField(s,"flushTimer",null),s);function _typeof$2(e){return(_typeof$2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function toPropertyKey(e){var t=function(e,t){if("object"!=_typeof$2(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,t);if("object"!=_typeof$2(s))return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==_typeof$2(t)?t:t+""}function _defineProperty$1(e,t,r){return(t=toPropertyKey(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function asyncGeneratorStep$1(e,t,r,s,c,u,l){try{var p=e[u](l),h=p.value}catch(m){return void r(m)}p.done?t(h):Promise.resolve(h).then(s,c)}function _asyncToGenerator$1(e){return function(){var t=this,r=arguments;return new Promise(function(s,c){var u=e.apply(t,r);function _next(e){asyncGeneratorStep$1(u,s,c,_next,_throw,"next",e)}function _throw(e){asyncGeneratorStep$1(u,s,c,_next,_throw,"throw",e)}_next(void 0)})}}var gn,vn={exports:{}},bn={exports:{}};function requireOverloadYield(){return gn||(gn=1,(e=bn).exports=function(e,t){this.v=e,this.k=t},e.exports.__esModule=!0,e.exports.default=e.exports),bn.exports;var e}var wn,En,_n={exports:{}},On={exports:{}};function requireRegeneratorDefine(){return wn||(wn=1,function(e){function _regeneratorDefine(t,r,s,c){var u=Object.defineProperty;try{u({},"",{})}catch(l){u=0}e.exports=_regeneratorDefine=function(e,t,r,s){function o(t,r){_regeneratorDefine(e,t,function(e){return this._invoke(t,r,e)})}t?u?u(e,t,{value:r,enumerable:!s,configurable:!s,writable:!s}):e[t]=r:(o("next",0),o("throw",1),o("return",2))},e.exports.__esModule=!0,e.exports.default=e.exports,_regeneratorDefine(t,r,s,c)}e.exports=_regeneratorDefine,e.exports.__esModule=!0,e.exports.default=e.exports}(On)),On.exports}function requireRegenerator$1(){return En||(En=1,function(e){var t=requireRegeneratorDefine();function _regenerator(){var r,s,c="function"==typeof Symbol?Symbol:{},u=c.iterator||"@@iterator",l=c.toStringTag||"@@toStringTag";function i(e,c,u,l){var h=c&&c.prototype instanceof Generator?c:Generator,m=Object.create(h.prototype);return t(m,"_invoke",function(e,t,c){var u,l,h,m=0,y=c||[],g=!1,v={p:0,n:0,v:r,a:d,f:d.bind(r,4),d:function(e,t){return u=e,l=0,h=r,v.n=t,p}};function d(e,t){for(l=e,h=t,s=0;!g&&m&&!c&&s<y.length;s++){var c,u=y[s],b=v.p,w=u[2];e>3?(c=w===t)&&(h=u[(l=u[4])?5:(l=3,3)],u[4]=u[5]=r):u[0]<=b&&((c=e<2&&b<u[1])?(l=0,v.v=t,v.n=u[1]):b<w&&(c=e<3||u[0]>t||t>w)&&(u[4]=e,u[5]=t,v.n=w,l=0))}if(c||e>1)return p;throw g=!0,t}return function(c,y,b){if(m>1)throw TypeError("Generator is already running");for(g&&1===y&&d(y,b),l=y,h=b;(s=l<2?r:h)||!g;){u||(l?l<3?(l>1&&(v.n=-1),d(l,h)):v.n=h:v.v=h);try{if(m=2,u){if(l||(c="next"),s=u[c]){if(!(s=s.call(u,h)))throw TypeError("iterator result is not an object");if(!s.done)return s;h=s.value,l<2&&(l=0)}else 1===l&&(s=u.return)&&s.call(u),l<2&&(h=TypeError("The iterator does not provide a '"+c+"' method"),l=1);u=r}else if((s=(g=v.n<0)?h:e.call(t,v))!==p)break}catch(w){u=r,l=1,h=w}finally{m=1}}return{value:s,done:g}}}(e,u,l),!0),m}var p={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}s=Object.getPrototypeOf;var h=[][u]?s(s([][u]())):(t(s={},u,function(){return this}),s),m=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(h);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,GeneratorFunctionPrototype):(e.__proto__=GeneratorFunctionPrototype,t(e,l,"GeneratorFunction")),e.prototype=Object.create(m),e}return GeneratorFunction.prototype=GeneratorFunctionPrototype,t(m,"constructor",GeneratorFunctionPrototype),t(GeneratorFunctionPrototype,"constructor",GeneratorFunction),GeneratorFunction.displayName="GeneratorFunction",t(GeneratorFunctionPrototype,l,"GeneratorFunction"),t(m),t(m,l,"Generator"),t(m,u,function(){return this}),t(m,"toString",function(){return"[object Generator]"}),(e.exports=_regenerator=function(){return{w:i,m:f}},e.exports.__esModule=!0,e.exports.default=e.exports)()}e.exports=_regenerator,e.exports.__esModule=!0,e.exports.default=e.exports}(_n)),_n.exports}var Sn,Tn,xn,An={exports:{}},Rn={exports:{}},Cn={exports:{}};function requireRegeneratorAsyncIterator(){return Sn||(Sn=1,e=Cn,t=requireOverloadYield(),r=requireRegeneratorDefine(),e.exports=function AsyncIterator(e,s){function n(r,c,u,l){try{var p=e[r](c),h=p.value;return h instanceof t?s.resolve(h.v).then(function(e){n("next",e,u,l)},function(e){n("throw",e,u,l)}):s.resolve(h).then(function(e){p.value=e,u(p)},function(e){return n("throw",e,u,l)})}catch(m){l(m)}}var c;this.next||(r(AsyncIterator.prototype),r(AsyncIterator.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",function(){return this})),r(this,"_invoke",function(e,t,r){function f(){return new s(function(t,s){n(e,r,t,s)})}return c=c?c.then(f,f):f()},!0)},e.exports.__esModule=!0,e.exports.default=e.exports),Cn.exports;var e,t,r}function requireRegeneratorAsyncGen(){return Tn||(Tn=1,e=Rn,t=requireRegenerator$1(),r=requireRegeneratorAsyncIterator(),e.exports=function(e,s,c,u,l){return new r(t().w(e,s,c,u),l||Promise)},e.exports.__esModule=!0,e.exports.default=e.exports),Rn.exports;var e,t,r}var Pn,kn={exports:{}};var jn,Ln,In,Un,Nn,Dn={exports:{}},Wn={exports:{}};function requireRegeneratorValues(){return Ln||(Ln=1,e=Dn,t=(jn||(jn=1,function(e){function _typeof2(t){return e.exports=_typeof2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,_typeof2(t)}e.exports=_typeof2,e.exports.__esModule=!0,e.exports.default=e.exports}(Wn)),Wn.exports).default,e.exports=function(e){if(null!=e){var r=e["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],s=0;if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length))return{next:function(){return e&&s>=e.length&&(e=void 0),{value:e&&e[s++],done:!e}}}}throw new TypeError(t(e)+" is not iterable")},e.exports.__esModule=!0,e.exports.default=e.exports),Dn.exports;var e,t}function requireRegeneratorRuntime(){return In||(In=1,function(e){var t=requireOverloadYield(),r=requireRegenerator$1(),s=function(){return xn||(xn=1,e=An,t=requireRegeneratorAsyncGen(),e.exports=function(e,r,s,c,u){var l=t(e,r,s,c,u);return l.next().then(function(e){return e.done?e.value:l.next()})},e.exports.__esModule=!0,e.exports.default=e.exports),An.exports;var e,t}(),c=requireRegeneratorAsyncGen(),u=requireRegeneratorAsyncIterator(),l=function(){return Pn||(Pn=1,(e=kn).exports=function(e){var t=Object(e),r=[];for(var s in t)r.unshift(s);return function e2(){for(;r.length;)if((s=r.pop())in t)return e2.value=s,e2.done=!1,e2;return e2.done=!0,e2}},e.exports.__esModule=!0,e.exports.default=e.exports),kn.exports;var e}(),p=requireRegeneratorValues();function _regeneratorRuntime2(){var h=r(),m=h.m(_regeneratorRuntime2),y=(Object.getPrototypeOf?Object.getPrototypeOf(m):m.__proto__).constructor;function n(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))}var g={throw:1,return:2,break:3,continue:3};function a(e){var t,r;return function(s){t||(t={stop:function(){return r(s.a,2)},catch:function(){return s.v},abrupt:function(e,t){return r(s.a,g[e],t)},delegateYield:function(e,c,u){return t.resultName=c,r(s.d,p(e),u)},finish:function(e){return r(s.f,e)}},r=function(e,r,c){s.p=t.prev,s.n=t.next;try{return e(r,c)}finally{t.next=s.n}}),t.resultName&&(t[t.resultName]=s.v,t.resultName=void 0),t.sent=s.v,t.next=s.n;try{return e.call(this,t)}finally{s.p=t.prev,s.n=t.next}}}return(e.exports=_regeneratorRuntime2=function(){return{wrap:function(e,t,r,s){return h.w(a(e),t,r,s&&s.reverse())},isGeneratorFunction:n,mark:h.m,awrap:function(e,r){return new t(e,r)},AsyncIterator:u,async:function(e,t,r,u,l){return(n(t)?c:s)(a(e),t,r,u,l)},keys:l,values:p}},e.exports.__esModule=!0,e.exports.default=e.exports)()}e.exports=_regeneratorRuntime2,e.exports.__esModule=!0,e.exports.default=e.exports}(vn)),vn.exports}const Mn=F(function(){if(Nn)return Un;Nn=1;var e=requireRegeneratorRuntime()();Un=e;try{regeneratorRuntime=e}catch(t){"object"==typeof globalThis?globalThis.regeneratorRuntime=e:Function("r","regeneratorRuntime = r")(e)}return Un}());function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,s=Array(t);r<t;r++)s[r]=e[r];return s}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}}function _slicedToArray(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var s,c,u,l,p=[],h=!0,m=!1;try{if(u=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;h=!1}else for(;!(h=(s=u.call(r)).done)&&(p.push(s.value),p.length!==t);h=!0);}catch(y){m=!0,c=y}finally{try{if(!h&&null!=r.return&&(l=r.return(),Object(l)!==l))return}finally{if(m)throw c}}return p}}(e,t)||_unsupportedIterableToArray(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _toConsumableArray(e){return function(e){if(Array.isArray(e))return _arrayLikeToArray(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||_unsupportedIterableToArray(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Bn="data-wujie-id",$n="data-wujie-script-id",Fn="data-wujie-Flag",qn="data-container-position-flag",Hn="data-container-overflow-flag",Jn="data-loading-flag",Vn="data-wujie-attach-css-flag",Gn="_wujie_all_event",zn="子应用调用reload无法生效",Qn="此报错可以忽略，iframe主动中断主应用代码在子应用运行",Kn=Qn+"，详见：https://github.com/Tencent/wujie/issues/54",Yn="事件订阅数量为空",Xn="脚本请求出现错误",Zn="样式请求出现错误",eo="html请求出现错误",to="无界组件短时间重复渲染了两次，可能存在性能问题请检查代码";function isFunction(e){return"function"==typeof e}var ro=window.Proxy&&window.CustomElementRegistry,no="function"==typeof document.all&&void 0===document.all,oo=new WeakMap,isCallable=function(e){if(oo.has(e))return!0;var t=no?"function"==typeof e&&void 0!==e:"function"==typeof e;return t&&oo.set(e,t),t},io=new WeakMap;function isBoundedFunction(e){if(io.has(e))return io.get(e);var t=0===e.name.indexOf("bound ")&&!e.hasOwnProperty("prototype");return io.set(e,t),t}var so=new WeakMap;function isConstructable(e){var t=e.prototype&&e.prototype.constructor===e&&Object.getOwnPropertyNames(e.prototype).length>1;if(t)return!0;if(so.has(e))return so.get(e);var r=t;if(!r){var s=e.toString();r=/^function\b\s[A-Z].*/.test(s)||/^class\b/.test(s)}return so.set(e,r),r}var ao=new WeakMap;function getTargetValue(e,t){var r=e[t];if(ao.has(e)&&ao.get(e).has(r))return ao.get(e).get(r);if(isCallable(r)&&!isBoundedFunction(r)&&!isConstructable(r)){var s=Function.prototype.bind.call(r,e);for(var c in ao.has(e)||ao.set(e,new WeakMap),ao.get(e).set(r,s),r)s[c]=r[c];return r.hasOwnProperty("prototype")&&!s.hasOwnProperty("prototype")&&Object.defineProperty(s,"prototype",{value:r.prototype,enumerable:!1,writable:!0}),s}return r}function getDegradeIframe(e){return window.document.querySelector("iframe[".concat(Bn,'="').concat(e,'"]'))}function setAttrsToElement(e,t){Object.keys(t).forEach(function(r){e.setAttribute(r,t[r])})}function appRouteParse(e){if(!e)throw error("url参数为空"),new Error;var t=anchorElementGenerator(e),r=t.protocol+"//"+t.host,s=t.pathname+t.search+t.hash;return s.startsWith("/")||(s="/"+s),{urlElement:t,appHostPath:r,appRoutePath:s}}function anchorElementGenerator(e){var t=window.document.createElement("a");return t.href=e,t.href=t.href,t}function getAnchorElementQueryMap(e){var t=e.search||"";return _toConsumableArray(new URLSearchParams(t).entries()).reduce(function(e,t){return e[t[0]]=t[1],e},{})}function isMatchSyncQueryById(e){var t=getAnchorElementQueryMap(anchorElementGenerator(window.location.href));return Object.keys(t).includes(e)}function fixElementCtrSrcOrHref(e,t,r){var s=e.Element.prototype.setAttribute;t.prototype.setAttribute=function(e,t){var c=t;e===r&&(c=getAbsolutePath(t,this.baseURI||"",!0)),s.call(this,e,c)};var c=Object.getOwnPropertyDescriptor(t.prototype,r),u=c.enumerable,l=c.configurable,p=c.get,h=c.set;Object.defineProperty(t.prototype,r,{enumerable:u,configurable:l,get:function(){return p.call(this)},set:function(e){h.call(this,getAbsolutePath(e,this.baseURI,!0))}})}function getCurUrl(e){var t=e;return t.protocol+"//"+t.host+t.pathname}function getAbsolutePath(e,t,r){try{return e?r&&e.startsWith("#")?e:new URL(e,t).href:e}catch(s){return e}}var co=window.requestIdleCallback||function(e){return setTimeout(e,1)};function getContainer(e){return"string"==typeof e?document.querySelector(e):e}function warn(e,t){var r;null===(r=console)||void 0===r||r.warn("[wujie warn]: ".concat(e),t)}function error(e,t){var r;null===(r=console)||void 0===r||r.error("[wujie error]: ".concat(e),t)}function getInlineCode(e){var t=e.indexOf(">")+1,r=e.lastIndexOf("<");return e.substring(t,r)}function defaultGetPublicPath(e){if("object"===_typeof$2(e))return"/";try{var t=new URL(e,location.href),r=t.origin,s=t.pathname.split("/");return s.pop(),"".concat(r).concat(s.join("/"),"/")}catch(c){return""}}function compose(e){return function(t){for(var r=arguments.length,s=new Array(r>1?r-1:0),c=1;c<r;c++)s[c-1]=arguments[c];return e.reduce(function(e,t){return isFunction(t)?t.apply(void 0,[e].concat(s)):e},t||"")}}function nextTick(e){Promise.resolve().then(e)}function execHooks(e,t){for(var r=arguments.length,s=new Array(r>2?r-2:0),c=2;c<r;c++)s[c-2]=arguments[c];try{e&&e.length>0&&e.map(function(e){return e[t]}).filter(function(e){return isFunction(e)}).forEach(function(e){return e.apply(void 0,s)})}catch(u){error(u)}}function isScriptElement(e){var t;return"SCRIPT"===(null===(t=e.tagName)||void 0===t?void 0:t.toUpperCase())}var uo=1;function setTagToScript(e,t){if(isScriptElement(e)){var r=t||String(uo++);e.setAttribute($n,r)}}function getTagFromScript(e){return isScriptElement(e)?e.getAttribute($n):null}function mergeOptions(e,t){return{name:e.name,el:e.el||(null==t?void 0:t.el),url:e.url||(null==t?void 0:t.url),html:e.html||(null==t?void 0:t.html),exec:void 0!==e.exec?e.exec:null==t?void 0:t.exec,replace:e.replace||(null==t?void 0:t.replace),fetch:e.fetch||(null==t?void 0:t.fetch),props:e.props||(null==t?void 0:t.props),sync:void 0!==e.sync?e.sync:null==t?void 0:t.sync,prefix:e.prefix||(null==t?void 0:t.prefix),loading:e.loading||(null==t?void 0:t.loading),attrs:void 0!==e.attrs?e.attrs:(null==t?void 0:t.attrs)||{},degradeAttrs:void 0!==e.degradeAttrs?e.degradeAttrs:(null==t?void 0:t.degradeAttrs)||{},fiber:void 0!==e.fiber?e.fiber:void 0===(null==t?void 0:t.fiber)||(null==t?void 0:t.fiber),alive:void 0!==e.alive?e.alive:null==t?void 0:t.alive,degrade:void 0!==e.degrade?e.degrade:null==t?void 0:t.degrade,plugins:e.plugins||(null==t?void 0:t.plugins),iframeAddEventListeners:e.iframeAddEventListeners||(null==t?void 0:t.iframeAddEventListeners)||[],iframeOnEvents:e.iframeOnEvents||(null==t?void 0:t.iframeOnEvents)||[],lifecycles:{beforeLoad:e.beforeLoad||(null==t?void 0:t.beforeLoad),beforeMount:e.beforeMount||(null==t?void 0:t.beforeMount),afterMount:e.afterMount||(null==t?void 0:t.afterMount),beforeUnmount:e.beforeUnmount||(null==t?void 0:t.beforeUnmount),afterUnmount:e.afterUnmount||(null==t?void 0:t.afterUnmount),activated:e.activated||(null==t?void 0:t.activated),deactivated:e.deactivated||(null==t?void 0:t.deactivated),loadError:e.loadError||(null==t?void 0:t.loadError)}}}function eventTrigger(e,t,r){var s;"function"==typeof window.CustomEvent?s=new CustomEvent(t,{detail:r}):(s=document.createEvent("CustomEvent")).initCustomEvent(t,!0,!1,r),e.dispatchEvent(s)}function stopMainAppRun(){throw warn(Kn),new Error(Qn)}var lo=/(<script[\s\S]*?>)[\s\S]*?<\/script>/gi,po=/<(script)\s+((?!type=('|")text\/ng-template\3)[^])*?>[^]*?<\/\1>/i,fo=/.*\ssrc=('|")?([^>'"\s]+)/,ho=/.*\stype=('|")?([^>'"\s]+)/,mo=/.*\sentry\s*.*/,yo=/.*\sasync\s*.*/,vo=/.*\sdefer\s*.*/,bo=/.*\snomodule\s*.*/,wo=/.*\stype=('|")?module('|")?\s*.*/,Eo=/<(link)\s+[^]*?>/gi,_o=/\srel=('|")?(preload|prefetch|modulepreload)\1/,Oo=/.*\shref=('|")?([^>'"\s]+)/,So=/.*\sas=('|")?font\1.*/,To=/<style[^>]*>[\s\S]*?<\/style>/gi,xo=/\s+rel=('|")?stylesheet\1.*/,Ao=/.*\shref=('|")?([^>'"\s]+)/,Ro=/<!--([\s\S]*?)-->/g,Co=/<link(\s+|\s+[^]+\s+)ignore(\s*|\s+[^]*|=[^]*)>/i,Po=/<style(\s+|\s+[^]+\s+)ignore(\s*|\s+[^]*|=[^]*)>/i,ko=/<script(\s+|\s+[^]+\s+)ignore(\s*|\s+[^]*|=[^]*)>/i,jo=/.*\scrossorigin=?('|")?(use-credentials|anonymous)?('|")?/i;function hasProtocol(e){return e.startsWith("//")||e.startsWith("http://")||e.startsWith("https://")}function getEntirePath(e,t){return new URL(e,t).toString()}function parseTagAttributes(e){var t=/<[-\w]+\s+([^>]*)>/i.exec(e);if(!t)return{};for(var r,s=t[1],c=/([^\s=]+)\s*=\s*(['"])(.*?)\2/g,u={};null!==(r=c.exec(s));){var l=r[1],p=r[3];u[l]=p}return u}var genLinkReplaceSymbol=function(e){return"\x3c!-- ".concat(arguments.length>1&&void 0!==arguments[1]&&arguments[1]?"prefetch/preload/modulepreload":""," link ").concat(e," replaced by wujie --\x3e")},getInlineStyleReplaceSymbol=function(e){return"\x3c!-- inline-style-".concat(e," replaced by wujie --\x3e")},genIgnoreAssetReplaceSymbol=function(e){return"\x3c!-- ignore asset ".concat(e||"file"," replaced by wujie --\x3e")},genModuleScriptReplaceSymbol=function(e,t){return"\x3c!-- ".concat(t?"nomodule":"module"," script ").concat(e," ignored by wujie --\x3e")};function processTpl(e,t,r){var s=[],c=[],u=null,l="noModule"in window.document.createElement("script"),p=e.replace(Ro,"").replace(Eo,function(e){if(!!e.match(xo)){var r=e.match(Ao),s=e.match(Co);if(r){var u=r&&r[2],l=u;return u&&!hasProtocol(u)&&(l=getEntirePath(u,t)),s?genIgnoreAssetReplaceSymbol(l):(c.push({src:l}),genLinkReplaceSymbol(l))}}if(e.match(_o)&&e.match(Oo)&&!e.match(So)){var p=_slicedToArray(e.match(Oo),3)[2];return genLinkReplaceSymbol(p,!0)}return e}).replace(To,function(e){if(Po.test(e))return genIgnoreAssetReplaceSymbol("style file");var t=getInlineCode(e);return c.push({src:"",content:t}),getInlineStyleReplaceSymbol(c.length-1)}).replace(lo,function(e,r){var c,p=r.match(ko),h=!!r.match(wo),m=r.match(jo),y=(null==m?void 0:m[2])||"",g=l&&!!r.match(bo)||!l&&h,v=r.match(ho),b=v&&v[2];if((c=b)&&-1===["text/javascript","module","application/javascript","text/ecmascript","application/ecmascript","importmap"].indexOf(c))return e;if(po.test(e)&&r.match(fo)){var w=r.match(mo),E=r.match(fo),_=E&&E[2];if(u&&w)throw new SyntaxError("You should not set multiply entry script!");if(_&&!hasProtocol(_)&&(_=getEntirePath(_,t)),u=u||w&&_,p)return genIgnoreAssetReplaceSymbol(_||"js file");if(g)return genModuleScriptReplaceSymbol(_||"js file",l);if(_){var O=!!r.match(yo),S=!!r.match(vo);return s.push(O||S?{async:O,defer:S,src:_,module:h,crossorigin:!!m,crossoriginType:y,attrs:parseTagAttributes(e)}:{src:_,module:h,crossorigin:!!m,crossoriginType:y,attrs:parseTagAttributes(e)}),function(e){return"\x3c!-- ".concat(arguments.length>1&&void 0!==arguments[1]?arguments[1]:""," script ").concat(e," replaced by wujie --\x3e")}(_,(O?"async":S&&"defer")||"")}return e}if(p)return genIgnoreAssetReplaceSymbol("js file");if(g)return genModuleScriptReplaceSymbol("js file",l);var T=getInlineCode(e);return!T.split(/[\r\n]+/).every(function(e){return!e.trim()||e.trim().startsWith("//")})&&T&&s.push({src:"",content:T,module:h,crossorigin:!!m,crossoriginType:y,attrs:parseTagAttributes(e)}),"\x3c!-- inline scripts replaced by wujie --\x3e"});return{template:p,scripts:s,styles:c,entry:u||s[s.length-1]}}function getCssLoader(e){var t=e.plugins,r=e.replace;return function(e){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",c=arguments.length>2?arguments[2]:void 0;return compose(t.map(function(e){return e.cssLoader}))(r?r(e):e,s,c)}}function getPresetLoaders(e,t){var r=t.map(function(t){return t[e]}).filter(function(e){return null==e?void 0:e.length}).reduce(function(e,t){return e.concat(t)},[]);return"cssBeforeLoaders"===e?r.reverse():r}function getEffectLoaders(e,t){return t.map(function(t){return t[e]}).filter(function(e){return null==e?void 0:e.length}).reduce(function(e,t){return e.concat(t)},[])}function isMatchUrl(e,t){return t.some(function(t){return"string"==typeof t?e===t:t.test(e)})}var Lo={cssLoader:function(e,t,r){var s=t?getAbsolutePath(t,r):r;return e.replace(/url\((['"]?)((?:[^()]+|\((?:[^()]+|\([^()]*\))*\))*)(\1)\)/g,function(e,t,r,c){return/^data:/.test(r)?e:"url(".concat(t).concat(getAbsolutePath(r,s)).concat(c,")")})},cssBeforeLoaders:[{content:"html {view-transition-name: none;}"}]};function getPlugins(e){return Array.isArray(e)?[Lo].concat(_toConsumableArray(e)):[Lo]}function ownKeys$8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}function _objectSpread$8(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys$8(Object(r),!0).forEach(function(t){_defineProperty$1(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys$8(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var Io={},Uo={},No={};if(!window.fetch)throw error("window上不存在fetch属性，需要自行polyfill"),new Error;var Do=window.fetch.bind(window);function defaultGetTemplate(e){return e}function processCssLoader(e,t,r){return _processCssLoader.apply(this,arguments)}function _processCssLoader(){return(_processCssLoader=_asyncToGenerator$1(Mn.mark(function _callee(e,t,r){var s,c,u,l;return Mn.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return s=getCurUrl(e.proxyLocation),c=compose(e.plugins.map(function(e){return e.cssLoader})),u=r().map(function(e){var t=e.src,r=e.ignore,u=e.contentPromise;return{src:t,ignore:r,contentPromise:u.then(function(e){return c(e,t,s)})}}),p.next=5,getEmbedHTML(t,u);case 5:return l=p.sent,p.abrupt("return",e.replace?e.replace(l):l);case 7:case"end":return p.stop()}},_callee)}))).apply(this,arguments)}function getEmbedHTML(e,t){return _getEmbedHTML.apply(this,arguments)}function _getEmbedHTML(){return(_getEmbedHTML=_asyncToGenerator$1(Mn.mark(function _callee2(e,t){var r;return Mn.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return r=e,s.abrupt("return",Promise.all(t.map(function(e,t){return e.contentPromise.then(function(s){e.src?r=r.replace(genLinkReplaceSymbol(e.src),e.ignore?'<link href="'.concat(e.src,'" rel="stylesheet" type="text/css">'):"<style>/* ".concat(e.src," */").concat(s,"</style>")):s&&(r=r.replace(getInlineStyleReplaceSymbol(t),"<style>/* inline-style-".concat(t," */").concat(s,"</style>")))})})).then(function(){return r}));case 2:case"end":return s.stop()}},_callee2)}))).apply(this,arguments)}var fetchAssets=function(e,t,r,s,c){return t[e]||(t[e]=r(e).then(function(r){if(r.status>=400){if(t[e]=null,s)return error(Zn,{src:e,response:r}),null==c||c(e,new Error(Zn)),"";throw error(Xn,{src:e,response:r}),null==c||c(e,new Error(Xn)),new Error(Xn)}return r.text()}).catch(function(r){return t[e]=null,s?(error(Zn,e),null==c||c(e,r),""):(error(Xn,e),null==c||c(e,r),"")}))};function _getExternalStyleSheets(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Do,r=arguments.length>2?arguments[2]:void 0;return e.map(function(e){var s=e.src,c=e.content,u=e.ignore;return c?{src:"",contentPromise:Promise.resolve(c)}:s.startsWith("<")?{src:"",contentPromise:Promise.resolve(getInlineCode(s))}:{src:s,ignore:u,contentPromise:u?Promise.resolve(""):fetchAssets(s,Io,t,!0,r)}})}function _getExternalScripts(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Do,r=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0;return e.map(function(e){var c=e.src,u=e.async,l=e.defer,p=e.module,h=e.ignore,m=null;return m=(u||l)&&c&&!p?new Promise(function(e,u){return s?co(function(){return fetchAssets(c,Uo,t,!1,r).then(e,u)}):fetchAssets(c,Uo,t,!1,r).then(e,u)}):p&&c||h?Promise.resolve(""):c?fetchAssets(c,Uo,t,!1,r):Promise.resolve(e.content),p&&!u&&(e.defer=!0),_objectSpread$8(_objectSpread$8({},e),{},{contentPromise:m})})}function importHTML(e){var t,r,s=e.url,c=e.opts,u=e.html,l=null!==(t=c.fetch)&&void 0!==t?t:Do,p=null===(r=c.fiber)||void 0===r||r,h=c.plugins,m=c.loadError,y=h?compose(h.map(function(e){return e.htmlLoader})):defaultGetTemplate,g=getEffectLoaders("jsExcludes",h),v=getEffectLoaders("cssExcludes",h),b=getEffectLoaders("jsIgnores",h),w=getEffectLoaders("cssIgnores",h),E=defaultGetPublicPath,getHtmlParseResult=function(e,t,r){return(t?Promise.resolve(t):l(e).then(function(t){return t.status>=400?(error(eo,{url:e,response:t}),null==m||m(e,new Error(eo)),""):t.text()}).catch(function(t){return No[e]=null,null==m||m(e,t),Promise.reject(t)})).then(function(t){var s=E(e),c=processTpl(r(t),s),u=c.template,h=c.scripts,y=c.styles;return{template:u,assetPublicPath:s,getExternalScripts:function(){return _getExternalScripts(h.filter(function(e){return!e.src||!isMatchUrl(e.src,g)}).map(function(e){return _objectSpread$8(_objectSpread$8({},e),{},{ignore:e.src&&isMatchUrl(e.src,b)})}),l,m,p)},getExternalStyleSheets:function(){return _getExternalStyleSheets(y.filter(function(e){return!e.src||!isMatchUrl(e.src,v)}).map(function(e){return _objectSpread$8(_objectSpread$8({},e),{},{ignore:e.src&&isMatchUrl(e.src,w)})}),l,m)}}})};return null!=c&&c.plugins.some(function(e){return e.htmlLoader})?getHtmlParseResult(s,u,y):No[s]||(No[s]=getHtmlParseResult(s,u,y))}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _createClass(e,t,r){return t&&function(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,toPropertyKey(s.key),s)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function _possibleConstructorReturn(e,t){if(t&&("object"==_typeof$2(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function _isNativeReflectConstruct$1(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(_isNativeReflectConstruct$1=function(){return!!e})()}function _wrapNativeSuper(e){var t="function"==typeof Map?new Map:void 0;return _wrapNativeSuper=function(e){if(null===e||!function(e){try{return-1!==Function.toString.call(e).indexOf("[native code]")}catch(t){return"function"==typeof e}}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,Wrapper)}function Wrapper(){return function(e,t,r){if(_isNativeReflectConstruct$1())return Reflect.construct.apply(null,arguments);var s=[null];s.push.apply(s,t);var c=new(e.bind.apply(e,s));return r&&_setPrototypeOf(c,r.prototype),c}(e,arguments,_getPrototypeOf(this).constructor)}return Wrapper.prototype=Object.create(e.prototype,{constructor:{value:Wrapper,enumerable:!1,writable:!0,configurable:!0}}),_setPrototypeOf(Wrapper,e)},_wrapNativeSuper(e)}function ownKeys$7(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}function _objectSpread$7(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys$7(Object(r),!0).forEach(function(t){_defineProperty$1(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys$7(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var Wo=function(e){if(null!==(e=window.__WUJIE_INJECT)&&void 0!==e&&e.idToSandboxMap)return window.__WUJIE_INJECT.idToSandboxMap;var t=window.__POWERED_BY_WUJIE__?window.__WUJIE.inject.idToSandboxMap:new Map;return window.__WUJIE_INJECT=_objectSpread$7(_objectSpread$7({},window.__WUJIE_INJECT),{},{idToSandboxMap:t}),t}();function getWujieById(e){var t;return(null===(t=Wo.get(e))||void 0===t?void 0:t.wujie)||null}function getOptionsById(e){var t;return(null===(t=Wo.get(e))||void 0===t?void 0:t.options)||null}function deleteWujieById(e){var t=Wo.get(e);null!=t&&t.options&&Wo.set(e,{options:t.options}),Wo.delete(e)}var Mo=["createElement","createTextNode","documentURI","URL","getElementsByTagName","getElementById"],Bo=["createElement","createTextNode","documentURI","URL","getElementsByTagName","getElementsByClassName","getElementsByName","getElementById","querySelector","querySelectorAll","documentElement","scrollingElement","forms","images","links"],$o=["activeElement","childElementCount","children","firstElementChild","firstChild","fullscreenElement","lastElementChild","pictureInPictureElement","pointerLockElement","styleSheets"],Fo=["append","contains","getSelection","elementFromPoint","elementsFromPoint","getAnimations","replaceChildren"],qo=["characterSet","compatMode","contentType","designMode","dir","doctype","embeds","fullscreenEnabled","hidden","implementation","lastModified","pictureInPictureEnabled","plugins","readyState","referrer","visibilityState","fonts"],Ho=["execCommand","caretPositionFromPoint","createRange","exitFullscreen","exitPictureInPicture","getElementsByTagNameNS","hasFocus","prepend"],Jo=["onpointerlockchange","onpointerlockerror","onbeforecopy","onbeforecut","onbeforepaste","onfreeze","onresume","onsearch","onfullscreenchange","onfullscreenerror","onsecuritypolicyviolation","onvisibilitychange"],Vo=["head","body"],Go=["DOMContentLoaded","readystatechange"],zo=["onreadystatechange"],Qo=["fullscreenchange","fullscreenerror","selectionchange","visibilitychange","wheel","keydown","keypress","keyup"],Ko=["gotpointercapture","lostpointercapture"],Yo=["hashchange","popstate","DOMContentLoaded","load","beforeunload","unload","message","error","unhandledrejection"],Xo=["onload","onbeforeunload","onunload","onerror","onunhandledrejection"],Zo={IMG:"src",A:"href",SOURCE:"src"},ei=["getComputedStyle","visualViewport","matchMedia","DOMParser"],ti=[/animationFrame$/i,/resizeObserver$|mutationObserver$|intersectionObserver$/i,/height$|width$|left$/i,/^screen/i,/CSSStyleSheet$/i,/X$|Y$/],ri=HTMLElement.prototype.appendChild,ni=HTMLElement.prototype.removeChild,oi=HTMLElement.prototype.contains,ii=HTMLHeadElement.prototype.insertBefore,si=HTMLBodyElement.prototype.insertBefore,ai=HTMLStyleElement.prototype.insertAdjacentElement,ci=Node.prototype.addEventListener,ui=Node.prototype.removeEventListener,li=window.addEventListener,pi=window.removeEventListener,fi=Node.prototype.appendChild,di=window.__POWERED_BY_WUJIE__?window.__WUJIE_RAW_DOCUMENT_QUERY_SELECTOR__:Document.prototype.querySelector;function ownKeys$6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}function _objectSpread$6(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys$6(Object(r),!0).forEach(function(t){_defineProperty$1(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys$6(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function manualInvokeElementEvent(e,t){var r,s,c=new CustomEvent(t),u=(r=c,s=function(){return e},Object.defineProperties(r,{srcElement:{get:s},target:{get:s}}),r);isFunction(e["on".concat(t)])?e["on".concat(t)](u):e.dispatchEvent(u)}function handleStylesheetElementPatch(e,t){if(e.innerHTML&&!t.degrade){e._patcher&&clearTimeout(e._patcher),e._patcher=setTimeout(function(){var r=_slicedToArray(getPatchStyleElements([e.sheet]),2),s=r[0],c=r[1];s&&t.shadowRoot.head.appendChild(s),c&&t.shadowRoot.host.appendChild(c),e._patcher=void 0},50)}}var hi=Promise.resolve();function rewriteAppendOrInsertChild(e){return function(t,r){var s,c=this,u=t,l=e.rawDOMAppendOrInsertBefore,p=e.wujieId,h=getWujieById(p),m=h.styleSheetElements,y=h.replace,g=h.fetch,v=h.plugins,b=h.iframe,w=h.lifecycles,E=h.proxyLocation,_=h.fiber;if("LINK"!==(null==(s=u.tagName)?void 0:s.toUpperCase())&&"STYLE"!==(null==s?void 0:s.toUpperCase())&&"SCRIPT"!==(null==s?void 0:s.toUpperCase())&&"IFRAME"!==(null==s?void 0:s.toUpperCase())||!p){var O=l.call(this,u,r);return patchElementEffect(u,b.contentWindow),execHooks(v,"appendOrInsertElementHook",u,b.contentWindow),O}var S,T=b.contentDocument,x=getCurUrl(E);if(u.tagName)switch(null===(S=u.tagName)||void 0===S?void 0:S.toUpperCase()){case"LINK":var A=u,R=A.href,C=A.rel,P=A.type;if(!("stylesheet"===C||"text/css"===P||R.endsWith(".css"))){var k=l.call(this,u,r);return execHooks(v,"appendOrInsertElementHook",u,b.contentWindow),k}R&&!isMatchUrl(R,getEffectLoaders("cssExcludes",v))&&_getExternalStyleSheets([{src:R,ignore:isMatchUrl(R,getEffectLoaders("cssIgnores",v))}],g,w.loadError).forEach(function(e){var t=e.src,s=e.ignore;return e.contentPromise.then(function(e){var p=parseTagAttributes(u.outerHTML);if(s&&t)l.call(c,u,r);else{var g=T.createElement("style"),b=getCssLoader({plugins:v,replace:y});g.innerHTML=b(e,t,x),m.push(g),setAttrsToElement(g,p),l.call(c,g,r),handleStylesheetElementPatch(g,h),manualInvokeElementEvent(u,"load")}u=null},function(){manualInvokeElementEvent(u,"error"),u=null})});var j=T.createComment("dynamic link ".concat(R," replaced by wujie"));return l.call(this,j,r);case"STYLE":var L=t;m.push(L);var I=L.innerHTML,U=getCssLoader({plugins:v,replace:y});I&&(L.innerHTML=U(I,"",x));var N=l.call(this,u,r);return function(e,t,r,s){var c;if(!e._hasPatchStyle){var u=Object.getOwnPropertyDescriptor(Element.prototype,"innerHTML"),l=Object.getOwnPropertyDescriptor(HTMLElement.prototype,"innerText"),p=Object.getOwnPropertyDescriptor(Node.prototype,"textContent"),h=null===(c=e.sheet)||void 0===c?void 0:c.insertRule;patchSheetInsertRule(),u&&Object.defineProperties(e,{innerHTML:{get:function(){return u.get.call(e)},set:function(c){var l=this;u.set.call(e,t(c,"",s)),nextTick(function(){return handleStylesheetElementPatch(l,r)})}}}),Object.defineProperties(e,{innerText:{get:function(){return l.get.call(e)},set:function(c){var u=this;l.set.call(e,t(c,"",s)),nextTick(function(){return handleStylesheetElementPatch(u,r)})}},textContent:{get:function(){return p.get.call(e)},set:function(c){var u=this;p.set.call(e,t(c,"",s)),nextTick(function(){return handleStylesheetElementPatch(u,r)})}},appendChild:{value:function(c){var u=this;if(nextTick(function(){return handleStylesheetElementPatch(u,r)}),c.nodeType===Node.TEXT_NODE){var l=fi.call(e,e.ownerDocument.createTextNode(t(c.textContent,"",s)));return patchSheetInsertRule(),l}return fi(c)}},insertAdjacentElement:{value:function(e,t){if("STYLE"===t.nodeName){nextTick(function(){return handleStylesheetElementPatch(t,r)});var s=ai.call(this,e,t);return r.styleSheetElements.push(t),s}return ai.call(this,e,t)}},_hasPatchStyle:{get:function(){return!0}}})}function patchSheetInsertRule(){h&&(e.sheet.insertRule=function(t,r){return u?e.innerHTML+=t:e.innerText+=t,h.call(e.sheet,t,r)})}}(L,U,h,x),handleStylesheetElementPatch(L,h),execHooks(v,"appendOrInsertElementHook",u,b.contentWindow),N;case"SCRIPT":setTagToScript(u);var D=u,W=D.src,M=D.text,B=D.type,$=D.crossOrigin;if(W&&!isMatchUrl(W,getEffectLoaders("jsExcludes",v))){var execScript=function(e){if(null===h.iframe)return warn(to);insertScriptToIframe(_objectSpread$6(_objectSpread$6({},e),{},{onload:function(){manualInvokeElementEvent(u,"load"),u=null}}),h.iframe.contentWindow,u)};_getExternalScripts([{src:W,module:"module"===B,crossorigin:null!==$,crossoriginType:$||"",ignore:isMatchUrl(W,getEffectLoaders("jsIgnores",v)),attrs:parseTagAttributes(u.outerHTML)}],g,w.loadError,_).forEach(function(e){hi=hi.then(function(){return e.contentPromise.then(function(t){var r;if(null===h.execQueue)return warn(to);var s=null===(r=h.execQueue)||void 0===r?void 0:r.length;h.execQueue.push(function(){return _?h.requestIdleCallback(function(){execScript(_objectSpread$6(_objectSpread$6({},e),{},{content:t}))}):execScript(_objectSpread$6(_objectSpread$6({},e),{},{content:t}))}),s||h.execQueue.shift()()},function(){manualInvokeElementEvent(u,"error"),u=null})})})}else{var F,q=null===(F=h.execQueue)||void 0===F?void 0:F.length;h.execQueue.push(function(){return _?h.requestIdleCallback(function(){insertScriptToIframe({src:null,content:M,attrs:parseTagAttributes(u.outerHTML)},h.iframe.contentWindow,u)}):insertScriptToIframe({src:null,content:M,attrs:parseTagAttributes(u.outerHTML)},h.iframe.contentWindow,u)}),q||h.execQueue.shift()()}var H=T.createComment("dynamic script ".concat(W," replaced by wujie"));return l.call(this,H,r);case"IFRAME":if(""===u.getAttribute(Fn))return fi.call(di.call(this.ownerDocument,"html"),u);var J=l.call(this,u,r);return execHooks(v,"appendOrInsertElementHook",u,b.contentWindow),J}}}function findScriptElementFromIframe(e,t){var r=getTagFromScript(e),s=getWujieById(t).iframe,c=s.contentWindow.__WUJIE_RAW_DOCUMENT_HEAD__.querySelector("script[".concat($n,"='").concat(r,"']"));return null===c&&warn("目标Script尚未准备好或已经被移除","<script ".concat($n,"='").concat(r,"'/>")),{targetScript:c,iframe:s}}function rewriteContains(e){return function(t){var r=t,s=e.rawElementContains,c=e.wujieId;return r&&isScriptElement(r)?null!==findScriptElementFromIframe(r,c).targetScript:s(r)}}function patchEventListener(e){var t=new Map;e._cacheListeners=t,e.addEventListener=function(r,s,c){var u=t.get(r)||[];return t.set(r,[].concat(_toConsumableArray(u),[s])),ci.call(e,r,s,c)},e.removeEventListener=function(r,s,c){var u=t.get(r),l=null==u?void 0:u.indexOf(s);return null!=u&&u.length&&-1!==l&&u.splice(l,1),ui.call(e,r,s,c)}}function removeEventListener$1(e){_toConsumableArray(e._cacheListeners.entries()).forEach(function(t){var r=_slicedToArray(t,2),s=r[0];r[1].forEach(function(t){return ui.call(e,s,t)})})}function patchRenderEffect(e,t,r){var s;r||(patchEventListener(e.head),patchEventListener(e.body)),e.head.appendChild=rewriteAppendOrInsertChild({rawDOMAppendOrInsertBefore:fi,wujieId:t}),e.head.insertBefore=rewriteAppendOrInsertChild({rawDOMAppendOrInsertBefore:ii,wujieId:t}),e.head.removeChild=(s={rawElementRemoveChild:ni.bind(e.head),wujieId:t},function(e){var t=e,r=s.rawElementRemoveChild,c=s.wujieId;if(t&&isScriptElement(t)){var u=findScriptElementFromIframe(t,c),l=u.targetScript,p=u.iframe;return null!==l?p.contentWindow.__WUJIE_RAW_DOCUMENT_HEAD__.removeChild(l):null}return r(t)}),e.head.contains=rewriteContains({rawElementContains:oi.bind(e.head),wujieId:t}),e.contains=rewriteContains({rawElementContains:oi.bind(e),wujieId:t}),e.body.appendChild=rewriteAppendOrInsertChild({rawDOMAppendOrInsertBefore:fi,wujieId:t}),e.body.insertBefore=rewriteAppendOrInsertChild({rawDOMAppendOrInsertBefore:si,wujieId:t})}function ownKeys$5(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}function _objectSpread$5(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys$5(Object(r),!0).forEach(function(t){_defineProperty$1(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys$5(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function _isNativeReflectConstruct(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(_isNativeReflectConstruct=function(){return!!e})()}var mi={":root":":host"};function createWujieWebComponent(e){var t=window.document.createElement("wujie-app");return t.setAttribute(Bn,e),t.classList.add("wujie_iframe"),t}function renderElementToContainer(e,t){var r=getContainer(t);return r&&!r.contains(e)&&(r.querySelector("div[".concat(Jn,"]"))||clearChild(r),e&&ri.call(r,e)),r}function initRenderIframeAndContainer(e,t){var r=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=document.createElement("iframe"),s="height:100%;width:100%";return setAttrsToElement(r,_objectSpread$5(_objectSpread$5({},t),{},_defineProperty$1({style:[s,t.style].join(";")},Bn,e))),r}(e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}),s=renderElementToContainer(r,t),c=r.contentWindow.document;return c.open(),c.write("<!DOCTYPE html><html><head></head><body></body></html>"),c.close(),{iframe:r,container:s}}function processCssLoaderForTemplate(e,t){return _processCssLoaderForTemplate.apply(this,arguments)}function _processCssLoaderForTemplate(){return(_processCssLoaderForTemplate=_asyncToGenerator$1(Mn.mark(function _callee(e,t){var r,s,c,u,l,p,h,m;return Mn.wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return r=e.iframe.contentDocument,s=e.plugins,c=e.replace,u=e.proxyLocation,l=getCssLoader({plugins:s,replace:c}),p=getPresetLoaders("cssBeforeLoaders",s),h=getPresetLoaders("cssAfterLoaders",s),m=getCurUrl(u),y.next=8,Promise.all([Promise.all(_getExternalStyleSheets(p,e.fetch,e.lifecycles.loadError).map(function(e){var t=e.src;return e.contentPromise.then(function(e){return{src:t,content:e}})})).then(function(e){e.forEach(function(e){var s=e.src,c=e.content;if(c){var u=r.createElement("style");u.setAttribute("type","text/css"),u.appendChild(r.createTextNode(c?l(c,s,m):c));var p=t.querySelector("head"),h=t.querySelector("body");t.insertBefore(u,p||h||t.firstChild)}})}),Promise.all(_getExternalStyleSheets(h,e.fetch,e.lifecycles.loadError).map(function(e){var t=e.src;return e.contentPromise.then(function(e){return{src:t,content:e}})})).then(function(e){e.forEach(function(e){var s=e.src,c=e.content;if(c){var u=r.createElement("style");u.setAttribute("type","text/css"),u.appendChild(r.createTextNode(c?l(c,s,m):c)),t.appendChild(u)}})})]).then(function(){return t},function(){return t});case 8:return y.abrupt("return",y.sent);case 9:case"end":return y.stop()}},_callee)}))).apply(this,arguments)}function renderTemplateToHtml(e,t){var r=e.__WUJIE,s=r.head,c=r.body,u=r.alive,l=r.execFlag,p=e.document,h=(new DOMParser).parseFromString(t,"text/html").documentElement.attributes,m=p.createElement("html");m.innerHTML=t;for(var y=0;y<h.length;y++)m.setAttribute(h[y].name,h[y].value);!u&&l?m=function(e,t,r){var s=e.querySelector("head"),c=e.querySelector("body");if(s){for(;s.firstChild;)fi.call(t,s.firstChild.cloneNode(!0)),s.removeChild(s.firstChild);s.parentNode.replaceChild(t,s)}if(c){for(;c.firstChild;)fi.call(r,c.firstChild.cloneNode(!0)),c.removeChild(c.firstChild);c.parentNode.replaceChild(r,c)}return e}(m,s,c):(r.head=m.querySelector("head"),r.body=m.querySelector("body"));for(var g=p.createTreeWalker(m,NodeFilter.SHOW_ELEMENT,null,!1),v=g.currentNode;v;){patchElementEffect(v,e);var b=Zo[v.tagName],w=v[b];b&&v.setAttribute(b,getAbsolutePath(w,v.baseURI||"")),v=g.nextNode()}if(!m.querySelector("head")){var E=p.createElement("head");m.appendChild(E)}if(!m.querySelector("body")){var _=p.createElement("body");m.appendChild(_)}return m}function renderTemplateToShadowRoot(e,t,r){return _renderTemplateToShadowRoot.apply(this,arguments)}function _renderTemplateToShadowRoot(){return(_renderTemplateToShadowRoot=_asyncToGenerator$1(Mn.mark(function _callee2(e,t,r){var s,c,u;return Mn.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return s=renderTemplateToHtml(t,r),l.next=3,processCssLoaderForTemplate(t.__WUJIE,s);case 3:c=l.sent,e.appendChild(c),(u=document.createElement("div")).setAttribute("style","position: fixed; z-index: 2147483647; visibility: hidden; inset: 0px; backface-visibility: hidden;"),c.insertBefore(u,c.firstChild),e.head=e.querySelector("head"),e.body=e.querySelector("body"),Object.defineProperty(e.firstChild,"parentNode",{enumerable:!0,configurable:!0,get:function(){return t.document}}),patchRenderEffect(e,t.__WUJIE.id,!1);case 12:case"end":return l.stop()}},_callee2)}))).apply(this,arguments)}function renderTemplateToIframe(e,t,r){return _renderTemplateToIframe.apply(this,arguments)}function _renderTemplateToIframe(){return(_renderTemplateToIframe=_asyncToGenerator$1(Mn.mark(function _callee3(e,t,r){var s,c;return Mn.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return s=renderTemplateToHtml(t,r),u.next=3,processCssLoaderForTemplate(t.__WUJIE,s);case 3:c=u.sent,e.replaceChild(c,e.documentElement),Object.defineProperty(e.documentElement,"parentNode",{enumerable:!0,configurable:!0,get:function(){return t.document}}),patchRenderEffect(e,t.__WUJIE.id,!0);case 7:case"end":return u.stop()}},_callee3)}))).apply(this,arguments)}function clearChild(e){for(;null!=e&&e.firstChild;)ni.call(e,e.firstChild)}function addLoading(e,t){var r=getContainer(e);clearChild(r);var s=null;try{s=window.getComputedStyle(r)}catch(u){return}"static"===s.position?(r.setAttribute(qn,s.position),r.setAttribute(Hn,"visible"===s.overflow?"":s.overflow),r.style.setProperty("position","relative"),r.style.setProperty("overflow","hidden")):["relative","sticky"].includes(s.position)&&(r.setAttribute(Hn,"visible"===s.overflow?"":s.overflow),r.style.setProperty("overflow","hidden"));var c=document.createElement("div");c.setAttribute(Jn,""),c.setAttribute("style","position: absolute; width: 100%; height: 100%; display: flex; justify-content: center; align-items: center; z-index:1;"),t?c.appendChild(t):c.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="24px" height="30px" viewBox="0 0 24 30">\n<rect x="0" y="13" width="4" height="5" fill="#909090">\n  <animate attributeName="height" attributeType="XML" values="5;21;5" begin="0s" dur="0.6s" repeatCount="indefinite"></animate>\n  <animate attributeName="y" attributeType="XML" values="13; 5; 13" begin="0s" dur="0.6s" repeatCount="indefinite"></animate>\n</rect>\n<rect x="10" y="13" width="4" height="5" fill="#909090">\n  <animate attributeName="height" attributeType="XML" values="5;21;5" begin="0.15s" dur="0.6s" repeatCount="indefinite"></animate>\n  <animate attributeName="y" attributeType="XML" values="13; 5; 13" begin="0.15s" dur="0.6s" repeatCount="indefinite"></animate>\n</rect>\n<rect x="20" y="13" width="4" height="5" fill="#909090">\n  <animate attributeName="height" attributeType="XML" values="5;21;5" begin="0.3s" dur="0.6s" repeatCount="indefinite"></animate>\n  <animate attributeName="y" attributeType="XML" values="13; 5; 13" begin="0.3s" dur="0.6s" repeatCount="indefinite"></animate>\n</rect>\n</svg>',r.appendChild(c)}function removeLoading(e){var t=e.getAttribute(qn),r=e.getAttribute(Hn);t&&e.style.removeProperty("position"),null!==r&&(r?e.style.setProperty("overflow",r):e.style.removeProperty("overflow")),e.removeAttribute(qn),e.removeAttribute(Hn);var s=e.querySelector("div[".concat(Jn,"]"));s&&e.removeChild(s)}function getPatchStyleElements(e){for(var t=[],r=[],s=/:root/g,c=0;c<e.length;c++)for(var u,l,p=null!==(u=null===(l=e[c])||void 0===l?void 0:l.cssRules)&&void 0!==u?u:[],h=0;h<p.length;h++){var m=p[h].cssText;s.test(m)&&t.push(m.replace(s,function(e){return mi[e]})),p[h].type===CSSRule.FONT_FACE_RULE&&r.push(m)}var y=null,g=null;return t.length&&((y=window.document.createElement("style")).innerHTML=t.join("")),r.length&&((g=window.document.createElement("style")).innerHTML=r.join("")),[y,g]}function syncUrlToWindow(e){var t=e.__WUJIE,r=t.sync,s=t.id,c=t.prefix,u=anchorElementGenerator(window.location.href),l=getAnchorElementQueryMap(u);if(!r&&!l[s])return null;var p=e.location.pathname+e.location.search+e.location.hash,h="";c&&Object.keys(c).forEach(function(e){var t=c[e];p.startsWith(t)&&(!h||t.length>c[h].length)&&(h=e)}),r?l[s]=window.encodeURIComponent(h?p.replace(c[h],"{".concat(h,"}")):p):delete l[s];var m="?"+Object.keys(l).map(function(e){return e+"="+l[e]}).join("&");u.search=m,u.href!==window.location.href&&window.history.replaceState(null,"",u.href),u=null}function syncUrlToIframe(e){var t=e.location,r=t.pathname,s=t.search,c=t.hash,u=e.__WUJIE,l=u.id,p=u.url,h=u.sync,m=u.execFlag,y=u.prefix,g=u.inject,v=h&&!m?function(e,t){var r,s=anchorElementGenerator(window.location.href),c=getAnchorElementQueryMap(s);s=null;var u=c[e]||"",l=null===(r=u.match(/^{([^}]*)}/))||void 0===r?void 0:r[1];return t&&l?u.replace("{".concat(l,"}"),t[l]):u}(l,y):p,b=appRouteParse((/^http/.test(v)?null:v)||p).appRoutePath;r+s+c!==b&&e.history.replaceState(null,"",g.mainHostPath+b)}function clearInactiveAppUrl(){var e=anchorElementGenerator(window.location.href),t=getAnchorElementQueryMap(e);Object.keys(t).forEach(function(e){var r=getWujieById(e);r&&r.execFlag&&r.sync&&!r.hrefFlag&&!r.activeFlag&&delete t[e]});var r="?"+Object.keys(t).map(function(e){return e+"="+window.decodeURIComponent(t[e])}).join("&");e.search=r,e.href!==window.location.href&&window.history.replaceState(null,"",e.href),e=null}function ownKeys$4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}function _objectSpread$4(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys$4(Object(r),!0).forEach(function(t){_defineProperty$1(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys$4(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function patchIframeVariable(e,t,r){e.__WUJIE=t,e.__WUJIE_PUBLIC_PATH__=r+"/",e.$wujie=t.provide,e.__WUJIE_RAW_WINDOW__=e}function updateBase(e,t,r){var s,c=new URL(null===(s=e.location.href)||void 0===s?void 0:s.replace(r,""),t),u=di.call(e.document,"base");u&&u.setAttribute("href",t+c.pathname)}function recoverEventListeners(e,t){for(var r=t.__WUJIE,s=new WeakMap,c=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,null,!1),u=c.currentNode;u;){var l=r.elementEventCacheMap.get(u);null!=l&&l.length&&(s.set(u,l),l.forEach(function(e){u.addEventListener(e.type,e.handler,e.options)})),u=c.nextNode()}r.elementEventCacheMap=s}function recoverDocumentListeners(e,t,r){var s=r.__WUJIE,c=new WeakMap,u=s.elementEventCacheMap.get(e);null!=u&&u.length&&(c.set(t,u),u.forEach(function(e){t.addEventListener(e.type,e.handler,e.options)})),s.elementEventCacheMap=c}function patchEventTimeStamp(e,t){Object.defineProperty(e.Event.prototype,"timeStamp",{get:function(){return t.document.createEvent("Event").timeStamp}})}function initIframeDom(e,t,r,s){var c=e.document,u=window.document.implementation.createHTMLDocument(""),l=c.importNode(u.documentElement,!0);c.documentElement?c.replaceChild(l,c.documentElement):c.appendChild(l),e.__WUJIE_RAW_DOCUMENT_HEAD__=c.head,e.__WUJIE_RAW_DOCUMENT_QUERY_SELECTOR__=e.Document.prototype.querySelector,e.__WUJIE_RAW_DOCUMENT_QUERY_SELECTOR_ALL__=e.Document.prototype.querySelectorAll,e.__WUJIE_RAW_DOCUMENT_CREATE_ELEMENT__=e.Document.prototype.createElement,e.__WUJIE_RAW_DOCUMENT_CREATE_TEXT_NODE__=e.Document.prototype.createTextNode,function(e,t){var r=e.document,s=r.createElement("base"),c=anchorElementGenerator(e.location.href),u=anchorElementGenerator(t);s.setAttribute("href",u.protocol+"//"+u.host+c.pathname),r.head.appendChild(s)}(e,t.url),function(e,t,r){var s=e.history,c=s.pushState,u=s.replaceState;s.pushState=function(u,l,p){var h=r+e.location.pathname+e.location.search+e.location.hash,m=getAbsolutePath(null==p?void 0:p.replace(t,""),h),y=void 0===p;c.call(s,u,l,y?void 0:m),y||(updateBase(e,t,r),syncUrlToWindow(e))},s.replaceState=function(c,l,p){var h=r+e.location.pathname+e.location.search+e.location.hash,m=getAbsolutePath(null==p?void 0:p.replace(t,""),h),y=void 0===p;u.call(s,c,l,y?void 0:m),y||(updateBase(e,t,r),syncUrlToWindow(e))}}(e,s,r),function(e){e.__WUJIE_EVENTLISTENER__=e.__WUJIE_EVENTLISTENER__||new Set,e.addEventListener=function(t,r,s){if(execHooks(e.__WUJIE.plugins,"windowAddEventListenerHook",e,t,r,s),e.__WUJIE_EVENTLISTENER__.add({type:t,listener:r,options:s}),Yo.concat(e.__WUJIE.iframeAddEventListeners).includes(t)||"object"===_typeof$2(s)&&s.targetWindow){var c="object"===_typeof$2(s)&&s.targetWindow?null==s?void 0:s.targetWindow:e;return li.call(c,t,r,s)}li.call(window.__WUJIE_RAW_WINDOW__||window,t,r,s)},e.removeEventListener=function(t,r,s){if(execHooks(e.__WUJIE.plugins,"windowRemoveEventListenerHook",e,t,r,s),e.__WUJIE_EVENTLISTENER__.forEach(function(c){c.listener===r&&c.type===t&&s==c.options&&e.__WUJIE_EVENTLISTENER__.delete(c)}),Yo.concat(e.__WUJIE.iframeAddEventListeners).includes(t)||"object"===_typeof$2(s)&&s.targetWindow){var c="object"===_typeof$2(s)&&s.targetWindow?null==s?void 0:s.targetWindow:e;return pi.call(c,t,r,s)}pi.call(window.__WUJIE_RAW_WINDOW__||window,t,r,s)}}(e),t.degrade&&function(e){var t=e.__WUJIE;e.Node.prototype.addEventListener=function(e,r,s){var c=t.elementEventCacheMap.get(this);return c?c.find(function(t){return t.type===e&&t.handler===r})||c.push({type:e,handler:r,options:s}):t.elementEventCacheMap.set(this,[{type:e,handler:r,options:s}]),ci.call(this,e,r,s)},e.Node.prototype.removeEventListener=function(e,r,s){var c=t.elementEventCacheMap.get(this);if(c){var u=null==c?void 0:c.findIndex(function(t){return t.type===e&&t.handler===r});c.splice(u,1)}return null!=c&&c.length||t.elementEventCacheMap.delete(this),ui.call(this,e,r,s)}}(e),function(e){e.addEventListener("hashchange",function(){return syncUrlToWindow(e)}),e.addEventListener("popstate",function(){syncUrlToWindow(e)})}(e),function(e){function processWindowProperty(t){var r=e[t];try{return"function"!=typeof r||isConstructable(r)?e[t]=window[t]:e[t]=window[t].bind(window),!0}catch(s){return warn(s.message),!1}}Object.getOwnPropertyNames(e).forEach(function(t){"getSelection"!==t?ei.includes(t)?processWindowProperty(t):ti.some(function(r){return!(!r.test(t)||!(t in e.parent))&&processWindowProperty(t)}):Object.defineProperty(e,t,{get:function(){return e.document[t]}})}),Object.getOwnPropertyNames(window).filter(function(e){return/^on/.test(e)}).filter(function(t){return!Xo.concat(e.__WUJIE.iframeOnEvents).includes(t)}).forEach(function(t){var r=Object.getOwnPropertyDescriptor(e,t)||{enumerable:!0,writable:!0};try{Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:!0,get:function(){return window[t]},set:r.writable||r.set?function(r){window[t]="function"==typeof r?r.bind(e):r}:void 0})}catch(s){warn(s.message)}}),execHooks(e.__WUJIE.plugins,"windowPropertyOverride",e)}(e),function(e){var t=e.__WUJIE,r=new WeakMap,s=new WeakMap;e.Document.prototype.addEventListener=function(c,u,l){if(u){var p=r.get(u),h=s.get(u);return p||(p="function"==typeof u?u.bind(this):u,r.set(u,p)),h?h.includes(c)||h.push(c):s.set(u,[c]),execHooks(e.__WUJIE.plugins,"documentAddEventListenerHook",e,c,p,l),Go.includes(c)?ci.call(this,c,p,l):t.degrade?t.document.addEventListener(c,p,l):Qo.includes(c)?window.document.addEventListener(c,p,l):Ko.includes(c)?(window.document.addEventListener(c,p,l),void t.shadowRoot.addEventListener(c,p,l)):void t.shadowRoot.addEventListener(c,p,l)}},e.Document.prototype.removeEventListener=function(c,u,l){var p=r.get(u),h=s.get(u);if(p){if(null!=h&&h.includes(c)&&(h.splice(h.indexOf(c),1),h.length||(r.delete(u),s.delete(u))),execHooks(e.__WUJIE.plugins,"documentRemoveEventListenerHook",e,c,p,l),Go.includes(c))return ui.call(this,c,p,l);if(t.degrade)return t.document.removeEventListener(c,p,l);if(Qo.includes(c))return window.document.removeEventListener(c,p,l);if(Ko.includes(c))return window.document.removeEventListener(c,p,l),void t.shadowRoot.removeEventListener(c,p,l);t.shadowRoot.removeEventListener(c,p,l)}};var c=Object.keys(e.HTMLElement.prototype).filter(function(e){return/^on/.test(e)}),u=Object.keys(e.Document.prototype).filter(function(e){return/^on/.test(e)}).filter(function(e){return!zo.includes(e)});c.filter(function(e){return u.includes(e)}).forEach(function(r){var s=Object.getOwnPropertyDescriptor(e.Document.prototype,r)||{enumerable:!0,writable:!0};try{Object.defineProperty(e.Document.prototype,r,{enumerable:s.enumerable,configurable:!0,get:function(){return t.degrade?t.document[r]:t.shadowRoot.firstElementChild[r]},set:s.writable||s.set?function(s){var c="function"==typeof s?s.bind(e.document):s;t.degrade?t.document[r]=c:t.shadowRoot.firstElementChild[r]=c}:void 0})}catch(c){warn(c.message)}});var l=Vo,p=$o,h=Fo,m=qo,y=Ho,g=Jo;Bo.concat(p,h,m,y).forEach(function(r){var s=Object.getOwnPropertyDescriptor(e.Document.prototype,r)||{enumerable:!0,writable:!0};try{Object.defineProperty(e.Document.prototype,r,{enumerable:s.enumerable,configurable:!0,get:function(){return t.proxyDocument[r]},set:void 0})}catch(c){warn(c.message)}}),g.forEach(function(s){var c=Object.getOwnPropertyDescriptor(e.Document.prototype,s)||{enumerable:!0,writable:!0};try{Object.defineProperty(e.Document.prototype,s,{enumerable:c.enumerable,configurable:!0,get:function(){return(t.degrade?t:window).document[s]},set:c.writable||c.set?function(c){(t.degrade?t:window).document.removeEventListener(s,r.get(c)),(t.degrade?t:window).document.addEventListener(s,"function"==typeof c?c.bind(e.document):c),r.set(c,c.bind(e.document))}:void 0})}catch(u){warn(u.message)}}),l.forEach(function(r){Object.defineProperty(e.document,r,{enumerable:!0,configurable:!0,get:function(){return t.proxyDocument[r]},set:void 0})}),execHooks(e.__WUJIE.plugins,"documentPropertyOverride",e)}(e),function(e){var t=e.Node.prototype.getRootNode,r=e.Node.prototype.appendChild,s=e.Node.prototype.insertBefore,c=e.Node.prototype.removeChild;e.Node.prototype.getRootNode=function(r){var s=t.call(this,r);return s===e.__WUJIE.shadowRoot?e.document:s},e.Node.prototype.appendChild=function(t){var s=r.call(this,t);return patchElementEffect(t,e),s},e.Node.prototype.insertBefore=function(t,r){var c=s.call(this,t,r);return patchElementEffect(t,e),c},e.Node.prototype.removeChild=function(t){var r;try{r=c.call(this,t)}catch(u){var s;t.isConnected&&isFunction(null===(s=t.parentNode)||void 0===s?void 0:s.removeChild)&&t.parentNode.removeChild(t)}return patchElementEffect(t,e),r}}(e),function(e){fixElementCtrSrcOrHref(e,e.HTMLImageElement,"src"),fixElementCtrSrcOrHref(e,e.HTMLAnchorElement,"href"),fixElementCtrSrcOrHref(e,e.HTMLSourceElement,"src"),fixElementCtrSrcOrHref(e,e.HTMLLinkElement,"href"),fixElementCtrSrcOrHref(e,e.HTMLScriptElement,"src"),fixElementCtrSrcOrHref(e,e.HTMLMediaElement,"src")}(e)}function stopIframeLoading(e,t){var r=e.contentWindow,s=r.document,c=Date.now()+5e3;return new Promise(function(u){!function loop(){setTimeout(function(){var l;try{l=r.document}catch(Ci){l=null}if(l&&l!=s||!(Date.now()<c))if(t){var p=r.location.href;l.open(),l.close();var h=Date.now()+1e3,_loop=function(){if(Date.now()>h)return vi(),e.src=t.mainHostPath,void stopIframeLoading(e,!1).then(u);r.location.href===p?setTimeout(_loop,1):u()};_loop()}else r.stop?r.stop():l.execCommand("Stop"),u();else loop()},1)}()})}function patchElementEffect(e,t){var r=t.__WUJIE.proxyLocation;if(!e._hasPatch){try{Object.defineProperties(e,{baseURI:{configurable:!0,get:function(){return r.protocol+"//"+r.host+r.pathname},set:void 0},ownerDocument:{configurable:!0,get:function(){return t.document}},_hasPatch:{get:function(){return!0}}})}catch(s){}execHooks(t.__WUJIE.plugins,"patchElementHook",e,t)}}function insertScriptToIframe(e,t,r){var s=e,c=s.src,u=s.module,l=s.content,p=s.crossorigin,h=s.crossoriginType,m=s.async,y=s.attrs,g=s.callback,v=s.onload,b=t.document.createElement("script"),w=t.document.createElement("script"),E=t.__WUJIE,_=E.replace,O=E.plugins,S=E.proxyLocation,T=function(e){var t=e.plugins,r=e.replace;return function(e){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",c=arguments.length>2?arguments[2]:void 0;return compose(t.map(function(e){return e.jsLoader}))(r?r(e):e,s,c)}}({plugins:O,replace:_}),x=T(l,c,getCurUrl(S));if(y&&Object.keys(y).filter(function(t){return!Object.keys(e).includes(t)}).forEach(function(e){return b.setAttribute(e,String(y[e]))}),l){t.__WUJIE.degrade||u||"importmap"===(null==y?void 0:y.type)||(x="(function(window, self, global, location) {\n      ".concat(x,"\n}).bind(window.__WUJIE.proxy)(\n  window.__WUJIE.proxy,\n  window.__WUJIE.proxy,\n  window.__WUJIE.proxy,\n  window.__WUJIE.proxyLocation,\n);"));var A=Object.getOwnPropertyDescriptor(b,"src");if(null!=A&&A.configurable||!A)try{Object.defineProperty(b,"src",{get:function(){return c||""}})}catch(P){}}else c&&b.setAttribute("src",c),p&&b.setAttribute("crossorigin",h);u&&b.setAttribute("type","module"),b.textContent=x||"",w.textContent="if(window.__WUJIE.execQueue && window.__WUJIE.execQueue.length){ window.__WUJIE.execQueue.shift()()}";var R=di.call(t.document,"head"),execNextScript=function(){return!m&&R.appendChild(w)},afterExecScript=function(){null==v||v(),execNextScript()};if(/^<!DOCTYPE html/i.test(x))return error(Xn,e),execNextScript();r&&setTagToScript(b,getTagFromScript(r));var C=!l&&c;C&&(b.onload=afterExecScript,b.onerror=afterExecScript),R.appendChild(b),null==g||g(t),execHooks(O,"appendOrInsertElementHook",b,t,r),!C&&afterExecScript()}function renderIframeReplaceApp(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=window.document.createElement("iframe");setAttrsToElement(s,_objectSpread$4(_objectSpread$4({},r),{},{src:e,style:["height:100%;width:100%",r.style].join(";")})),renderElementToContainer(s,t)}var yi=_slicedToArray(function(){var e="wujie:disableSandboxEmptyPageURL",t=!1;try{t="true"===localStorage.getItem(e)}catch(s){}if(t||"undefined"==typeof URL||"function"!=typeof URL.createObjectURL)return[function(){return""},function(){}];var r="";return[function(){if(t)return"";if(r)return r;var e=new Blob(["<!DOCTYPE html><html><head></head><body></body></html>"],{type:"text/html"});return r=URL.createObjectURL(e)},function(){t=!0;try{localStorage.setItem(e,"true")}catch(s){}}]}(),2),gi=yi[0],vi=yi[1];function iframeGenerator(e,t,r,s,c){var u=t&&t.src,l=!1;u||(l=!!(u=gi()),u||(u=r));var p=window.document.createElement("iframe");setAttrsToElement(p,_objectSpread$4(_objectSpread$4({style:"display: none"},t),{},_defineProperty$1({src:u,name:e.id},Fn,""))),window.document.body.appendChild(p);var h=p.contentWindow;return patchIframeVariable(h,e,s),e.iframeReady=stopIframeLoading(p,l&&{mainHostPath:r}).then(function(){h.__WUJIE||patchIframeVariable(h,e,s),initIframeDom(h,e,r,s),isMatchSyncQueryById(h.__WUJIE.id)||h.history.replaceState(null,"",r+c)}),p}function locationHrefSet(e,t,r){var s=e.contentWindow.__WUJIE,c=s.shadowRoot,u=s.id,l=s.degrade,p=s.document,h=s.degradeAttrs,m=t;if(!/^http/.test(m)){var y=anchorElementGenerator(m);m=r+y.pathname+y.search+y.hash,y=null}if(e.contentWindow.__WUJIE.hrefFlag=!0,l){var g=di.call(e.contentDocument,"body");renderElementToContainer(p.documentElement,g),renderIframeReplaceApp(window.decodeURIComponent(m),getDegradeIframe(u).parentElement,h)}else renderIframeReplaceApp(m,c.host.parentElement,h);return function(e,t){var r=anchorElementGenerator(window.location.href),s=getAnchorElementQueryMap(r);s[e]=window.encodeURIComponent(t);var c="?"+Object.keys(s).map(function(e){return e+"="+s[e]}).join("&");r.search=c,window.history.pushState(null,"",r.href),r=null}(u,m),!0}function proxyGenerator(e,t,r,s){return{proxyWindow:new Proxy(e.contentWindow,{get:function(e,t){if("location"===t)return e.__WUJIE.proxyLocation;if("self"===t||"window"===t&&Object.getOwnPropertyDescriptor(window,"window").get)return e.__WUJIE.proxy;if("__WUJIE_RAW_DOCUMENT_QUERY_SELECTOR__"===t||"__WUJIE_RAW_DOCUMENT_QUERY_SELECTOR_ALL__"===t)return e[t];var r=Object.getOwnPropertyDescriptor(e,t);return!1===(null==r?void 0:r.configurable)&&!1===(null==r?void 0:r.writable)?e[t]:getTargetValue(e,t)},set:function(e,t,r){return function(e,t){!isCallable(t)||isBoundedFunction(t)||isConstructable(t)||(ao.has(e)?ao.get(e).has(t)||ao.get(e).set(t,t):(ao.set(e,new WeakMap),ao.get(e).set(t,t)))}(e,r),e[t]=r,!0},has:function(e,t){return t in e}}),proxyDocument:new Proxy({},{get:function(t,r){var s=window.document,c=e.contentWindow.__WUJIE,u=c.shadowRoot,l=c.proxyLocation;u||stopMainAppRun();var p=e.contentWindow.__WUJIE_RAW_DOCUMENT_CREATE_ELEMENT__,h=e.contentWindow.__WUJIE_RAW_DOCUMENT_CREATE_TEXT_NODE__;if("createElement"===r||"createTextNode"===r)return new Proxy(s[r],{apply:function(t,s,c){var u=("createElement"===r?p:h).apply(e.contentDocument,c);return patchElementEffect(u,e.contentWindow),u}});if("documentURI"===r||"URL"===r)return l.href;if("getElementsByTagName"===r||"getElementsByClassName"===r||"getElementsByName"===r)return new Proxy(u.querySelectorAll,{apply:function(t,s,c){var l,p=c[0];if(s!==e.contentDocument)return s[r].apply(s,c);if("getElementsByTagName"===r&&"script"===p)return e.contentDocument.scripts;"getElementsByClassName"===r&&(p="."+p),"getElementsByName"===r&&(p='[name="'.concat(p,'"]'));try{l=t.call(u,p)}catch(h){l=[]}return l}});if("getElementById"===r)return new Proxy(u.querySelector,{apply:function(t,s,c){var l;if(s!==e.contentDocument)return null===(l=s[r])||void 0===l?void 0:l.apply(s,c);try{return t.call(u,'[id="'.concat(c[0],'"]'))||e.contentWindow.__WUJIE_RAW_DOCUMENT_QUERY_SELECTOR__.call(e.contentWindow.document,"#".concat(c[0]))}catch(p){return warn("不支持document.getElementById()传入特殊字符，请参考document.querySelector文档"),null}}});if("querySelector"===r||"querySelectorAll"===r){var m={querySelector:"__WUJIE_RAW_DOCUMENT_QUERY_SELECTOR__",querySelectorAll:"__WUJIE_RAW_DOCUMENT_QUERY_SELECTOR_ALL__"};return new Proxy(u[r],{apply:function(t,s,c){var l;return s!==e.contentDocument?null===(l=s[r])||void 0===l?void 0:l.apply(s,c):t.apply(u,c)||("base"===c[0]?null:e.contentWindow[m[r]].call(e.contentWindow.document,c[0]))}})}if("documentElement"===r||"scrollingElement"===r)return u.firstElementChild;if("forms"===r)return u.querySelectorAll("form");if("images"===r)return u.querySelectorAll("img");if("links"===r)return u.querySelectorAll("a");var y,g=$o,v=Fo,b=qo,w=Ho;return Vo.concat(g).includes(r.toString())?"activeElement"===r&&null===u.activeElement?u.body:u[r]:v.includes(r.toString())?null!==(y=getTargetValue(u,r))&&void 0!==y?y:getTargetValue(s,r):b.includes(r.toString())?s[r]:w.includes(r.toString())?getTargetValue(s,r):void 0}}),proxyLocation:new Proxy({},{get:function(c,u){var l=e.contentWindow.location;return"host"===u||"hostname"===u||"protocol"===u||"port"===u||"origin"===u?t[u]:"href"===u?l[u].replace(r,s):"reload"===u?(warn(zn),function(){return null}):"replace"===u?new Proxy(l[u],{apply:function(e,t,c){var u;return e.call(l,null===(u=c[0])||void 0===u?void 0:u.replace(s,r))}}):getTargetValue(l,u)},set:function(t,r,c){return"href"===r?locationHrefSet(e,c,s):(e.contentWindow.location[r]=c,!0)},ownKeys:function(){return Object.keys(e.contentWindow.location).filter(function(e){return"reload"!==e})},getOwnPropertyDescriptor:function(e,t){return{enumerable:!0,configurable:!0,value:this[t]}}})}}function ownKeys$3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}function _objectSpread$3(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys$3(Object(r),!0).forEach(function(t){_defineProperty$1(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys$3(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var bi=function(e){if(null!==(e=window.__WUJIE_INJECT)&&void 0!==e&&e.appEventObjMap)return window.__WUJIE_INJECT.appEventObjMap;var t=window.__POWERED_BY_WUJIE__?window.__WUJIE.inject.appEventObjMap:new Map;return window.__WUJIE_INJECT=_objectSpread$3(_objectSpread$3({},window.__WUJIE_INJECT),{},{appEventObjMap:t}),t}(),wi=function(){return _createClass(function EventBus2(e){_classCallCheck(this,EventBus2),this.id=e,this.$clear(),bi.get(this.id)||bi.set(this.id,{}),this.eventObj=bi.get(this.id)},[{key:"$on",value:function(e,t){var r=this.eventObj[e];return r?(r.includes(t)||r.push(t),this):(this.eventObj[e]=[t],this)}},{key:"$onAll",value:function(e){return this.$on(Gn,e)}},{key:"$once",value:function(e,t){var r=function(){this.$off(e,r),t.apply(void 0,arguments)}.bind(this);this.$on(e,r)}},{key:"$off",value:function(e,t){var r=this.eventObj[e];if(!e||!r||!r.length)return warn("".concat(e," ").concat(Yn)),this;for(var s=r.length;s--;)if(r[s]===t){r.splice(s,1);break}return this}},{key:"$offAll",value:function(e){return this.$off(Gn,e)}},{key:"$emit",value:function(e){var t=[],r=[];if(bi.forEach(function(s){s[e]&&(t=t.concat(s[e])),s[Gn]&&(r=r.concat(s[Gn]))}),!e||0===t.length&&0===r.length)warn("".concat(e," ").concat(Yn));else try{for(var s=arguments.length,c=new Array(s>1?s-1:0),u=1;u<s;u++)c[u-1]=arguments[u];for(var l=0,p=t.length;l<p;l++){var h;(h=t)[l].apply(h,c)}for(var m=0,y=r.length;m<y;m++){var g;(g=r)[m].apply(g,[e].concat(c))}}catch(v){error(v)}return this}},{key:"$clear",value:function(){var e,t=null!==(e=bi.get(this.id))&&void 0!==e?e:{};return Object.keys(t).forEach(function(e){return delete t[e]}),this}}])}();function ownKeys$2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}function _objectSpread$2(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys$2(Object(r),!0).forEach(function(t){_defineProperty$1(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys$2(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var Ei=function(){return _createClass(function Wujie2(e){_classCallCheck(this,Wujie2),_defineProperty$1(this,"elementEventCacheMap",new WeakMap),window.__POWERED_BY_WUJIE__?this.inject=window.__WUJIE.inject:this.inject={idToSandboxMap:Wo,appEventObjMap:bi,mainHostPath:window.location.protocol+"//"+window.location.host};var t=e.name,r=e.url,s=e.attrs,c=e.fiber,u=e.degradeAttrs,l=e.degrade,p=e.lifecycles,h=e.plugins;this.id=t,this.fiber=c,this.degrade=l||!ro,this.bus=new wi(this.id),this.url=r,this.degradeAttrs=u,this.provide={bus:this.bus},this.styleSheetElements=[],this.execQueue=[],this.lifecycles=p,this.plugins=getPlugins(h),this.iframeAddEventListeners=e.iframeAddEventListeners,this.iframeOnEvents=e.iframeOnEvents;var m,y,g,v=appRouteParse(r),b=v.urlElement,w=v.appHostPath,E=v.appRoutePath,_=this.inject.mainHostPath;if(this.iframe=iframeGenerator(this,s,_,w,E),this.degrade){var O=function(e,t,r,s){var c={},u=e.contentWindow.__WUJIE;Object.defineProperties(c,{createElement:{get:function(){return function(){for(var t=arguments.length,r=new Array(t),s=0;s<t;s++)r[s]=arguments[s];var c=e.contentWindow.__WUJIE_RAW_DOCUMENT_CREATE_ELEMENT__.apply(e.contentDocument,r);return patchElementEffect(c,e.contentWindow),c}}},createTextNode:{get:function(){return function(){for(var t=arguments.length,r=new Array(t),s=0;s<t;s++)r[s]=arguments[s];var c=e.contentWindow.__WUJIE_RAW_DOCUMENT_CREATE_TEXT_NODE__.apply(e.contentDocument,r);return patchElementEffect(c,e.contentWindow),c}}},documentURI:{get:function(){return u.proxyLocation.href}},URL:{get:function(){return u.proxyLocation.href}},getElementsByTagName:{get:function(){return function(){var t=arguments.length<=0?void 0:arguments[0];return"script"===t?e.contentDocument.scripts:u.document.getElementsByTagName(t)}}},getElementById:{get:function(){return function(){var t=arguments.length<=0?void 0:arguments[0];return u.document.getElementById(t)||e.contentWindow.__WUJIE_RAW_DOCUMENT_HEAD__.querySelector("#".concat(t))}}}});var l=Mo,p=Vo,h=$o,m=Fo,y=qo,g=Ho;Bo.filter(function(e){return!l.includes(e)}).concat(p,h,m,y,g).forEach(function(e){Object.defineProperty(c,e,{get:function(){var t,r=null===(t=u.document)||void 0===t?void 0:t[e];return isCallable(r)?r.bind(u.document):r}})});var v={},b=e.contentWindow.location,w=Object.keys(b),E=["host","hostname","port","protocol","port"];return E.forEach(function(e){v[e]=t[e]}),Object.defineProperties(v,{href:{get:function(){return b.href.replace(r,s)},set:function(t){locationHrefSet(e,t,s)}},reload:{get:function(){return warn(zn),function(){return null}}}}),w.filter(function(e){return!E.concat(["href","reload"]).includes(e)}).forEach(function(e){Object.defineProperty(v,e,{get:function(){return isCallable(b[e])?b[e].bind(b):b[e]}})}),{proxyDocument:c,proxyLocation:v}}(this.iframe,b,_,w),S=O.proxyDocument,T=O.proxyLocation;this.proxyDocument=S,this.proxyLocation=T}else{var x=proxyGenerator(this.iframe,b,_,w),A=x.proxyWindow,R=x.proxyDocument,C=x.proxyLocation;this.proxy=A,this.proxyDocument=R,this.proxyLocation=C}this.provide.location=this.proxyLocation,m=this.id,y=this,(g=Wo.get(m))?Wo.set(m,_objectSpread$7(_objectSpread$7({},g),{},{wujie:y})):Wo.set(m,{wujie:y})},[{key:"active",value:(s=_asyncToGenerator$1(Mn.mark(function _callee(e){var t,r,s,c,u,l,p,h,m,y,g,v,b,w,E,_,O=this;return Mn.wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return t=e.sync,r=e.url,s=e.el,c=e.template,u=e.props,l=e.alive,p=e.prefix,h=e.fetch,m=e.replace,this.url=r,this.sync=t,this.alive=l,this.hrefFlag=!1,this.prefix=null!=p?p:this.prefix,this.replace=null!=m?m:this.replace,this.provide.props=null!=u?u:this.provide.props,this.activeFlag=!0,S.next=11,this.iframeReady;case 11:if(y=this.iframe.contentWindow,(g=h?function(e,t){return h("string"==typeof e?getAbsolutePath(e,O.proxyLocation.href):e,t)}:this.fetch)&&(y.fetch=g,this.fetch=g),this.execFlag&&this.alive||syncUrlToIframe(y),syncUrlToWindow(y),this.template=null!=c?c:this.template,!this.degrade){S.next=38;break}if(v=di.call(y.document,"body"),b=initRenderIframeAndContainer(this.id,null!=s?s:v,this.degradeAttrs),w=b.iframe,E=b.container,this.el=E,s&&clearChild(v),patchEventTimeStamp(w.contentWindow,y),w.contentWindow.onunload=function(){O.unmount()},!this.document){S.next=34;break}if(!this.alive){S.next=29;break}w.contentDocument.replaceChild(this.document.documentElement,w.contentDocument.documentElement),recoverEventListeners(w.contentDocument.documentElement,y),S.next=32;break;case 29:return S.next=31,renderTemplateToIframe(w.contentDocument,this.iframe.contentWindow,this.template);case 31:recoverDocumentListeners(this.document.documentElement,w.contentDocument.documentElement,y);case 32:S.next=36;break;case 34:return S.next=36,renderTemplateToIframe(w.contentDocument,this.iframe.contentWindow,this.template);case 36:return this.document=w.contentDocument,S.abrupt("return");case 38:if(!this.shadowRoot){S.next=44;break}if(this.el=renderElementToContainer(this.shadowRoot.host,s),!this.alive){S.next=42;break}return S.abrupt("return");case 42:S.next=46;break;case 44:_=di.call(y.document,"body"),this.el=renderElementToContainer(createWujieWebComponent(this.id),null!=s?s:_);case 46:return S.next=48,renderTemplateToShadowRoot(this.shadowRoot,y,this.template);case 48:this.patchCssRules(),this.provide.shadowRoot=this.shadowRoot;case 50:case"end":return S.stop()}},_callee,this)})),function(e){return s.apply(this,arguments)})},{key:"requestIdleCallback",value:function(e){var t=this;return co(function(){t.iframe&&e.apply(t)})}},{key:"start",value:(r=_asyncToGenerator$1(Mn.mark(function _callee2(e){var t,r,s,c,u,l,p,h,m,y=this;return Mn.wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return this.execFlag=!0,g.next=3,e();case 3:if(t=g.sent,this.iframe){g.next=6;break}return g.abrupt("return");case 6:return(r=this.iframe.contentWindow).__POWERED_BY_WUJIE__=!0,s=getPresetLoaders("jsBeforeLoaders",this.plugins),c=getPresetLoaders("jsAfterLoaders",this.plugins),u=[],l=[],p=[],t.forEach(function(e){e.defer?p.push(e):e.async?l.push(e):u.push(e)}),s.forEach(function(e){y.execQueue.push(function(){return y.fiber?y.requestIdleCallback(function(){return insertScriptToIframe(e,r)}):insertScriptToIframe(e,r)})}),u.concat(p).forEach(function(e){y.execQueue.push(function(){return e.contentPromise.then(function(t){return y.fiber?y.requestIdleCallback(function(){return insertScriptToIframe(_objectSpread$2(_objectSpread$2({},e),{},{content:t}),r)}):insertScriptToIframe(_objectSpread$2(_objectSpread$2({},e),{},{content:t}),r)})})}),l.forEach(function(e){e.contentPromise.then(function(t){y.fiber?y.requestIdleCallback(function(){return insertScriptToIframe(_objectSpread$2(_objectSpread$2({},e),{},{content:t}),r)}):insertScriptToIframe(_objectSpread$2(_objectSpread$2({},e),{},{content:t}),r)})}),this.execQueue.push(this.fiber?function(){return y.requestIdleCallback(function(){return y.mount()})}:function(){return y.mount()}),h=function(){var e;eventTrigger(r.document,"DOMContentLoaded"),eventTrigger(r,"DOMContentLoaded"),null===(e=y.execQueue.shift())||void 0===e||e()},this.execQueue.push(this.fiber?function(){return y.requestIdleCallback(h)}:h),c.forEach(function(e){y.execQueue.push(function(){return y.fiber?y.requestIdleCallback(function(){return insertScriptToIframe(e,r)}):insertScriptToIframe(e,r)})}),m=function(){var e;eventTrigger(r.document,"readystatechange"),eventTrigger(r,"load"),null===(e=y.execQueue.shift())||void 0===e||e()},this.execQueue.push(this.fiber?function(){return y.requestIdleCallback(m)}:m),!this.alive&&isFunction(this.iframe.contentWindow.__WUJIE_UNMOUNT)||removeLoading(this.el),this.execQueue.shift()(),g.abrupt("return",new Promise(function(e){y.execQueue.push(function(){var t;e(),null===(t=y.execQueue.shift())||void 0===t||t()})}));case 26:case"end":return g.stop()}},_callee2,this)})),function(e){return r.apply(this,arguments)})},{key:"mount",value:function(){var e;if(!this.mountFlag){var t,r,s,c,u,l;if(isFunction(this.iframe.contentWindow.__WUJIE_MOUNT))removeLoading(this.el),null===(t=this.lifecycles)||void 0===t||null===(r=t.beforeMount)||void 0===r||r.call(t,this.iframe.contentWindow),this.iframe.contentWindow.__WUJIE_MOUNT(),null===(s=this.lifecycles)||void 0===s||null===(c=s.afterMount)||void 0===c||c.call(s,this.iframe.contentWindow),this.mountFlag=!0;if(this.alive)null===(u=this.lifecycles)||void 0===u||null===(l=u.activated)||void 0===l||l.call(u,this.iframe.contentWindow);null===(e=this.execQueue.shift())||void 0===e||e()}}},{key:"unmount",value:(t=_asyncToGenerator$1(Mn.mark(function _callee3(){var e,t,r,s,c,u,l;return Mn.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(this.activeFlag=!1,clearInactiveAppUrl(),this.alive&&(null===(e=this.lifecycles)||void 0===e||null===(t=e.deactivated)||void 0===t||t.call(e,this.iframe.contentWindow)),this.mountFlag){p.next=5;break}return p.abrupt("return");case 5:if(!isFunction(this.iframe.contentWindow.__WUJIE_UNMOUNT)||this.alive||this.hrefFlag){p.next=15;break}return null===(r=this.lifecycles)||void 0===r||null===(s=r.beforeUnmount)||void 0===s||s.call(r,this.iframe.contentWindow),p.next=9,this.iframe.contentWindow.__WUJIE_UNMOUNT();case 9:null===(c=this.lifecycles)||void 0===c||null===(u=c.afterUnmount)||void 0===u||u.call(c,this.iframe.contentWindow),this.mountFlag=!1,null===(l=this.bus)||void 0===l||l.$clear(),this.degrade||(clearChild(this.shadowRoot),removeEventListener$1(this.head),removeEventListener$1(this.body)),clearChild(this.head),clearChild(this.body);case 15:case"end":return p.stop()}},_callee3,this)})),function(){return t.apply(this,arguments)})},{key:"destroy",value:(e=_asyncToGenerator$1(Mn.mark(function _callee4(){var e,t;return Mn.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.unmount();case 2:this.bus.$clear(),this.shadowRoot=null,this.proxy=null,this.proxyDocument=null,this.proxyLocation=null,this.execQueue=null,this.provide=null,this.degradeAttrs=null,this.styleSheetElements=null,this.bus=null,this.replace=null,this.fetch=null,this.execFlag=null,this.mountFlag=null,this.hrefFlag=null,this.document=null,this.head=null,this.body=null,this.elementEventCacheMap=null,this.lifecycles=null,this.plugins=null,this.provide=null,this.inject=null,this.execQueue=null,this.prefix=null,this.iframeAddEventListeners=null,this.iframeOnEvents=null,this.el&&(clearChild(this.el),this.el=null),this.iframe&&(null!=(t=this.iframe.contentWindow)&&t.__WUJIE_EVENTLISTENER__&&t.__WUJIE_EVENTLISTENER__.forEach(function(e){t.removeEventListener(e.type,e.listener,e.options)}),null===(e=this.iframe.parentNode)||void 0===e||e.removeChild(this.iframe),this.iframe=null),deleteWujieById(this.id);case 32:case"end":return r.stop()}},_callee4,this)})),function(){return e.apply(this,arguments)})},{key:"rebuildStyleSheets",value:function(){var e=this;this.styleSheetElements&&this.styleSheetElements.length&&this.styleSheetElements.forEach(function(t){ri.call(e.degrade?e.document.head:e.shadowRoot.head,t)}),this.patchCssRules()}},{key:"patchCssRules",value:function(){if(!this.degrade&&!this.shadowRoot.host.hasAttribute(Vn)){var e=_slicedToArray(getPatchStyleElements(Array.from(this.iframe.contentDocument.querySelectorAll("style")).map(function(e){return e.sheet})),2),t=e[0],r=e[1];t&&(this.shadowRoot.head.appendChild(t),this.styleSheetElements.push(t)),r&&this.shadowRoot.host.appendChild(r),(t||r)&&this.shadowRoot.host.setAttribute(Vn,"")}}}]);var e,t,r,s}();function ownKeys$1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}var _i=new wi(Date.now().toString());function startApp(e){return _startApp.apply(this,arguments)}function _startApp(){return(_startApp=_asyncToGenerator$1(Mn.mark(function _callee2(e){var t,r,s,c,u,l,p,h,m,y,g,v,b,w,E,_,O,S,T,x,A,R,C,P,k,j,L,I,U,N,D,W,M,B,$,F,q,H,J,V,G;return Mn.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:if(s=getWujieById(e.name),c=getOptionsById(e.name),u=mergeOptions(e,c),l=u.name,p=u.url,h=u.html,m=u.replace,y=u.fetch,g=u.props,v=u.attrs,b=u.degradeAttrs,w=u.fiber,E=u.alive,_=u.degrade,O=u.sync,S=u.prefix,T=u.el,x=u.loading,A=u.plugins,R=u.lifecycles,C=u.iframeAddEventListeners,P=u.iframeOnEvents,!s){z.next=41;break}if(s.plugins=getPlugins(A),s.lifecycles=R,k=s.iframe.contentWindow,!s.preload){z.next=11;break}return z.next=11,s.preload;case 11:if(!E){z.next=26;break}return z.next=14,s.active({url:p,sync:O,prefix:S,el:T,props:g,alive:E,fetch:y,replace:m});case 14:if(s.execFlag){z.next=22;break}return null===(I=s.lifecycles)||void 0===I||null===(U=I.beforeLoad)||void 0===U||U.call(I,s.iframe.contentWindow),z.next=18,importHTML({url:p,html:h,opts:{fetch:y||window.fetch,plugins:s.plugins,loadError:s.lifecycles.loadError,fiber:w}});case 18:return N=z.sent,D=N.getExternalScripts,z.next=22,s.start(D);case 22:return null===(j=s.lifecycles)||void 0===j||null===(L=j.activated)||void 0===L||L.call(j,s.iframe.contentWindow),z.abrupt("return",function(){return s.destroy()});case 26:if(!isFunction(k.__WUJIE_MOUNT)){z.next=39;break}return z.next=29,s.unmount();case 29:return z.next=31,s.active({url:p,sync:O,prefix:S,el:T,props:g,alive:E,fetch:y,replace:m});case 31:return s.rebuildStyleSheets(),null===(W=s.lifecycles)||void 0===W||null===(M=W.beforeMount)||void 0===M||M.call(W,s.iframe.contentWindow),k.__WUJIE_MOUNT(),null===(B=s.lifecycles)||void 0===B||null===($=B.afterMount)||void 0===$||$.call(B,s.iframe.contentWindow),s.mountFlag=!0,z.abrupt("return",function(){return s.destroy()});case 39:return z.next=41,s.destroy();case 41:return addLoading(T,x),F=new Ei({name:l,url:p,attrs:v,degradeAttrs:b,fiber:w,degrade:_,plugins:A,lifecycles:R,iframeAddEventListeners:C,iframeOnEvents:P}),null===(t=F.lifecycles)||void 0===t||null===(r=t.beforeLoad)||void 0===r||r.call(t,F.iframe.contentWindow),z.next=46,importHTML({url:p,html:h,opts:{fetch:y||window.fetch,plugins:F.plugins,loadError:F.lifecycles.loadError,fiber:w}});case 46:return q=z.sent,H=q.template,J=q.getExternalScripts,V=q.getExternalStyleSheets,z.next=52,processCssLoader(F,H,V);case 52:return G=z.sent,z.next=55,F.active({url:p,sync:O,prefix:S,template:G,el:T,props:g,alive:E,fetch:y,replace:m});case 55:return z.next=57,F.start(J);case 57:return z.abrupt("return",function(){return F.destroy()});case 58:case"end":return z.stop()}},_callee2)}))).apply(this,arguments)}function destroyApp(e){var t=getWujieById(e);t&&t.destroy()}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach(function(t){_defineProperty(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function _regeneratorRuntime(){_regeneratorRuntime=function(){return t};var e,t={},r=Object.prototype,s=r.hasOwnProperty,c=Object.defineProperty||function(e,t,r){e[t]=r.value},u="function"==typeof Symbol?Symbol:{},l=u.iterator||"@@iterator",p=u.asyncIterator||"@@asyncIterator",h=u.toStringTag||"@@toStringTag";function define(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{define({},"")}catch(S){define=function(e,t,r){return e[t]=r}}function wrap(e,t,r,s){var u=t&&t.prototype instanceof Generator?t:Generator,l=Object.create(u.prototype),p=new Context(s||[]);return c(l,"_invoke",{value:makeInvokeMethod(e,r,p)}),l}function tryCatch(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(s){return{type:"throw",arg:s}}}t.wrap=wrap;var m="suspendedStart",y="suspendedYield",g="executing",v="completed",b={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var w={};define(w,l,function(){return this});var E=Object.getPrototypeOf,_=E&&E(E(values([])));_&&_!==r&&s.call(_,l)&&(w=_);var O=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(w);function defineIteratorMethods(e){["next","throw","return"].forEach(function(t){define(e,t,function(e){return this._invoke(t,e)})})}function AsyncIterator(e,t){function invoke(r,c,u,l){var p=tryCatch(e[r],e,c);if("throw"!==p.type){var h=p.arg,m=h.value;return m&&"object"==_typeof(m)&&s.call(m,"__await")?t.resolve(m.__await).then(function(e){invoke("next",e,u,l)},function(e){invoke("throw",e,u,l)}):t.resolve(m).then(function(e){h.value=e,u(h)},function(e){return invoke("throw",e,u,l)})}l(p.arg)}var r;c(this,"_invoke",{value:function(e,s){function callInvokeWithMethodAndArg(){return new t(function(t,r){invoke(e,s,t,r)})}return r=r?r.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(t,r,s){var c=m;return function(u,l){if(c===g)throw Error("Generator is already running");if(c===v){if("throw"===u)throw l;return{value:e,done:!0}}for(s.method=u,s.arg=l;;){var p=s.delegate;if(p){var h=maybeInvokeDelegate(p,s);if(h){if(h===b)continue;return h}}if("next"===s.method)s.sent=s._sent=s.arg;else if("throw"===s.method){if(c===m)throw c=v,s.arg;s.dispatchException(s.arg)}else"return"===s.method&&s.abrupt("return",s.arg);c=g;var w=tryCatch(t,r,s);if("normal"===w.type){if(c=s.done?v:y,w.arg===b)continue;return{value:w.arg,done:s.done}}"throw"===w.type&&(c=v,s.method="throw",s.arg=w.arg)}}}function maybeInvokeDelegate(t,r){var s=r.method,c=t.iterator[s];if(c===e)return r.delegate=null,"throw"===s&&t.iterator.return&&(r.method="return",r.arg=e,maybeInvokeDelegate(t,r),"throw"===r.method)||"return"!==s&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+s+"' method")),b;var u=tryCatch(c,t.iterator,r.arg);if("throw"===u.type)return r.method="throw",r.arg=u.arg,r.delegate=null,b;var l=u.arg;return l?l.done?(r[t.resultName]=l.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,b):l:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,b)}function pushTryEntry(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function resetTryEntry(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function Context(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(pushTryEntry,this),this.reset(!0)}function values(t){if(t||""===t){var r=t[l];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var c=-1,u=function next(){for(;++c<t.length;)if(s.call(t,c))return next.value=t[c],next.done=!1,next;return next.value=e,next.done=!0,next};return u.next=u}}throw new TypeError(_typeof(t)+" is not iterable")}return GeneratorFunction.prototype=GeneratorFunctionPrototype,c(O,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),c(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,h,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===GeneratorFunction||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,GeneratorFunctionPrototype):(e.__proto__=GeneratorFunctionPrototype,define(e,h,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,p,function(){return this}),t.AsyncIterator=AsyncIterator,t.async=function(e,r,s,c,u){void 0===u&&(u=Promise);var l=new AsyncIterator(wrap(e,r,s,c),u);return t.isGeneratorFunction(r)?l:l.next().then(function(e){return e.done?e.value:l.next()})},defineIteratorMethods(O),define(O,h,"Generator"),define(O,l,function(){return this}),define(O,"toString",function(){return"[object Generator]"}),t.keys=function(e){var t=Object(e),r=[];for(var s in t)r.push(s);return r.reverse(),function next(){for(;r.length;){var e=r.pop();if(e in t)return next.value=e,next.done=!1,next}return next.done=!0,next}},t.values=values,Context.prototype={constructor:Context,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(resetTryEntry),!t)for(var r in this)"t"===r.charAt(0)&&s.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function handle(s,c){return l.type="throw",l.arg=t,r.next=s,c&&(r.method="next",r.arg=e),!!c}for(var c=this.tryEntries.length-1;c>=0;--c){var u=this.tryEntries[c],l=u.completion;if("root"===u.tryLoc)return handle("end");if(u.tryLoc<=this.prev){var p=s.call(u,"catchLoc"),h=s.call(u,"finallyLoc");if(p&&h){if(this.prev<u.catchLoc)return handle(u.catchLoc,!0);if(this.prev<u.finallyLoc)return handle(u.finallyLoc)}else if(p){if(this.prev<u.catchLoc)return handle(u.catchLoc,!0)}else{if(!h)throw Error("try statement without catch or finally");if(this.prev<u.finallyLoc)return handle(u.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var c=this.tryEntries[r];if(c.tryLoc<=this.prev&&s.call(c,"finallyLoc")&&this.prev<c.finallyLoc){var u=c;break}}u&&("break"===e||"continue"===e)&&u.tryLoc<=t&&t<=u.finallyLoc&&(u=null);var l=u?u.completion:{};return l.type=e,l.arg=t,u?(this.method="next",this.next=u.finallyLoc,b):this.complete(l)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),b},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),resetTryEntry(r),b}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var s=r.completion;if("throw"===s.type){var c=s.arg;resetTryEntry(r)}return c}}throw Error("illegal catch attempt")},delegateYield:function(t,r,s){return this.delegate={iterator:values(t),resultName:r,nextLoc:s},"next"===this.method&&(this.arg=e),b}},t}function asyncGeneratorStep(e,t,r,s,c,u,l){try{var p=e[u](l),h=p.value}catch(m){return void r(m)}p.done?t(h):Promise.resolve(h).then(s,c)}function _defineProperty(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=_typeof(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,t);if("object"!=_typeof(s))return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==_typeof(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}window.__WUJIE&&!window.__POWERED_BY_WUJIE__&&stopMainAppRun(),window.addEventListener("popstate",function(){var e=anchorElementGenerator(window.location.href),t=getAnchorElementQueryMap(e);e=null,Object.keys(t).map(function(e){return getWujieById(e)}).filter(function(e){return e}).forEach(function(e){var r=t[e.id],s=di.call(e.iframe.contentDocument,"body");if(/http/.test(r))e.degrade?(renderElementToContainer(e.document.documentElement,s),renderIframeReplaceApp(window.decodeURIComponent(r),getDegradeIframe(e.id).parentElement,e.degradeAttrs)):renderIframeReplaceApp(window.decodeURIComponent(r),e.shadowRoot.host.parentElement,e.degradeAttrs),e.hrefFlag=!0;else if(e.hrefFlag){if(e.degrade){var c=initRenderIframeAndContainer(e.id,e.el,e.degradeAttrs).iframe;patchEventTimeStamp(c.contentWindow,e.iframe.contentWindow),c.contentWindow.onunload=function(){e.unmount()},c.contentDocument.appendChild(s.firstElementChild),e.document=c.contentDocument}else renderElementToContainer(e.shadowRoot.host,e.el);e.hrefFlag=!1}})}),function(){var e=window.customElements;if(e&&(null==e||!e.get("wujie-app"))){var t=function(){function WujieApp2(){return _classCallCheck(this,WujieApp2),e=this,r=arguments,t=_getPrototypeOf(t=WujieApp2),_possibleConstructorReturn(e,_isNativeReflectConstruct()?Reflect.construct(t,r||[],_getPrototypeOf(e).constructor):t.apply(e,r));var e,t,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_setPrototypeOf(e,t)}(WujieApp2,_wrapNativeSuper(HTMLElement)),_createClass(WujieApp2,[{key:"connectedCallback",value:function(){if(!this.shadowRoot){var e=this.attachShadow({mode:"open"}),t=getWujieById(this.getAttribute(Bn));patchElementEffect(e,t.iframe.contentWindow),t.shadowRoot=e}}},{key:"disconnectedCallback",value:function(){var e=getWujieById(this.getAttribute(Bn));null==e||e.unmount()}}])}();null==e||e.define("wujie-app",t)}}(),ro||warn("当前浏览器不支持无界，子应用将采用iframe方式渲染");var Oi=A({name:"WujieVue",props:{width:{type:String,default:""},height:{type:String,default:""},name:{type:String,default:""},loading:{type:HTMLElement,default:void 0},url:{type:String,default:""},sync:{type:Boolean,default:void 0},prefix:{type:Object,default:void 0},alive:{type:Boolean,default:void 0},props:{type:Object,default:void 0},attrs:{type:Object,default:void 0},replace:{type:Function,default:void 0},fetch:{type:Function,default:void 0},fiber:{type:Boolean,default:void 0},degrade:{type:Boolean,default:void 0},plugins:{type:Array,default:null},beforeLoad:{type:Function,default:null},beforeMount:{type:Function,default:null},afterMount:{type:Function,default:null},beforeUnmount:{type:Function,default:null},afterUnmount:{type:Function,default:null},activated:{type:Function,default:null},deactivated:{type:Function,default:null},loadError:{type:Function,default:null},style:{type:Object,default:void 0},iframeAddEventListeners:{type:Array,default:null},iframeOnEvents:{type:Array,default:null}},data:function(){return{startAppQueue:Promise.resolve()}},mounted:function(){var e=this;this.name&&(window.__WUJIE_QUEUE?window.__WUJIE_QUEUE[this.name]?this.startAppQueue=window.__WUJIE_QUEUE[this.name]:window.__WUJIE_QUEUE[this.name]=this.startAppQueue:window.__WUJIE_QUEUE=_defineProperty({},this.name,this.startAppQueue)),_i.$onAll(this.handleEmit),this.execStartApp(),this.$watch(function(){return e.name+e.url},function(){return e.execStartApp()})},methods:{handleEmit:function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),s=1;s<t;s++)r[s-1]=arguments[s];this.$emit.apply(this,[e].concat(r))},startApp:function(){var e,t=this;return(e=_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,startApp({name:t.name,url:t.url,el:t.$refs.wujie,loading:t.loading,alive:t.alive,fetch:t.fetch,props:t.props,attrs:t.attrs,replace:t.replace,sync:t.sync,prefix:t.prefix,fiber:t.fiber,degrade:t.degrade,plugins:t.plugins,beforeLoad:t.beforeLoad,beforeMount:t.beforeMount,afterMount:t.afterMount,beforeUnmount:t.beforeUnmount,afterUnmount:t.afterUnmount,activated:t.activated,deactivated:t.deactivated,loadError:t.loadError,iframeAddEventListeners:t.iframeAddEventListeners,iframeOnEvents:t.iframeOnEvents});case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0);case 8:case"end":return e.stop()}},_callee,null,[[0,5]])}),function(){var t=this,r=arguments;return new Promise(function(s,c){var u=e.apply(t,r);function _next(e){asyncGeneratorStep(u,s,c,_next,_throw,"next",e)}function _throw(e){asyncGeneratorStep(u,s,c,_next,_throw,"throw",e)}_next(void 0)})})()},execStartApp:function(){this.startAppQueue=this.startAppQueue.then(this.startApp),window.__WUJIE_QUEUE[this.name]=this.startAppQueue},destroy:function(){destroyApp(this.name)}},beforeDestroy:function(){_i.$offAll(this.handleEmit)},render:function(){return k("div",{style:_objectSpread({width:this.width,height:this.height},this.style),ref:"wujie"})}});Oi.setupApp=function(e){e.name&&function(e,t){var r=Wo.get(e);r?Wo.set(e,_objectSpread$7(_objectSpread$7({},r),{},{options:t})):Wo.set(e,{options:t})}(e.name,e)},Oi.preloadApp=function(e){co(function(){if(!getWujieById(e.name)&&!isMatchSyncQueryById(e.name)){var t=getOptionsById(e.name),r=mergeOptions(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys$1(Object(r),!0).forEach(function(t){_defineProperty$1(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys$1(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},e),t),s=r.name,c=r.url,u=r.html,l=r.props,p=r.alive,h=r.replace,m=r.fetch,y=r.exec,g=r.attrs,v=r.degradeAttrs,b=r.fiber,w=r.degrade,E=r.prefix,_=r.plugins,O=r.lifecycles,S=r.iframeAddEventListeners,T=r.iframeOnEvents,x=new Ei({name:s,url:c,attrs:g,degradeAttrs:v,fiber:b,degrade:w,plugins:_,lifecycles:O,iframeAddEventListeners:S,iframeOnEvents:T});if(x.preload)return x.preload;var A=function(){var e=_asyncToGenerator$1(Mn.mark(function _callee(){var e,t,r,s,g,v,w;return Mn.wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return null===(e=x.lifecycles)||void 0===e||null===(t=e.beforeLoad)||void 0===t||t.call(e,x.iframe.contentWindow),_.next=3,importHTML({url:c,html:u,opts:{fetch:m||window.fetch,plugins:x.plugins,loadError:x.lifecycles.loadError,fiber:b}});case 3:return r=_.sent,s=r.template,g=r.getExternalScripts,v=r.getExternalStyleSheets,_.next=9,processCssLoader(x,s,v);case 9:return w=_.sent,_.next=12,x.active({url:c,props:l,prefix:E,alive:p,template:w,fetch:m,replace:h});case 12:if(!y){_.next=17;break}return _.next=15,x.start(g);case 15:_.next=19;break;case 17:return _.next=19,g();case 19:case"end":return _.stop()}},_callee)}));return function(){return e.apply(this,arguments)}}();x.preload=A()}})},Oi.bus=_i,Oi.destroyApp=destroyApp,Oi.install=function(e){e.component("WujieVue",Oi)};const{bus:Si,setupApp:Ti,preloadApp:xi}=Oi,Ai={"react-admin":{devUrl:"http://localhost:5500",prodUrl:"https://xixiemperor.github.io/BadmintonFrontend-B/",preload:!0,sync:!0}};function startReactAdmin(e,t={}){return startApp({name:"react-admin",url:Ai["react-admin"].prodUrl,el:e,props:t,alive:!0,sync:!0})}const Ri=q(hn);Ri.use(wr),Ri.use(br),Ri.use(H),Ri.directive("auth",mn.auth),function(){try{const t=Ai["react-admin"],r=t.prodUrl;if(Ti({name:"react-admin",url:r,alive:t.alive,...t}),t.preload)try{xi({name:"react-admin",exec:!1,loadError:(e,t)=>{j.warning("管理后台预加载失败，可能会影响首次访问速度")}})}catch(e){j.warning("管理后台预加载配置失败")}}catch(e){j.error("微前端框架初始化失败")}}(),yn.init({app:"BMT-MicroApps",release:"dev",batchSize:20,sampleRate:1,debug:!0}),Ri.mount("#app");export{useRouter as a,useRealtime as b,pt as c,useRoute as d,defineStore as e,updateUserProfile as f,uploadAvatar as g,Si as h,_r as i,startReactAdmin as s,Sr as u};
