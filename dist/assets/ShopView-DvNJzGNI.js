import{r as a,o as e,l as s,h as t,g as l,w as r,C as c,A as o,P as i,Q as n,B as d,O as u,a4 as p,J as m,f as y,x as g,K as f,d as v,L as _,M as C,k as h,ae as w,a0 as k,$ as F,af as b,R as j,m as A,ah as E,a1 as x,aj as D,a2 as I,a3 as z,E as S,a as B,ak as $,U as M,a6 as V,al as P,a7 as U,aa as J,b as L,I as N,am as T,G as K}from"./index-RXELqIC3.js";/* empty css                     *//* empty css               */import"./el-tooltip-l0sNRNKZ.js";/* empty css                     */import{g as O,a as G,b as H}from"./shop-DNOL2iz9.js";import{_ as Q}from"./_plugin-vue_export-helper-CRLhVpGU.js";/* empty css                   *//* empty css                      *//* empty css                  *//* empty css                 *//* empty css                 *//* empty css               *//* empty css                *//* empty css                     *//* empty css                         */const R={class:"category-list"},q={class:"mobile-categories"},W={class:"category-tags"},X=Q({t:"CategoryList",emits:["category-selected"],setup(f,{emit:v}){const _=a([]),C=a("all"),h=a=>{C.value=a,w("category-selected",a)},w=v;return e(()=>{(async()=>{const a=await O();_.value=a.data.data})()}),(a,e)=>{const f=c,v=d,w=p;return m(),s("div",R,[e[3]||(e[3]=t("h2",null,"商品分类",-1)),l(v,{class:"category-menu desktop-menu","default-active":C.value,onSelect:h},{default:r(()=>[l(f,{index:"all"},{default:r(()=>[...e[1]||(e[1]=[o(" 全部商品 ",-1)])]),l:1}),(m(!0),s(i,null,n(_.value,a=>(m(),y(f,{key:a.id,index:a.id.toString()},{default:r(()=>[o(g(a.name),1)]),l:2},1032,["index"]))),128))]),l:1},8,["default-active"]),t("div",q,[t("div",W,[l(w,{class:u(["category-tag",{active:"all"===C.value}]),onClick:e[0]||(e[0]=a=>h("all")),effect:"plain"},{default:r(()=>[...e[2]||(e[2]=[o(" 全部商品 ",-1)])]),l:1},8,["class"]),(m(!0),s(i,null,n(_.value,a=>(m(),y(w,{key:a.id,class:u(["category-tag",{active:C.value===a.id.toString()}]),onClick:e=>h(a.id.toString()),effect:"plain"},{default:r(()=>[o(g(a.name),1)]),l:2},1032,["class","onClick"]))),128))])])])}}},[["__scopeId","data-v-030a4f76"]]),Y={class:"product-list"},Z={class:"filter-panel"},aa={class:"filter-row"},ea={class:"button-row"},sa={class:"product-grid"},ta=["src"],la={class:"product-info"},ra={class:"product-name"},ca={class:"product-subtitle"},oa={class:"product-price-row"},ia={class:"product-price"},na={class:"product-sales"},da={key:0,class:"pagination-container"},ua=Q({t:"ProductList",props:{categoryId:{type:[String,Number],default:"all"}},setup(e){const c=e,d=B(),u=a(!1),p=a([]),V=f({keyword:"",orderBy:"",pageNum:1,pageSize:8,categoryId:c.categoryId}),P=f({pageNum:1,pageSize:8,total:0}),U=v(()=>window.innerWidth<=768?"prev, pager, next":"total, sizes, prev, pager, next, jumper"),J=async()=>{u.value=!0;try{const a=await G(V);0===a.data.code?(p.value=a.data.data.list,P.pageNum=a.data.data.pageNum,P.pageSize=a.data.data.pageSize,P.total=a.data.data.total):S.error("获取商品列表失败")}catch(a){S.error("获取商品列表失败")}finally{u.value=!1}};_(()=>c.categoryId,a=>{V.categoryId=a,V.pageNum=1,J()},{immediate:!0});const L=()=>{V.pageNum=1,J()},N=()=>{V.keyword="",V.orderBy="",V.pageNum=1,J()},T=a=>{V.pageSize=a,J()},K=a=>{V.pageNum=a,J()};return(a,e)=>{const c=F,f=k,v=w,_=b,S=A,B=E,J=M,O=$,G=D,H=I,Q=z,R=x;return m(),s("div",Y,[t("div",Z,[l(B,{inline:!0,class:"filter-form"},{default:r(()=>[t("div",aa,[l(v,{label:"排序方式",class:"sort-item"},{default:r(()=>[l(f,{modelValue:V.orderBy,"onUpdate:modelValue":e[0]||(e[0]=a=>V.orderBy=a),placeholder:"请选择"},{default:r(()=>[l(c,{label:"默认排序",value:""}),l(c,{label:"价格升序",value:"price_asc"}),l(c,{label:"价格降序",value:"price_desc"}),l(c,{label:"销量降序",value:"sales_desc"})]),l:1},8,["modelValue"])]),l:1}),l(v,{label:"关键词",class:"search-item"},{default:r(()=>[l(_,{modelValue:V.keyword,"onUpdate:modelValue":e[1]||(e[1]=a=>V.keyword=a),placeholder:"请输入关键词",onKeyup:j(L,["enter"])},null,8,["modelValue"])]),l:1})]),t("div",ea,[l(v,null,{default:r(()=>[l(S,{type:"primary",onClick:L},{default:r(()=>[...e[2]||(e[2]=[o("搜索",-1)])]),l:1}),l(S,{onClick:N},{default:r(()=>[...e[3]||(e[3]=[o("重置",-1)])]),l:1})]),l:1})])]),l:1})]),C((m(),s("div",sa,[l(G,{gutter:20},{default:r(()=>[(m(!0),s(i,null,n(p.value,a=>(m(),y(O,{xs:12,sm:12,md:8,lg:6,key:a.id},{default:r(()=>[l(J,{class:"product-card",onClick:e=>{return s=a.id,void d.push(`/product/${s}`);var s}},{default:r(()=>[t("img",{src:a.mainImage,class:"product-image"},null,8,ta),t("div",la,[t("h3",ra,g(a.name),1),t("p",ca,g(a.subtitle),1),t("div",oa,[t("span",ia,"¥"+g(a.price.toFixed(2)),1),t("span",na,"销量: "+g(a.sales),1)])])]),l:2},1032,["onClick"])]),l:2},1024))),128))]),l:1}),0!==p.value.length||u.value?h("",!0):(m(),y(H,{key:0,description:"暂无商品"}))])),[[R,u.value]]),P.total>0?(m(),s("div",da,[l(Q,{background:"",onSizeChange:T,onCurrentChange:K,"current-page":P.pageNum,"page-sizes":[8,4,6,10,12],"page-size":P.pageSize,layout:U.value,total:P.total},null,8,["current-page","page-size","layout","total"])])):h("",!0)])}}},[["__scopeId","data-v-e932d64b"]]),pa={class:"product-carousel"},ma={class:"content-left"},ya={class:"carousel-title"},ga={class:"carousel-subtitle"},fa={class:"content-right"},va=["src","alt"],_a=Q({t:"ProductCarousel",setup(c){const d=B(),u=a([]);a([]);const p=[{primary:"#FF6B6B",secondary:"#4ECDC4"},{primary:"#845EC2",secondary:"#FF8066"},{primary:"#FFD93D",secondary:"#6BCF7F"},{primary:"#FF8E9B",secondary:"#C7CEEA"},{primary:"#A8E6CF",secondary:"#FFEAA7"},{primary:"#74B9FF",secondary:"#FD79A8"},{primary:"#FDCB6E",secondary:"#6C5CE7"},{primary:"#55A3FF",secondary:"#FEA47F"},{primary:"#26DE81",secondary:"#FC7C7C"},{primary:"#A29BFE",secondary:"#FDA085"}],f=a=>{let e=0;for(let s=0;s<a.length;s++){e=(e<<5)-e+a.charCodeAt(s),e&=e}return Math.abs(e)%p.length},v=async()=>{try{const a=u.value.map(async(a,e)=>{try{const e=await P.post("/api/image/extract-color",{imageUrl:a.mainImage});if(0===e.data.code){const s=e.data.data.color,t=e.data.data.source,l=`linear-gradient(135deg, ${s}CC, ${_(s,-30)}DD)`;return a.bgColor=l,a.colorSource="oss"===t?"阿里云OSS":"java"===t?"Java处理":t,{color:s,source:t,success:!0}}throw new Error(e.data.msg||"后端返回错误")}catch(s){const e=f(a.productName+a.productId),t=p[e],l=`linear-gradient(135deg, ${t.primary}CC, ${t.secondary}AA)`;return a.bgColor=l,a.colorSource="预设方案",{color:t.primary,source:"fallback",success:!1,error:s.message}}}),e=await Promise.all(a);e.filter(a=>a.success).length,e.filter(a=>!a.success).length}catch(a){await(async()=>{try{u.value.forEach((a,e)=>{const s=f(a.productName+a.productId),t=p[s],l=`linear-gradient(135deg, ${t.primary}CC, ${t.secondary}AA)`;a.bgColor=l})}catch(a){}})()}},_=(a,e)=>{const s=a.replace("#",""),t=parseInt(s,16);return"#"+((1<<24)+(Math.max(0,Math.min(255,(t>>16)+e))<<16)+(Math.max(0,Math.min(255,(t>>8&255)+e))<<8)+Math.max(0,Math.min(255,(255&t)+e))).toString(16).slice(1)};return e(async()=>{await(async()=>{try{const a=await H();0===a.data.code?u.value=a.data.data:S.error(a.data.msg)}catch(a){}})(),await v()}),(a,e)=>{const c=A,p=U,f=V;return m(),s("div",pa,[l(f,{interval:4e3,type:"card",height:"280px","indicator-position":"outside",arrow:"never",class:"carousel-container"},{default:r(()=>[(m(!0),s(i,null,n(u.value,a=>(m(),y(p,{key:a.productId,class:"carousel-item"},{default:r(()=>[t("div",{class:"carousel-content",style:J({background:a.bgColor||"linear-gradient(135deg, #6366f1AA, #4f46e5DD)"})},[t("div",ma,[t("h3",ya,g(a.productName),1),t("p",ga,g(a.subtitle),1),l(c,{type:"primary",size:"large",class:"carousel-button",onClick:e=>{return s=a.productId,void d.push(`/product/${s}`);var s}},{default:r(()=>[...e[0]||(e[0]=[o(" 立即购买 ",-1)])]),l:1},8,["onClick"])]),t("div",fa,[t("img",{src:a.mainImage,alt:a.productName,class:"carousel-image"},null,8,va)])],4)]),l:2},1024))),128))]),l:1})])}}},[["__scopeId","data-v-805635c4"]]),Ca={class:"shop-container"},ha={class:"category-section"},wa={key:1,class:"mobile-layout"},ka={class:"mobile-category"},Fa={class:"mobile-products"},ba=Q({t:"ShopView",setup(c){const o=a("all"),i=a(!1),n=()=>{i.value=window.innerWidth<=768},d=((a,e)=>{let s;return function(...t){clearTimeout(s),s=setTimeout(()=>{clearTimeout(s),a(...t)},e)}})(n,150),u=a=>{o.value=a};return e(()=>{n(),window.addEventListener("resize",d)}),L(()=>{window.removeEventListener("resize",d)}),(a,e)=>{const c=T,n=K,d=N;return m(),s("div",Ca,[e[0]||(e[0]=t("div",{class:"page-header"},[t("h1",{class:"page-title"},"羽体商城"),t("p",{class:"page-subtitle"},"专业羽毛球装备，助力你的运动表现")],-1)),l(_a),i.value?h("",!0):(m(),y(d,{key:0,class:"desktop-layout"},{default:r(()=>[l(c,{width:"240px",class:"sidebar"},{default:r(()=>[t("div",ha,[l(X,{onCategorySelected:u})])]),l:1}),l(n,{class:"main-content"},{default:r(()=>[l(ua,{categoryId:o.value},null,8,["categoryId"])]),l:1})]),l:1})),i.value?(m(),s("div",wa,[t("div",ka,[l(X,{onCategorySelected:u})]),t("div",Fa,[l(ua,{categoryId:o.value},null,8,["categoryId"])])])):h("",!0)])}}},[["__scopeId","data-v-973c1984"]]);export{ba as default};
